

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>matplotlib.axes._base &mdash; Pipeline 
 (2024.2.0.4)  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_astrorefs.css?v=4d4a2fdb" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom_theme.css?v=30144f19" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=0729d509"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: gray" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Pipeline 
 (2024.2.0.4)
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/ways_to_run_the_pipeline.html">Ways to run the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/recipes.html">Pipeline Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dependencies.html">Dependencies of <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases.html">Past Releases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../apisummary.html">Full APIs (autosummary)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../apisummary.html#pipeline-tasks-autosummary">Pipeline Tasks (autosummary)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../apisummary.html#pipeline-domain-context-autosummary">Pipeline domain/context (autosummary)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../apisummary.html#pipeline-domain-infrastructure-modules-automodapi">Pipeline domain/infrastructure modules (automodapi)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../apisummary.html#pipeline-h-tasks-modules-autmodapi"><code class="docutils literal notranslate"><span class="pre">pipeline.h*.tasks</span></code> modules (autmodapi)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../apisummary.html#inheritance-diagrams-for-pipeline-task-inputs-results-classes">Inheritance Diagrams for Pipeline <code class="docutils literal notranslate"><span class="pre">Task</span></code>/<code class="docutils literal notranslate"><span class="pre">Inputs</span></code>/<code class="docutils literal notranslate"><span class="pre">Results</span></code> Classes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/ALMA-Imaging-Workflow.html">ALMA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/VLA-Imaging-Workflow.html">VLA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/VLASS-SE-CONT-Imaging-Workflow.html">VLASS-SE-CONT imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/VLASS-SE-CUBE-Imaging-Workflow.html">VLASS-SE-CUBE imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/selfcal_workflow.html">VLASS Selfcal &amp; Restore workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/comparing_pipeline_executions.html">Comparing pipeline executions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/building_the_pipeline.html">Building the pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modular.html">Run the Pipeline in a Conda environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/pipeline_tests.html">Pipeline testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/DataType_Testing.html">DataType Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/QA_scores.html">Pipeline Quality Assurance (QA) Score Class Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/DeveloperDocumentation.html">Pipeline developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../develdocmd/python3_conversion_notes.html">Python 3 conversion notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../heuristics/field_parameter.html">Field parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../heuristics/FlaggingTasks.html">Pipeline Flagging Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../notebooks/context.html">Pipeline Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../notebooks/tier0dask.html">“Tier0” Parallelization with Dask/Futures</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: gray" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Pipeline 
 (2024.2.0.4)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">matplotlib.axes._base</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for matplotlib.axes._base</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Sequence</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">ExitStack</span>
<span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">numbers</span> <span class="kn">import</span> <span class="n">Real</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">attrgetter</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">types</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">_api</span><span class="p">,</span> <span class="n">cbook</span><span class="p">,</span> <span class="n">_docstring</span><span class="p">,</span> <span class="n">offsetbox</span>
<span class="kn">import</span> <span class="nn">matplotlib.artist</span> <span class="k">as</span> <span class="nn">martist</span>
<span class="kn">import</span> <span class="nn">matplotlib.axis</span> <span class="k">as</span> <span class="nn">maxis</span>
<span class="kn">from</span> <span class="nn">matplotlib.cbook</span> <span class="kn">import</span> <span class="n">_OrderedSet</span><span class="p">,</span> <span class="n">_check_1d</span><span class="p">,</span> <span class="n">index_of</span>
<span class="kn">import</span> <span class="nn">matplotlib.collections</span> <span class="k">as</span> <span class="nn">mcoll</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">mcolors</span>
<span class="kn">import</span> <span class="nn">matplotlib.font_manager</span> <span class="k">as</span> <span class="nn">font_manager</span>
<span class="kn">from</span> <span class="nn">matplotlib.gridspec</span> <span class="kn">import</span> <span class="n">SubplotSpec</span>
<span class="kn">import</span> <span class="nn">matplotlib.image</span> <span class="k">as</span> <span class="nn">mimage</span>
<span class="kn">import</span> <span class="nn">matplotlib.lines</span> <span class="k">as</span> <span class="nn">mlines</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
<span class="kn">from</span> <span class="nn">matplotlib.rcsetup</span> <span class="kn">import</span> <span class="n">cycler</span><span class="p">,</span> <span class="n">validate_axisbelow</span>
<span class="kn">import</span> <span class="nn">matplotlib.spines</span> <span class="k">as</span> <span class="nn">mspines</span>
<span class="kn">import</span> <span class="nn">matplotlib.table</span> <span class="k">as</span> <span class="nn">mtable</span>
<span class="kn">import</span> <span class="nn">matplotlib.text</span> <span class="k">as</span> <span class="nn">mtext</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mticker</span>
<span class="kn">import</span> <span class="nn">matplotlib.transforms</span> <span class="k">as</span> <span class="nn">mtransforms</span>

<span class="n">_log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">_axis_method_wrapper</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper to generate Axes methods wrapping Axis methods.</span>

<span class="sd">    After ::</span>

<span class="sd">        get_foo = _axis_method_wrapper(&quot;xaxis&quot;, &quot;get_bar&quot;)</span>

<span class="sd">    (in the body of a class) ``get_foo`` is a method that forwards it arguments</span>
<span class="sd">    to the ``get_bar`` method of the ``xaxis`` attribute, and gets its</span>
<span class="sd">    signature and docstring from ``Axis.get_bar``.</span>

<span class="sd">    The docstring of ``get_foo`` is built by replacing &quot;this Axis&quot; by &quot;the</span>
<span class="sd">    {attr_name}&quot; (i.e., &quot;the xaxis&quot;, &quot;the yaxis&quot;) in the wrapped method&#39;s</span>
<span class="sd">    dedented docstring; additional replacements can be given in *doc_sub*.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">doc_sub</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attr_name</span> <span class="o">=</span> <span class="n">attr_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span> <span class="o">=</span> <span class="n">method_name</span>
        <span class="c1"># Immediately put the docstring in ``self.__doc__`` so that docstring</span>
        <span class="c1"># manipulations within the class body work as expected.</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getdoc</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">maxis</span><span class="o">.</span><span class="n">Axis</span><span class="p">,</span> <span class="n">method_name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_missing_subs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">doc</span><span class="p">:</span>
            <span class="n">doc_sub</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;this Axis&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attr_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="p">(</span><span class="n">doc_sub</span> <span class="ow">or</span> <span class="p">{})}</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">doc_sub</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>  <span class="c1"># Delay raising error until we know qualname.</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_missing_subs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                <span class="n">doc</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">doc</span>

    <span class="k">def</span> <span class="nf">__set_name__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="c1"># This is called at the end of the class body as</span>
        <span class="c1"># ``self.__set_name__(cls, name_under_which_self_is_assigned)``; we</span>
        <span class="c1"># rely on that to give the wrapper the correct __name__/__qualname__.</span>
        <span class="n">get_method</span> <span class="o">=</span> <span class="n">attrgetter</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">attr_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">get_method</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">wrapper</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">=</span> <span class="n">owner</span><span class="o">.</span><span class="vm">__module__</span>
        <span class="n">wrapper</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">wrapper</span><span class="o">.</span><span class="vm">__qualname__</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">owner</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">wrapper</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__doc__</span>
        <span class="c1"># Manually copy the signature instead of using functools.wraps because</span>
        <span class="c1"># displaying the Axis method source when asking for the Axes method</span>
        <span class="c1"># source would be confusing.</span>
        <span class="n">wrapper</span><span class="o">.</span><span class="n">__signature__</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span>
            <span class="nb">getattr</span><span class="p">(</span><span class="n">maxis</span><span class="o">.</span><span class="n">Axis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_missing_subs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The definition of </span><span class="si">{}</span><span class="s2"> expected that the docstring of Axis.</span><span class="si">{}</span><span class="s2"> &quot;</span>
                <span class="s2">&quot;contains </span><span class="si">{!r}</span><span class="s2"> as substrings&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">wrapper</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_name</span><span class="p">,</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">repr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_missing_subs</span><span class="p">))))</span>

        <span class="nb">setattr</span><span class="p">(</span><span class="n">owner</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">wrapper</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">_TransformedBoundsLocator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Axes locator for `.Axes.inset_axes` and similarly positioned Axes.</span>

<span class="sd">    The locator is a callable object used in `.Axes.set_aspect` to compute the</span>
<span class="sd">    Axes location depending on the renderer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">transform</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *bounds* (a ``[l, b, w, h]`` rectangle) and *transform* together</span>
<span class="sd">        specify the position of the inset Axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounds</span> <span class="o">=</span> <span class="n">bounds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transform</span> <span class="o">=</span> <span class="n">transform</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="c1"># Subtracting transSubfigure will typically rely on inverted(),</span>
        <span class="c1"># freezing the transform; thus, this needs to be delayed until draw</span>
        <span class="c1"># time as transSubfigure may otherwise change after this is evaluated.</span>
        <span class="k">return</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedBbox</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_bounds</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transform</span> <span class="o">-</span> <span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">transSubfigure</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_process_plot_format</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">ambiguous_fmt_datakey</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a MATLAB style color/line style format string to a (*linestyle*,</span>
<span class="sd">    *marker*, *color*) tuple.</span>

<span class="sd">    Example format strings include:</span>

<span class="sd">    * &#39;ko&#39;: black circles</span>
<span class="sd">    * &#39;.b&#39;: blue dots</span>
<span class="sd">    * &#39;r--&#39;: red dashed lines</span>
<span class="sd">    * &#39;C2--&#39;: the third color in the color cycle, dashed lines</span>

<span class="sd">    The format is absolute in the sense that if a linestyle or marker is not</span>
<span class="sd">    defined in *fmt*, there is no line or marker. This is expressed by</span>
<span class="sd">    returning &#39;None&#39; for the respective quantity.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    matplotlib.Line2D.lineStyles, matplotlib.colors.cnames</span>
<span class="sd">        All possible styles and color format strings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">linestyle</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># First check whether fmt is just a colorspec, but specifically exclude the</span>
    <span class="c1"># grayscale string &quot;1&quot; (not &quot;1.0&quot;), which is interpreted as the tri_down</span>
    <span class="c1"># marker &quot;1&quot;.  The grayscale string &quot;0&quot; could be unambiguously understood</span>
    <span class="c1"># as a color (black) but also excluded for consistency.</span>
    <span class="k">if</span> <span class="n">fmt</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="n">errfmt</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">{!r}</span><span class="s2"> is neither a data key nor a valid format string (</span><span class="si">{}</span><span class="s2">)&quot;</span>
              <span class="k">if</span> <span class="n">ambiguous_fmt_datakey</span> <span class="k">else</span>
              <span class="s2">&quot;</span><span class="si">{!r}</span><span class="s2"> is not a valid format string (</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">fmt</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">fmt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fmt</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="n">mlines</span><span class="o">.</span><span class="n">lineStyles</span><span class="p">:</span>  <span class="c1"># First, the two-char styles.</span>
            <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errfmt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="s2">&quot;two linestyle symbols&quot;</span><span class="p">))</span>
            <span class="n">linestyle</span> <span class="o">=</span> <span class="n">fmt</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mlines</span><span class="o">.</span><span class="n">lineStyles</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errfmt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="s2">&quot;two linestyle symbols&quot;</span><span class="p">))</span>
            <span class="n">linestyle</span> <span class="o">=</span> <span class="n">c</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mlines</span><span class="o">.</span><span class="n">lineMarkers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errfmt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="s2">&quot;two marker symbols&quot;</span><span class="p">))</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">c</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">get_named_colors_mapping</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errfmt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="s2">&quot;two color symbols&quot;</span><span class="p">))</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">c</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span>
            <span class="n">cn_color</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;C\d+&quot;</span><span class="p">,</span> <span class="n">fmt</span><span class="p">[</span><span class="n">i</span><span class="p">:])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">cn_color</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errfmt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="s2">&quot;&#39;C&#39; must be followed by a number&quot;</span><span class="p">))</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">to_rgba</span><span class="p">(</span><span class="n">cn_color</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cn_color</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errfmt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;unrecognized character </span><span class="si">{</span><span class="n">c</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;lines.linestyle&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">linestyle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>

    <span class="k">return</span> <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span>


<span class="k">class</span> <span class="nc">_process_plot_var_args</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Process variable length arguments to `~.Axes.plot`, to support ::</span>

<span class="sd">      plot(t, s)</span>
<span class="sd">      plot(t1, s1, t2, s2)</span>
<span class="sd">      plot(t1, s1, &#39;ko&#39;, t2, s2)</span>
<span class="sd">      plot(t1, s1, &#39;ko&#39;, t2, s2, &#39;r--&#39;, t3, e3)</span>

<span class="sd">    an arbitrary number of *x*, *y*, *fmt* are allowed</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="n">command</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_prop_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cycler</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cycler</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cycler</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.prop_cycle&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_idx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cycler_items</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">cycler</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">_process_unit_info</span><span class="p">(</span><span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">pos_only</span> <span class="ow">in</span> <span class="s2">&quot;xy&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pos_only</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">_api</span><span class="o">.</span><span class="n">kwarg_error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="p">,</span> <span class="n">pos_only</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Process dict views</span>
            <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">cbook</span><span class="o">.</span><span class="n">sanitize_sequence</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Process the &#39;data&#39; kwarg.</span>
            <span class="n">replaced</span> <span class="o">=</span> <span class="p">[</span><span class="n">mpl</span><span class="o">.</span><span class="n">_replacer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">label_namer_idx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># Can be x, y or y, c.</span>
                <span class="c1"># Figure out what the second argument is.</span>
                <span class="c1"># 1) If the second argument cannot be a format shorthand, the</span>
                <span class="c1">#    second argument is the label_namer.</span>
                <span class="c1"># 2) Otherwise (it could have been a format shorthand),</span>
                <span class="c1">#    a) if we did perform a substitution, emit a warning, and</span>
                <span class="c1">#       use it as label_namer.</span>
                <span class="c1">#    b) otherwise, it is indeed a format shorthand; use the</span>
                <span class="c1">#       first argument as label_namer.</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">_process_plot_format</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>  <span class="c1"># case 1)</span>
                    <span class="n">label_namer_idx</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">replaced</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>  <span class="c1"># case 2a)</span>
                        <span class="n">_api</span><span class="o">.</span><span class="n">warn_external</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Second argument </span><span class="si">{</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">!r}</span><span class="s2"> is ambiguous: could &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;be a format string but is in &#39;data&#39;; using as &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;data.  If it was intended as data, set the &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;format string to an empty string to suppress &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;this warning.  If it was intended as a format &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;string, explicitly pass the x-values as well.  &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;Alternatively, rename the entry in &#39;data&#39;.&quot;</span><span class="p">,</span>
                            <span class="ne">RuntimeWarning</span><span class="p">)</span>
                        <span class="n">label_namer_idx</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">else</span><span class="p">:</span>  <span class="c1"># case 2b)</span>
                        <span class="n">label_namer_idx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">label_namer_idx</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Using arbitrary long args with data is not supported due &quot;</span>
                    <span class="s2">&quot;to ambiguity of arguments; use multiple plotting calls &quot;</span>
                    <span class="s2">&quot;instead&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">_label_from_arg</span><span class="p">(</span>
                    <span class="n">replaced</span><span class="p">[</span><span class="n">label_namer_idx</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="n">label_namer_idx</span><span class="p">])</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">replaced</span>
        <span class="n">ambiguous_fmt_datakey</span> <span class="o">=</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">4</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_scalar_or_string</span><span class="p">(</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;plot() with multiple groups of data (i.e., &quot;</span>
                             <span class="s2">&quot;pairs of x and y) does not support multiple &quot;</span>
                             <span class="s2">&quot;labels&quot;</span><span class="p">)</span>

        <span class="c1"># Repeatedly grab (x, y) or (x, y, format) from the front of args and</span>
        <span class="c1"># massage them into arguments to plot() or fill().</span>

        <span class="k">while</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">this</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">this</span> <span class="o">+=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_args</span><span class="p">(</span>
                <span class="n">axes</span><span class="p">,</span> <span class="n">this</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">ambiguous_fmt_datakey</span><span class="o">=</span><span class="n">ambiguous_fmt_datakey</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_next_color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the next color in the cycle.&quot;&quot;&quot;</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cycler_items</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_idx</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;color&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idx</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cycler_items</span><span class="p">)</span>  <span class="c1"># Advance cycler.</span>
            <span class="k">return</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;k&quot;</span>

    <span class="k">def</span> <span class="nf">_getdefaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="nb">frozenset</span><span class="p">()):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If some keys in the property cycle (excluding those in the set</span>
<span class="sd">        *ignore*) are absent or set to None in the dict *kw*, return a copy</span>
<span class="sd">        of the next entry in the property cycle, excluding keys in *ignore*.</span>
<span class="sd">        Otherwise, don&#39;t advance the property cycle, and return an empty dict.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">defaults</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cycler_items</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_idx</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">{</span><span class="o">*</span><span class="n">defaults</span><span class="p">}</span> <span class="o">-</span> <span class="n">ignore</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_idx</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cycler_items</span><span class="p">)</span>  <span class="c1"># Advance cycler.</span>
            <span class="c1"># Return a new dict to avoid exposing _cycler_items entries to mutation.</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">defaults</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">_setdefaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">defaults</span><span class="p">,</span> <span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add to the dict *kw* the entries in the dict *default* that are absent</span>
<span class="sd">        or set to None in *kw*.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">defaults</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kw</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">defaults</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_makeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kw</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">kw</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">}</span>  <span class="c1"># Don&#39;t modify the original kw.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getdefaults</span><span class="p">(</span><span class="n">kw</span><span class="p">),</span> <span class="n">kw</span><span class="p">)</span>
        <span class="n">seg</span> <span class="o">=</span> <span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seg</span><span class="p">,</span> <span class="n">kw</span>

    <span class="k">def</span> <span class="nf">_makefill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Polygon doesn&#39;t directly support unitized inputs.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="n">kw</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># Don&#39;t modify the original kw.</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Ignore &#39;marker&#39;-related properties as they aren&#39;t Polygon</span>
        <span class="c1"># properties, but they are Line2D properties, and so they are</span>
        <span class="c1"># likely to appear in the default cycler construction.</span>
        <span class="c1"># This is done here to the defaults dictionary as opposed to the</span>
        <span class="c1"># other two dictionaries because we do want to capture when a</span>
        <span class="c1"># *user* explicitly specifies a marker which should be an error.</span>
        <span class="c1"># We also want to prevent advancing the cycler if there are no</span>
        <span class="c1"># defaults needed after ignoring the given properties.</span>
        <span class="n">ignores</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;marker&#39;</span><span class="p">,</span> <span class="s1">&#39;markersize&#39;</span><span class="p">,</span> <span class="s1">&#39;markeredgecolor&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;markerfacecolor&#39;</span><span class="p">,</span> <span class="s1">&#39;markeredgewidth&#39;</span><span class="p">}</span>
                   <span class="c1"># Also ignore anything provided by *kwargs*.</span>
                   <span class="o">|</span> <span class="p">{</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">})</span>

        <span class="c1"># Only using the first dictionary to use as basis</span>
        <span class="c1"># for getting defaults for back-compat reasons.</span>
        <span class="c1"># Doing it with both seems to mess things up in</span>
        <span class="c1"># various places (probably due to logic bugs elsewhere).</span>
        <span class="n">default_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getdefaults</span><span class="p">(</span><span class="n">kw</span><span class="p">,</span> <span class="n">ignores</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kw</span><span class="p">)</span>

        <span class="c1"># Looks like we don&#39;t want &quot;color&quot; to be interpreted to</span>
        <span class="c1"># mean both facecolor and edgecolor for some reason.</span>
        <span class="c1"># So the &quot;kw&quot; dictionary is thrown out, and only its</span>
        <span class="c1"># &#39;color&#39; value is kept and translated as a &#39;facecolor&#39;.</span>
        <span class="c1"># This design should probably be revisited as it increases</span>
        <span class="c1"># complexity.</span>
        <span class="n">facecolor</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># Throw out &#39;color&#39; as it is now handled as a facecolor</span>
        <span class="n">default_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># To get other properties set from the cycler</span>
        <span class="c1"># modify the kwargs dictionary.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setdefaults</span><span class="p">(</span><span class="n">default_dict</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

        <span class="n">seg</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)),</span>
                               <span class="n">facecolor</span><span class="o">=</span><span class="n">facecolor</span><span class="p">,</span>
                               <span class="n">fill</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
                               <span class="n">closed</span><span class="o">=</span><span class="n">kw</span><span class="p">[</span><span class="s1">&#39;closed&#39;</span><span class="p">])</span>
        <span class="n">seg</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seg</span><span class="p">,</span> <span class="n">kwargs</span>

    <span class="k">def</span> <span class="nf">_plot_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">tup</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                   <span class="n">return_kwargs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ambiguous_fmt_datakey</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process the arguments of ``plot([x], y, [fmt], **kwargs)`` calls.</span>

<span class="sd">        This processes a single set of ([x], y, [fmt]) parameters; i.e. for</span>
<span class="sd">        ``plot(x, y, x2, y2)`` it will be called twice. Once for (x, y) and</span>
<span class="sd">        once for (x2, y2).</span>

<span class="sd">        x and y may be 2D and thus can still represent multiple datasets.</span>

<span class="sd">        For multiple datasets, if the keyword argument *label* is a list, this</span>
<span class="sd">        will unpack the list and assign the individual labels to the datasets.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tup : tuple</span>
<span class="sd">            A tuple of the positional parameters. This can be one of</span>

<span class="sd">            - (y,)</span>
<span class="sd">            - (x, y)</span>
<span class="sd">            - (y, fmt)</span>
<span class="sd">            - (x, y, fmt)</span>

<span class="sd">        kwargs : dict</span>
<span class="sd">            The keyword arguments passed to ``plot()``.</span>

<span class="sd">        return_kwargs : bool</span>
<span class="sd">            Whether to also return the effective keyword arguments after label</span>
<span class="sd">            unpacking as well.</span>

<span class="sd">        ambiguous_fmt_datakey : bool</span>
<span class="sd">            Whether the format string in *tup* could also have been a</span>
<span class="sd">            misspelled data key.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        result</span>
<span class="sd">            If *return_kwargs* is false, a list of Artists representing the</span>
<span class="sd">            dataset(s).</span>
<span class="sd">            If *return_kwargs* is true, a list of (Artist, effective_kwargs)</span>
<span class="sd">            representing the dataset(s). See *return_kwargs*.</span>
<span class="sd">            The Artist is either `.Line2D` (if called from ``plot()``) or</span>
<span class="sd">            `.Polygon` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tup</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="c1"># xy is tup with fmt stripped (could still be (y,) only)</span>
            <span class="o">*</span><span class="n">xy</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">=</span> <span class="n">tup</span>
            <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">_process_plot_format</span><span class="p">(</span>
                <span class="n">fmt</span><span class="p">,</span> <span class="n">ambiguous_fmt_datakey</span><span class="o">=</span><span class="n">ambiguous_fmt_datakey</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;third arg must be a format string&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xy</span> <span class="o">=</span> <span class="n">tup</span>
            <span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="c1"># Don&#39;t allow any None value; these would be up-converted to one</span>
        <span class="c1"># element array of None which causes problems downstream.</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tup</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;x, y, and format string must not be None&quot;</span><span class="p">)</span>

        <span class="n">kw</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">prop_name</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">((</span><span class="s1">&#39;linestyle&#39;</span><span class="p">,</span> <span class="s1">&#39;marker&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">),</span>
                                  <span class="p">(</span><span class="n">linestyle</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">color</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># check for conflicts between fmt and kwargs</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;none&#39;</span>
                        <span class="ow">and</span> <span class="n">prop_name</span> <span class="ow">in</span> <span class="n">kwargs</span>
                        <span class="ow">and</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">&#39;None&#39;</span><span class="p">):</span>
                    <span class="c1"># Technically ``plot(x, y, &#39;o&#39;, ls=&#39;--&#39;)`` is a conflict</span>
                    <span class="c1"># because &#39;o&#39; implicitly unsets the linestyle</span>
                    <span class="c1"># (linestyle=&#39;None&#39;).</span>
                    <span class="c1"># We&#39;ll gracefully not warn in this case because an</span>
                    <span class="c1"># explicit set via kwargs can be seen as intention to</span>
                    <span class="c1"># override an implicit unset.</span>
                    <span class="c1"># Note: We don&#39;t val.lower() != &#39;none&#39; because val is not</span>
                    <span class="c1"># necessarily a string (can be a tuple for colors). This</span>
                    <span class="c1"># is safe, because *val* comes from _process_plot_format()</span>
                    <span class="c1"># which only returns &#39;None&#39;.</span>
                    <span class="n">_api</span><span class="o">.</span><span class="n">warn_external</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prop_name</span><span class="si">}</span><span class="s2"> is redundantly defined by the &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">prop_name</span><span class="si">}</span><span class="s2">&#39; keyword argument and the fmt string &quot;</span>
                        <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">fmt</span><span class="si">}</span><span class="s1">&quot; (-&gt; </span><span class="si">{</span><span class="n">prop_name</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">val</span><span class="si">!r}</span><span class="s1">). The keyword &#39;</span>
                        <span class="sa">f</span><span class="s2">&quot;argument will take precedence.&quot;</span><span class="p">)</span>
                <span class="n">kw</span><span class="p">[</span><span class="n">prop_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">_check_1d</span><span class="p">(</span><span class="n">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">index_of</span><span class="p">(</span><span class="n">xy</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x and y must have same first dimension, but &quot;</span>
                             <span class="sa">f</span><span class="s2">&quot;have shapes </span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">y</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x and y can be no greater than 2D, but have &quot;</span>
                             <span class="sa">f</span><span class="s2">&quot;shapes </span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">y</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;plot&#39;</span><span class="p">:</span>
            <span class="n">make_artist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeline</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;closed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;closed&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">make_artist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makefill</span>

        <span class="n">ncx</span><span class="p">,</span> <span class="n">ncy</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ncx</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">ncy</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">ncx</span> <span class="o">!=</span> <span class="n">ncy</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x has </span><span class="si">{</span><span class="n">ncx</span><span class="si">}</span><span class="s2"> columns but y has </span><span class="si">{</span><span class="n">ncy</span><span class="si">}</span><span class="s2"> columns&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ncx</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">ncy</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">label</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">)</span>
        <span class="n">n_datasets</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ncx</span><span class="p">,</span> <span class="n">ncy</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cbook</span><span class="o">.</span><span class="n">is_scalar_or_string</span><span class="p">(</span><span class="n">label</span><span class="p">):</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">*</span> <span class="n">n_datasets</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="o">==</span> <span class="n">n_datasets</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="n">label</span>
        <span class="k">elif</span> <span class="n">n_datasets</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Passing label as a length </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">label</span><span class="p">)</span><span class="si">}</span><span class="s1"> sequence when &#39;</span>
                    <span class="s1">&#39;plotting a single dataset is deprecated in Matplotlib 3.9 &#39;</span>
                    <span class="s1">&#39;and will error in 3.11.  To keep the current behavior, &#39;</span>
                    <span class="s1">&#39;cast the sequence to string before passing.&#39;</span><span class="p">)</span>
            <span class="n">_api</span><span class="o">.</span><span class="n">warn_deprecated</span><span class="p">(</span><span class="s1">&#39;3.9&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;label must be scalar or have the same length as the input &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;data, but found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">label</span><span class="p">)</span><span class="si">}</span><span class="s2"> for </span><span class="si">{</span><span class="n">n_datasets</span><span class="si">}</span><span class="s2"> datasets.&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">make_artist</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">x</span><span class="p">[:,</span> <span class="n">j</span> <span class="o">%</span> <span class="n">ncx</span><span class="p">],</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">j</span> <span class="o">%</span> <span class="n">ncy</span><span class="p">],</span> <span class="n">kw</span><span class="p">,</span>
                              <span class="p">{</span><span class="o">**</span><span class="n">kwargs</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">label</span><span class="p">})</span>
                  <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">return_kwargs</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">result</span><span class="p">]</span>


<span class="nd">@_api</span><span class="o">.</span><span class="n">define_aliases</span><span class="p">({</span><span class="s2">&quot;facecolor&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;fc&quot;</span><span class="p">]})</span>
<span class="k">class</span> <span class="nc">_AxesBase</span><span class="p">(</span><span class="n">martist</span><span class="o">.</span><span class="n">Artist</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;rectilinear&quot;</span>

    <span class="c1"># axis names are the prefixes for the attributes that contain the</span>
    <span class="c1"># respective axis; e.g. &#39;x&#39; &lt;-&gt; self.xaxis, containing an XAxis.</span>
    <span class="c1"># Note that PolarAxes uses these attributes as well, so that we have</span>
    <span class="c1"># &#39;x&#39; &lt;-&gt; self.xaxis, containing a ThetaAxis. In particular we do not</span>
    <span class="c1"># have &#39;theta&#39; in _axis_names.</span>
    <span class="c1"># In practice, this is (&#39;x&#39;, &#39;y&#39;) for all 2D Axes and (&#39;x&#39;, &#39;y&#39;, &#39;z&#39;)</span>
    <span class="c1"># for Axes3D.</span>
    <span class="n">_axis_names</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span>
    <span class="n">_shared_axes</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Grouper</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">_axis_names</span><span class="p">}</span>
    <span class="n">_twinned_axes</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">Grouper</span><span class="p">()</span>

    <span class="n">_subclass_uses_cla</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_axis_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A mapping of axis names, e.g. &#39;x&#39;, to `Axis` instances.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">axis&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">}</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">(</span><span class="si">{1[0]:g}</span><span class="s2">,</span><span class="si">{1[1]:g}</span><span class="s2">;</span><span class="si">{1[2]:g}</span><span class="s2">x</span><span class="si">{1[3]:g}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span>
                 <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                 <span class="n">facecolor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># defaults to rc axes.facecolor</span>
                 <span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">sharex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># use Axes instance&#39;s xaxis info</span>
                 <span class="n">sharey</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># use Axes instance&#39;s yaxis info</span>
                 <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">xscale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">yscale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">box_aspect</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">forward_navigation_events</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span>
                 <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build an Axes in a figure.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fig : `~matplotlib.figure.Figure`</span>
<span class="sd">            The Axes is built in the `.Figure` *fig*.</span>

<span class="sd">        *args</span>
<span class="sd">            ``*args`` can be a single ``(left, bottom, width, height)``</span>
<span class="sd">            rectangle or a single `.Bbox`.  This specifies the rectangle (in</span>
<span class="sd">            figure coordinates) where the Axes is positioned.</span>

<span class="sd">            ``*args`` can also consist of three numbers or a single three-digit</span>
<span class="sd">            number; in the latter case, the digits are considered as</span>
<span class="sd">            independent numbers.  The numbers are interpreted as ``(nrows,</span>
<span class="sd">            ncols, index)``: ``(nrows, ncols)`` specifies the size of an array</span>
<span class="sd">            of subplots, and ``index`` is the 1-based index of the subplot</span>
<span class="sd">            being created.  Finally, ``*args`` can also directly be a</span>
<span class="sd">            `.SubplotSpec` instance.</span>

<span class="sd">        sharex, sharey : `~matplotlib.axes.Axes`, optional</span>
<span class="sd">            The x- or y-`~.matplotlib.axis` is shared with the x- or y-axis in</span>
<span class="sd">            the input `~.axes.Axes`.  Note that it is not possible to unshare</span>
<span class="sd">            axes.</span>

<span class="sd">        frameon : bool, default: True</span>
<span class="sd">            Whether the Axes frame is visible.</span>

<span class="sd">        box_aspect : float, optional</span>
<span class="sd">            Set a fixed aspect for the Axes box, i.e. the ratio of height to</span>
<span class="sd">            width. See `~.axes.Axes.set_box_aspect` for details.</span>

<span class="sd">        forward_navigation_events : bool or &quot;auto&quot;, default: &quot;auto&quot;</span>
<span class="sd">            Control whether pan/zoom events are passed through to Axes below</span>
<span class="sd">            this one. &quot;auto&quot; is *True* for axes with an invisible patch and</span>
<span class="sd">            *False* otherwise.</span>

<span class="sd">        **kwargs</span>
<span class="sd">            Other optional keyword arguments:</span>

<span class="sd">            %(Axes:kwdoc)s</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        `~.axes.Axes`</span>
<span class="sd">            The new `~.axes.Axes` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;rect&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="s2">&quot;&#39;rect&#39; cannot be used together with positional arguments&quot;</span><span class="p">)</span>
            <span class="n">rect</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">)</span>
            <span class="n">_api</span><span class="o">.</span><span class="n">check_isinstance</span><span class="p">((</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">),</span> <span class="n">rect</span><span class="o">=</span><span class="n">rect</span><span class="p">)</span>
            <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">rect</span><span class="p">,)</span>
        <span class="n">subplotspec</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_originalPosition</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span>
            <span class="n">subplotspec</span> <span class="o">=</span> <span class="n">SubplotSpec</span><span class="o">.</span><span class="n">_from_subplot_args</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">width</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Width and height specified must be non-negative&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_originalPosition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aspect</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="s1">&#39;box&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_anchor</span> <span class="o">=</span> <span class="s1">&#39;C&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale_viewlims</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="kc">False</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_forward_navigation_events</span> <span class="o">=</span> <span class="n">forward_navigation_events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="o">=</span> <span class="n">sharex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="o">=</span> <span class="n">sharey</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
        <span class="c1"># The subplotspec needs to be set after the figure (so that</span>
        <span class="c1"># figure-level subplotpars are taken into account), but the figure</span>
        <span class="c1"># needs to be set after self._position is initialized.</span>
        <span class="k">if</span> <span class="n">subplotspec</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_subplotspec</span><span class="p">(</span><span class="n">subplotspec</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_subplotspec</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_box_aspect</span><span class="p">(</span><span class="n">box_aspect</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axes_locator</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Optionally set via update(kwargs).</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># placeholder for any colorbars added that use this Axes.</span>
        <span class="c1"># (see colorbar.py):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_colorbars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span> <span class="o">=</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spines</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gen_axes_spines</span><span class="p">())</span>

        <span class="c1"># this call may differ for non-sep axes, e.g., polar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_axis</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">facecolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">facecolor</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.facecolor&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_facecolor</span> <span class="o">=</span> <span class="n">facecolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span> <span class="o">=</span> <span class="n">frameon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_axisbelow</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.axisbelow&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="c1"># funcs used to format x and y - fall back on major formatters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_xdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fmt_ydata</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_navigate</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_navigate_mode</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xscale</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="n">xscale</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">yscale</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="n">yscale</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_internal_update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">_connect_picklable</span><span class="p">(</span>
                <span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unit_change_handler</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>

        <span class="n">rcParams</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
            <span class="n">top</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.top&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.top&#39;</span><span class="p">],</span>
            <span class="n">bottom</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.bottom&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.bottom&#39;</span><span class="p">],</span>
            <span class="n">labeltop</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labeltop&#39;</span><span class="p">]</span> <span class="ow">and</span>
                      <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.top&#39;</span><span class="p">]),</span>
            <span class="n">labelbottom</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labelbottom&#39;</span><span class="p">]</span> <span class="ow">and</span>
                         <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.bottom&#39;</span><span class="p">]),</span>
            <span class="n">left</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.left&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.left&#39;</span><span class="p">],</span>
            <span class="n">right</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.right&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.right&#39;</span><span class="p">],</span>
            <span class="n">labelleft</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelleft&#39;</span><span class="p">]</span> <span class="ow">and</span>
                       <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.left&#39;</span><span class="p">]),</span>
            <span class="n">labelright</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelright&#39;</span><span class="p">]</span> <span class="ow">and</span>
                        <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.right&#39;</span><span class="p">]),</span>
            <span class="n">which</span><span class="o">=</span><span class="s1">&#39;minor&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
            <span class="n">top</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.top&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.major.top&#39;</span><span class="p">],</span>
            <span class="n">bottom</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.bottom&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.major.bottom&#39;</span><span class="p">],</span>
            <span class="n">labeltop</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labeltop&#39;</span><span class="p">]</span> <span class="ow">and</span>
                      <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.major.top&#39;</span><span class="p">]),</span>
            <span class="n">labelbottom</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labelbottom&#39;</span><span class="p">]</span> <span class="ow">and</span>
                         <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.major.bottom&#39;</span><span class="p">]),</span>
            <span class="n">left</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.left&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.major.left&#39;</span><span class="p">],</span>
            <span class="n">right</span><span class="o">=</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.right&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.major.right&#39;</span><span class="p">],</span>
            <span class="n">labelleft</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelleft&#39;</span><span class="p">]</span> <span class="ow">and</span>
                       <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.major.left&#39;</span><span class="p">]),</span>
            <span class="n">labelright</span><span class="o">=</span><span class="p">(</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelright&#39;</span><span class="p">]</span> <span class="ow">and</span>
                        <span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.major.right&#39;</span><span class="p">]),</span>
            <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init_subclass__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">parent_uses_cla</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">_subclass_uses_cla</span>
        <span class="k">if</span> <span class="s1">&#39;cla&#39;</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="n">_api</span><span class="o">.</span><span class="n">warn_deprecated</span><span class="p">(</span>
                <span class="s1">&#39;3.6&#39;</span><span class="p">,</span>
                <span class="n">pending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Overriding `Axes.cla` in </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__qualname__</span><span class="si">}</span><span class="s1"> is &#39;</span>
                <span class="s1">&#39;pending deprecation in </span><span class="si">%(since)s</span><span class="s1"> and will be fully &#39;</span>
                <span class="s1">&#39;deprecated in favor of `Axes.clear` in the future. &#39;</span>
                <span class="s1">&#39;Please report &#39;</span>
                <span class="sa">f</span><span class="s1">&#39;this to the </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__module__</span><span class="si">!r}</span><span class="s1"> author.&#39;</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_subclass_uses_cla</span> <span class="o">=</span> <span class="s1">&#39;cla&#39;</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span> <span class="ow">or</span> <span class="n">parent_uses_cla</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init_subclass__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">state</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()</span>
        <span class="c1"># Prune the sharing &amp; twinning info to only contain the current group.</span>
        <span class="n">state</span><span class="p">[</span><span class="s2">&quot;_shared_axes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span> <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="n">name</span><span class="p">]}</span>
        <span class="n">state</span><span class="p">[</span><span class="s2">&quot;_twinned_axes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                                  <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">state</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="c1"># Merge the grouping info back into the global groupers.</span>
        <span class="n">shared_axes</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;_shared_axes&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">shared_siblings</span> <span class="ow">in</span> <span class="n">shared_axes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">shared_siblings</span><span class="p">)</span>
        <span class="n">twinned_siblings</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;_twinned_axes&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">twinned_siblings</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">twinned_siblings</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
            <span class="n">fields</span> <span class="o">+=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;label=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;get_title&quot;</span><span class="p">):</span>
            <span class="n">titles</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">]:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_title</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">k</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
                    <span class="n">titles</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">title</span>
            <span class="k">if</span> <span class="n">titles</span><span class="p">:</span>
                <span class="n">fields</span> <span class="o">+=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;title=</span><span class="si">{</span><span class="n">titles</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">axis</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span> <span class="ow">and</span> <span class="n">axis</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span><span class="o">.</span><span class="n">get_text</span><span class="p">():</span>
                <span class="n">fields</span> <span class="o">+=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">label=</span><span class="si">{</span><span class="n">axis</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: &quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span>

    <span class="k">def</span> <span class="nf">get_subplotspec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the `.SubplotSpec` associated with the subplot, or None.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subplotspec</span>

    <span class="k">def</span> <span class="nf">set_subplotspec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subplotspec</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the `.SubplotSpec`. associated with the subplot.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_subplotspec</span> <span class="o">=</span> <span class="n">subplotspec</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">subplotspec</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_gridspec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the `.GridSpec` associated with the subplot, or None.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subplotspec</span><span class="o">.</span><span class="n">get_gridspec</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subplotspec</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_window_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the Axes bounding box in display space.</span>

<span class="sd">        This bounding box does not include the spines, ticks, ticklabels,</span>
<span class="sd">        or other labels.  For a bounding box including these elements use</span>
<span class="sd">        `~matplotlib.axes.Axes.get_tightbbox`.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.get_tightbbox</span>
<span class="sd">        matplotlib.axis.Axis.get_tightbbox</span>
<span class="sd">        matplotlib.spines.Spine.get_window_extent</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span>

    <span class="k">def</span> <span class="nf">_init_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This is moved out of __init__ because non-separable axes don&#39;t use it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="o">=</span> <span class="n">maxis</span><span class="o">.</span><span class="n">XAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">bottom</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="o">=</span> <span class="n">maxis</span><span class="o">.</span><span class="n">YAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fig</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedBbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="p">,</span>
                                                <span class="n">fig</span><span class="o">.</span><span class="n">transSubfigure</span><span class="p">)</span>
        <span class="c1"># these will be updated later as data is added</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">null</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformWrapper</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_lim_and_transforms</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_unstale_viewLim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># We should arrange to store this information once per share-group</span>
        <span class="c1"># instead of on every axis.</span>
        <span class="n">need_scale</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">name</span><span class="p">:</span> <span class="nb">any</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">_stale_viewlims</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
                      <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">}</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">need_scale</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">need_scale</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">_stale_viewlims</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="sa">f</span><span class="s2">&quot;scale</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">scale</span>
                                   <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">scale</span> <span class="ow">in</span> <span class="n">need_scale</span><span class="o">.</span><span class="n">items</span><span class="p">()})</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">viewLim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unstale_viewLim</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span>

    <span class="k">def</span> <span class="nf">_request_autoscale_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mark a single axis, or all of them, as stale wrt. autoscaling.</span>

<span class="sd">        No computation is performed until the next autoscaling; thus, separate</span>
<span class="sd">        calls to control individual axises incur negligible performance cost.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axis : str, default: &quot;all&quot;</span>
<span class="sd">            Either an element of ``self._axis_names``, or &quot;all&quot;.</span>
<span class="sd">        tight : bool or None, default: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axis_names</span> <span class="o">=</span> <span class="n">_api</span><span class="o">.</span><span class="n">check_getitem</span><span class="p">(</span>
            <span class="p">{</span><span class="o">**</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">},</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">},</span>
            <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">axis_names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_stale_viewlims</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="n">tight</span>

    <span class="k">def</span> <span class="nf">_set_lim_and_transforms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the *_xaxis_transform*, *_yaxis_transform*, *transScale*,</span>
<span class="sd">        *transData*, *transLimits* and *transAxes* transformations.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This method is primarily used by rectilinear projections of the</span>
<span class="sd">            `~matplotlib.axes.Axes` class, and is meant to be overridden by</span>
<span class="sd">            new kinds of projection Axes that need different transformations</span>
<span class="sd">            and limits. (See `~matplotlib.projections.polar.PolarAxes` for an</span>
<span class="sd">            example.)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

        <span class="c1"># Transforms the x and y axis separately by a scale factor.</span>
        <span class="c1"># It is assumed that this part will have non-linear components</span>
        <span class="c1"># (e.g., for a log scale).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformWrapper</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span>

        <span class="c1"># An affine transformation on the data, generally to limit the</span>
        <span class="c1"># range of the axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transLimits</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformFrom</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedBbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span><span class="p">))</span>

        <span class="c1"># The parentheses are important for efficiency here -- they</span>
        <span class="c1"># group the last two (which are usually affines) separately</span>
        <span class="c1"># from the first (which, with log-scaling can be non-affine).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transData</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transLimits</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transformation used for drawing x-axis labels, ticks</span>
<span class="sd">        and gridlines.  The x-direction is in data coordinates and the</span>
<span class="sd">        y-direction is in axis coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            `~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        which : {&#39;grid&#39;, &#39;tick1&#39;, &#39;tick2&#39;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;grid&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick1&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is bottom spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">bottom</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick2&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is top spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">top</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;unknown value for which: </span><span class="si">{</span><span class="n">which</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_text1_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        transform : Transform</span>
<span class="sd">            The transform used for drawing x-axis labels, which will add</span>
<span class="sd">            *pad_points* of padding (in points) between the axis and the label.</span>
<span class="sd">            The x-direction is in data coordinates and the y-direction is in</span>
<span class="sd">            axis coordinates</span>
<span class="sd">        valign : {&#39;center&#39;, &#39;top&#39;, &#39;bottom&#39;, &#39;baseline&#39;, &#39;center_baseline&#39;}</span>
<span class="sd">            The text vertical alignment.</span>
<span class="sd">        halign : {&#39;center&#39;, &#39;left&#39;, &#39;right&#39;}</span>
<span class="sd">            The text horizontal alignment.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This transformation is primarily used by the `~matplotlib.axis.Axis`</span>
<span class="sd">        class, and is meant to be overridden by new kinds of projections that</span>
<span class="sd">        may need to place axis elements in different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;xtick.alignment&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick1&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">labels_align</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis_text2_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        transform : Transform</span>
<span class="sd">            The transform used for drawing secondary x-axis labels, which will</span>
<span class="sd">            add *pad_points* of padding (in points) between the axis and the</span>
<span class="sd">            label.  The x-direction is in data coordinates and the y-direction</span>
<span class="sd">            is in axis coordinates</span>
<span class="sd">        valign : {&#39;center&#39;, &#39;top&#39;, &#39;bottom&#39;, &#39;baseline&#39;, &#39;center_baseline&#39;}</span>
<span class="sd">            The text vertical alignment.</span>
<span class="sd">        halign : {&#39;center&#39;, &#39;left&#39;, &#39;right&#39;}</span>
<span class="sd">            The text horizontal alignment.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This transformation is primarily used by the `~matplotlib.axis.Axis`</span>
<span class="sd">        class, and is meant to be overridden by new kinds of projections that</span>
<span class="sd">        may need to place axis elements in different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;xtick.alignment&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick2&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="s2">&quot;bottom&quot;</span><span class="p">,</span> <span class="n">labels_align</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the transformation used for drawing y-axis labels, ticks</span>
<span class="sd">        and gridlines.  The x-direction is in axis coordinates and the</span>
<span class="sd">        y-direction is in data coordinates.</span>

<span class="sd">        .. note::</span>

<span class="sd">            This transformation is primarily used by the</span>
<span class="sd">            `~matplotlib.axis.Axis` class, and is meant to be</span>
<span class="sd">            overridden by new kinds of projections that may need to</span>
<span class="sd">            place axis elements in different locations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        which : {&#39;grid&#39;, &#39;tick1&#39;, &#39;tick2&#39;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;grid&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick1&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is bottom spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;tick2&#39;</span><span class="p">:</span>
            <span class="c1"># for cartesian projection, this is top spine</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">get_spine_transform</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;unknown value for which: </span><span class="si">{</span><span class="n">which</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_text1_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        transform : Transform</span>
<span class="sd">            The transform used for drawing y-axis labels, which will add</span>
<span class="sd">            *pad_points* of padding (in points) between the axis and the label.</span>
<span class="sd">            The x-direction is in axis coordinates and the y-direction is in</span>
<span class="sd">            data coordinates</span>
<span class="sd">        valign : {&#39;center&#39;, &#39;top&#39;, &#39;bottom&#39;, &#39;baseline&#39;, &#39;center_baseline&#39;}</span>
<span class="sd">            The text vertical alignment.</span>
<span class="sd">        halign : {&#39;center&#39;, &#39;left&#39;, &#39;right&#39;}</span>
<span class="sd">            The text horizontal alignment.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This transformation is primarily used by the `~matplotlib.axis.Axis`</span>
<span class="sd">        class, and is meant to be overridden by new kinds of projections that</span>
<span class="sd">        may need to place axis elements in different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;ytick.alignment&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick1&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">pad_points</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="n">labels_align</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaxis_text2_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad_points</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        transform : Transform</span>
<span class="sd">            The transform used for drawing secondart y-axis labels, which will</span>
<span class="sd">            add *pad_points* of padding (in points) between the axis and the</span>
<span class="sd">            label.  The x-direction is in axis coordinates and the y-direction</span>
<span class="sd">            is in data coordinates</span>
<span class="sd">        valign : {&#39;center&#39;, &#39;top&#39;, &#39;bottom&#39;, &#39;baseline&#39;, &#39;center_baseline&#39;}</span>
<span class="sd">            The text vertical alignment.</span>
<span class="sd">        halign : {&#39;center&#39;, &#39;left&#39;, &#39;right&#39;}</span>
<span class="sd">            The text horizontal alignment.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This transformation is primarily used by the `~matplotlib.axis.Axis`</span>
<span class="sd">        class, and is meant to be overridden by new kinds of projections that</span>
<span class="sd">        may need to place axis elements in different locations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels_align</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;ytick.alignment&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_transform</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tick2&#39;</span><span class="p">)</span> <span class="o">+</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span><span class="n">pad_points</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">),</span>
                <span class="n">labels_align</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_transScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the position of the Axes within the figure as a `.Bbox`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        original : bool</span>
<span class="sd">            If ``True``, return the original position. Otherwise, return the</span>
<span class="sd">            active position. For an explanation of the positions see</span>
<span class="sd">            `.set_position`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        `.Bbox`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">original</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_originalPosition</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">locator</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the Axes position.</span>

<span class="sd">        Axes have two position attributes. The &#39;original&#39; position is the</span>
<span class="sd">        position allocated for the Axes. The &#39;active&#39; position is the</span>
<span class="sd">        position the Axes is actually drawn at. These positions are usually</span>
<span class="sd">        the same unless a fixed aspect is set to the Axes. See</span>
<span class="sd">        `.Axes.set_aspect` for details.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pos : [left, bottom, width, height] or `~matplotlib.transforms.Bbox`</span>
<span class="sd">            The new position of the Axes in `.Figure` coordinates.</span>

<span class="sd">        which : {&#39;both&#39;, &#39;active&#39;, &#39;original&#39;}, default: &#39;both&#39;</span>
<span class="sd">            Determines which position variables to change.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.transforms.Bbox.from_bounds</span>
<span class="sd">        matplotlib.transforms.Bbox.from_extents</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">)</span>
        <span class="c1"># because this is being called externally to the library we</span>
        <span class="c1"># don&#39;t let it be in the layout.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_in_layout</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Private version of set_position.</span>

<span class="sd">        Call this internally to get the same functionality of `set_position`,</span>
<span class="sd">        but not to take the axis out of the constrained_layout hierarchy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxBase</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">from_bounds</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">_position</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="s1">&#39;original&#39;</span><span class="p">):</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">_originalPosition</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">reset_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the active position to the original position.</span>

<span class="sd">        This undoes changes to the active position (as defined in</span>
<span class="sd">        `.set_position`) which may have been performed to satisfy fixed-aspect</span>
<span class="sd">        constraints.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="n">original</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_axes_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locator</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the Axes locator.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        locator : Callable[[Axes, Renderer], Bbox]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axes_locator</span> <span class="o">=</span> <span class="n">locator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_axes_locator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the axes_locator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axes_locator</span>

    <span class="k">def</span> <span class="nf">_set_artist_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the boilerplate props for artists added to Axes.&quot;&quot;&quot;</span>
        <span class="n">a</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">is_transform_set</span><span class="p">():</span>
            <span class="n">a</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

        <span class="n">a</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">get_mouseover</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mouseover_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gen_axes_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Patch</span>
<span class="sd">            The patch used to draw the background of the Axes.  It is also used</span>
<span class="sd">            as the clipping path for any data elements on the Axes.</span>

<span class="sd">            In the standard Axes, this is a rectangle, but in other projections</span>
<span class="sd">            it may not be.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gen_axes_spines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">locations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;inches&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            Mapping of spine names to `.Line2D` or `.Patch` instances that are</span>
<span class="sd">            used to draw Axes spines.</span>

<span class="sd">            In the standard Axes, spines are single line segments, but in other</span>
<span class="sd">            projections they may not be.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">side</span><span class="p">:</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">]}</span>

    <span class="k">def</span> <span class="nf">sharex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Share the x-axis with *other*.</span>

<span class="sd">        This is equivalent to passing ``sharex=other`` when constructing the</span>
<span class="sd">        Axes, and cannot be used if the x-axis is already being shared with</span>
<span class="sd">        another Axes.  Note that it is not possible to unshare axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_isinstance</span><span class="p">(</span><span class="n">_AxesBase</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;x-axis is already shared&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="o">=</span> <span class="n">other</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">major</span>  <span class="c1"># Ticker instances holding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">minor</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">minor</span>  <span class="c1"># locator and formatter.</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">other</span><span class="o">.</span><span class="n">get_autoscalex_on</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_scale</span>

    <span class="k">def</span> <span class="nf">sharey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Share the y-axis with *other*.</span>

<span class="sd">        This is equivalent to passing ``sharey=other`` when constructing the</span>
<span class="sd">        Axes, and cannot be used if the y-axis is already being shared with</span>
<span class="sd">        another Axes.  Note that it is not possible to unshare axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_isinstance</span><span class="p">(</span><span class="n">_AxesBase</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;y-axis is already shared&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="o">=</span> <span class="n">other</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">major</span>  <span class="c1"># Ticker instances holding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minor</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minor</span>  <span class="c1"># locator and formatter.</span>
        <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">other</span><span class="o">.</span><span class="n">get_autoscaley_on</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_scale</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_scale</span>

    <span class="k">def</span> <span class="nf">__clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the Axes.&quot;&quot;&quot;</span>
        <span class="c1"># The actual implementation of clear() as long as clear() has to be</span>
        <span class="c1"># an adapter delegating to the correct implementation.</span>
        <span class="c1"># The implementation can move back into clear() when the</span>
        <span class="c1"># deprecation on cla() subclassing expires.</span>

        <span class="c1"># stash the current visibility state</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">):</span>
            <span class="n">patch_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">patch_visible</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">xaxis_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>
        <span class="n">yaxis_visible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># Also resets the scale to linear.</span>
        <span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">spine</span><span class="o">.</span><span class="n">_clear</span><span class="p">()</span>  <span class="c1"># Use _clear to not clear Axis again</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">CallbackRegistry</span><span class="p">(</span>
            <span class="n">signals</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;xlim_changed&quot;</span><span class="p">,</span> <span class="s2">&quot;ylim_changed&quot;</span><span class="p">,</span> <span class="s2">&quot;zlim_changed&quot;</span><span class="p">])</span>

        <span class="c1"># update the minor locator for x and y axis based on rcParams</span>
        <span class="k">if</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.minor.visible&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.minor.visible&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.xmargin&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.ymargin&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_use_sticky_edges</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_get_lines</span> <span class="o">=</span> <span class="n">_process_plot_var_args</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_patches_for_fill</span> <span class="o">=</span> <span class="n">_process_plot_var_args</span><span class="p">(</span><span class="s1">&#39;fill&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_gridOn</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid&#39;</span><span class="p">]</span>
        <span class="n">old_children</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">,</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">chld</span> <span class="ow">in</span> <span class="n">old_children</span><span class="p">:</span>
            <span class="n">chld</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">chld</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mouseover_set</span> <span class="o">=</span> <span class="n">_OrderedSet</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># strictly for pyplot via _sci, _gci</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_projection_init</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># strictly for pyplot.subplot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containers</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Disable grid on init to use rcParameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gridOn</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid.which&#39;</span><span class="p">],</span>
                  <span class="n">axis</span><span class="o">=</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid.axis&#39;</span><span class="p">])</span>
        <span class="n">props</span> <span class="o">=</span> <span class="n">font_manager</span><span class="o">.</span><span class="n">FontProperties</span><span class="p">(</span>
            <span class="n">size</span><span class="o">=</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titlesize&#39;</span><span class="p">],</span>
            <span class="n">weight</span><span class="o">=</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titleweight&#39;</span><span class="p">])</span>

        <span class="n">y</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titley&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autotitlepos</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_autotitlepos</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="p">,</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span> <span class="o">=</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fontproperties</span><span class="o">=</span><span class="n">props</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
            <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;baseline&#39;</span><span class="p">,</span>
            <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">title_offset_points</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titlepad&#39;</span><span class="p">]</span>
        <span class="c1"># refactor this out so it can be called in ax.set_title if</span>
        <span class="c1"># pad argument used...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_title_offset_trans</span><span class="p">(</span><span class="n">title_offset_points</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">_title</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">_title</span><span class="p">)</span>

        <span class="c1"># The patch draws the background of the Axes.  We want this to be below</span>
        <span class="c1"># the other artists.  We use the frame to draw the edges so we are</span>
        <span class="c1"># setting the edgecolor to None.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_axes_patch</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_facecolor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_on</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">xaxis_visible</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">patch_visible</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sharey</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">yaxis_visible</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">patch_visible</span><span class="p">)</span>

        <span class="c1"># This comes last, as the call to _set_lim may trigger an autoscale (in</span>
        <span class="c1"># case of shared axes), requiring children to be already set up.</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">share</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;_share</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">share</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;share</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)(</span><span class="n">share</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Although the scale was set to linear as part of clear,</span>
                <span class="c1"># polar requires that _set_scale is called again</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;polar&quot;</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="s2">&quot;linear&quot;</span><span class="p">)</span>
                <span class="n">axis</span><span class="o">.</span><span class="n">_set_lim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the Axes.&quot;&quot;&quot;</span>
        <span class="c1"># Act as an alias, or as the superclass implementation depending on the</span>
        <span class="c1"># subclass implementation.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclass_uses_cla</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">cla</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the Axes.&quot;&quot;&quot;</span>
        <span class="c1"># Act as an alias, or as the superclass implementation depending on the</span>
        <span class="c1"># subclass implementation.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subclass_uses_cla</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__clear</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">ArtistList</span><span class="p">(</span><span class="n">Sequence</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A sublist of Axes children based on their type.</span>

<span class="sd">        The type-specific children sublists were made immutable in Matplotlib</span>
<span class="sd">        3.7.  In the future these artist lists may be replaced by tuples. Use</span>
<span class="sd">        as if this is a tuple already.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">prop_name</span><span class="p">,</span>
                     <span class="n">valid_types</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">invalid_types</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            axes : `~matplotlib.axes.Axes`</span>
<span class="sd">                The Axes from which this sublist will pull the children</span>
<span class="sd">                Artists.</span>
<span class="sd">            prop_name : str</span>
<span class="sd">                The property name used to access this sublist from the Axes;</span>
<span class="sd">                used to generate deprecation warnings.</span>
<span class="sd">            valid_types : list of type, optional</span>
<span class="sd">                A list of types that determine which children will be returned</span>
<span class="sd">                by this sublist. If specified, then the Artists in the sublist</span>
<span class="sd">                must be instances of any of these types. If unspecified, then</span>
<span class="sd">                any type of Artist is valid (unless limited by</span>
<span class="sd">                *invalid_types*.)</span>
<span class="sd">            invalid_types : tuple, optional</span>
<span class="sd">                A list of types that determine which children will *not* be</span>
<span class="sd">                returned by this sublist. If specified, then Artists in the</span>
<span class="sd">                sublist will never be an instance of these types. Otherwise, no</span>
<span class="sd">                types will be excluded.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_axes</span> <span class="o">=</span> <span class="n">axes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prop_name</span> <span class="o">=</span> <span class="n">prop_name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_type_check</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">artist</span><span class="p">:</span> <span class="p">(</span>
                <span class="p">(</span><span class="ow">not</span> <span class="n">valid_types</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">valid_types</span><span class="p">))</span> <span class="ow">and</span>
                <span class="p">(</span><span class="ow">not</span> <span class="n">invalid_types</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">invalid_types</span><span class="p">))</span>
            <span class="p">)</span>

        <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&lt;Axes.ArtistList of </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_prop_name</span><span class="si">}</span><span class="s1">&gt;&#39;</span>

        <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_type_check</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>
                       <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axes</span><span class="o">.</span><span class="n">_children</span><span class="p">)</span>

        <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axes</span><span class="o">.</span><span class="n">_children</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_check</span><span class="p">(</span><span class="n">artist</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">artist</span>

        <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">artist</span>
                    <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axes</span><span class="o">.</span><span class="n">_children</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_check</span><span class="p">(</span><span class="n">artist</span><span class="p">)][</span><span class="n">key</span><span class="p">]</span>

        <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">_AxesBase</span><span class="o">.</span><span class="n">ArtistList</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">[</span><span class="o">*</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">other</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">_AxesBase</span><span class="o">.</span><span class="n">ArtistList</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">other</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

        <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">other</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">other</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">artists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ArtistList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;artists&#39;</span><span class="p">,</span> <span class="n">invalid_types</span><span class="o">=</span><span class="p">(</span>
            <span class="n">mcoll</span><span class="o">.</span><span class="n">Collection</span><span class="p">,</span> <span class="n">mimage</span><span class="o">.</span><span class="n">AxesImage</span><span class="p">,</span> <span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">,</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">,</span>
            <span class="n">mtable</span><span class="o">.</span><span class="n">Table</span><span class="p">,</span> <span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">collections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ArtistList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;collections&#39;</span><span class="p">,</span>
                               <span class="n">valid_types</span><span class="o">=</span><span class="n">mcoll</span><span class="o">.</span><span class="n">Collection</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ArtistList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="n">valid_types</span><span class="o">=</span><span class="n">mimage</span><span class="o">.</span><span class="n">AxesImage</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ArtistList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;lines&#39;</span><span class="p">,</span> <span class="n">valid_types</span><span class="o">=</span><span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">patches</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ArtistList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;patches&#39;</span><span class="p">,</span> <span class="n">valid_types</span><span class="o">=</span><span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ArtistList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;tables&#39;</span><span class="p">,</span> <span class="n">valid_types</span><span class="o">=</span><span class="n">mtable</span><span class="o">.</span><span class="n">Table</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">texts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ArtistList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;texts&#39;</span><span class="p">,</span> <span class="n">valid_types</span><span class="o">=</span><span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the facecolor of the Axes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">get_facecolor</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_facecolor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the facecolor of the Axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        color : :mpltype:`color`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_facecolor</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_title_offset_trans</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title_offset_points</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the offset for the title either from :rc:`axes.titlepad`</span>
<span class="sd">        or from set_title kwarg ``pad``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titleOffsetTrans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span>
                <span class="mf">0.0</span><span class="p">,</span> <span class="n">title_offset_points</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_title</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">):</span>
            <span class="n">_title</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">titleOffsetTrans</span><span class="p">)</span>
            <span class="n">_title</span><span class="o">.</span><span class="n">set_clip_box</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_prop_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the property cycle of the Axes.</span>

<span class="sd">        The property cycle controls the style properties such as color,</span>
<span class="sd">        marker and linestyle of future plot commands. The style properties</span>
<span class="sd">        of data already added to the Axes are not modified.</span>

<span class="sd">        Call signatures::</span>

<span class="sd">          set_prop_cycle(cycler)</span>
<span class="sd">          set_prop_cycle(label=values[, label2=values2[, ...]])</span>
<span class="sd">          set_prop_cycle(label, values)</span>

<span class="sd">        Form 1 sets given `~cycler.Cycler` object.</span>

<span class="sd">        Form 2 creates a `~cycler.Cycler` which cycles over one or more</span>
<span class="sd">        properties simultaneously and set it as the property cycle of the</span>
<span class="sd">        Axes. If multiple properties are given, their value lists must have</span>
<span class="sd">        the same length. This is just a shortcut for explicitly creating a</span>
<span class="sd">        cycler and passing it to the function, i.e. it&#39;s short for</span>
<span class="sd">        ``set_prop_cycle(cycler(label=values, label2=values2, ...))``.</span>

<span class="sd">        Form 3 creates a `~cycler.Cycler` for a single property and set it</span>
<span class="sd">        as the property cycle of the Axes. This form exists for compatibility</span>
<span class="sd">        with the original `cycler.cycler` interface. Its use is discouraged</span>
<span class="sd">        in favor of the kwarg form, i.e. ``set_prop_cycle(label=values)``.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cycler : `~cycler.Cycler`</span>
<span class="sd">            Set the given Cycler. *None* resets to the cycle defined by the</span>
<span class="sd">            current style.</span>

<span class="sd">            .. ACCEPTS: `~cycler.Cycler`</span>

<span class="sd">        label : str</span>
<span class="sd">            The property key. Must be a valid `.Artist` property.</span>
<span class="sd">            For example, &#39;color&#39; or &#39;linestyle&#39;. Aliases are allowed,</span>
<span class="sd">            such as &#39;c&#39; for &#39;color&#39; and &#39;lw&#39; for &#39;linewidth&#39;.</span>

<span class="sd">        values : iterable</span>
<span class="sd">            Finite-length iterable of the property values. These values</span>
<span class="sd">            are validated and will raise a ValueError if invalid.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.rcsetup.cycler</span>
<span class="sd">            Convenience function for creating validated cyclers for properties.</span>
<span class="sd">        cycler.cycler</span>
<span class="sd">            The original function for creating unvalidated cyclers.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Setting the property cycle for a single property:</span>

<span class="sd">        &gt;&gt;&gt; ax.set_prop_cycle(color=[&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;])</span>

<span class="sd">        Setting the property cycle for simultaneously cycling over multiple</span>
<span class="sd">        properties (e.g. red circle, green plus, blue cross):</span>

<span class="sd">        &gt;&gt;&gt; ax.set_prop_cycle(color=[&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;],</span>
<span class="sd">        ...                   marker=[&#39;o&#39;, &#39;+&#39;, &#39;x&#39;])</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot supply both positional and keyword &quot;</span>
                            <span class="s2">&quot;arguments to this method.&quot;</span><span class="p">)</span>
        <span class="c1"># Can&#39;t do `args == (None,)` as that crashes cycler.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prop_cycle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prop_cycle</span> <span class="o">=</span> <span class="n">cycler</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_lines</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="n">prop_cycle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_patches_for_fill</span><span class="o">.</span><span class="n">set_prop_cycle</span><span class="p">(</span><span class="n">prop_cycle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the aspect ratio of the Axes scaling.</span>

<span class="sd">        This is either &quot;auto&quot; or a float giving the ratio of y/x-scale.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aspect</span>

    <span class="k">def</span> <span class="nf">set_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the aspect ratio of the Axes scaling, i.e. y/x-scale.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        aspect : {&#39;auto&#39;, &#39;equal&#39;} or float</span>
<span class="sd">            Possible values:</span>

<span class="sd">            - &#39;auto&#39;: fill the position rectangle with data.</span>
<span class="sd">            - &#39;equal&#39;: same as ``aspect=1``, i.e. same scaling for x and y.</span>
<span class="sd">            - *float*: The displayed size of 1 unit in y-data coordinates will</span>
<span class="sd">              be *aspect* times the displayed size of 1 unit in x-data</span>
<span class="sd">              coordinates; e.g. for ``aspect=2`` a square in data coordinates</span>
<span class="sd">              will be rendered with a height of twice its width.</span>

<span class="sd">        adjustable : None or {&#39;box&#39;, &#39;datalim&#39;}, optional</span>
<span class="sd">            If not ``None``, this defines which parameter will be adjusted to</span>
<span class="sd">            meet the required aspect. See `.set_adjustable` for further</span>
<span class="sd">            details.</span>

<span class="sd">        anchor : None or str or (float, float), optional</span>
<span class="sd">            If not ``None``, this defines where the Axes will be drawn if there</span>
<span class="sd">            is extra space due to aspect constraints. The most common way</span>
<span class="sd">            to specify the anchor are abbreviations of cardinal directions:</span>

<span class="sd">            =====   =====================</span>
<span class="sd">            value   description</span>
<span class="sd">            =====   =====================</span>
<span class="sd">            &#39;C&#39;     centered</span>
<span class="sd">            &#39;SW&#39;    lower left corner</span>
<span class="sd">            &#39;S&#39;     middle of bottom edge</span>
<span class="sd">            &#39;SE&#39;    lower right corner</span>
<span class="sd">            etc.</span>
<span class="sd">            =====   =====================</span>

<span class="sd">            See `~.Axes.set_anchor` for further details.</span>

<span class="sd">        share : bool, default: False</span>
<span class="sd">            If ``True``, apply the settings to all shared Axes.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_adjustable</span>
<span class="sd">            Set how the Axes adjusts to achieve the required aspect ratio.</span>
<span class="sd">        matplotlib.axes.Axes.set_anchor</span>
<span class="sd">            Set the position in case of extra space.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cbook</span><span class="o">.</span><span class="n">_str_equal</span><span class="p">(</span><span class="n">aspect</span><span class="p">,</span> <span class="s1">&#39;equal&#39;</span><span class="p">):</span>
            <span class="n">aspect</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">cbook</span><span class="o">.</span><span class="n">_str_equal</span><span class="p">(</span><span class="n">aspect</span><span class="p">,</span> <span class="s1">&#39;auto&#39;</span><span class="p">):</span>
            <span class="n">aspect</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">aspect</span><span class="p">)</span>  <span class="c1"># raise ValueError if necessary</span>
            <span class="k">if</span> <span class="n">aspect</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">aspect</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;aspect must be finite and positive &quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">share</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">{</span><span class="n">sibling</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span>
                    <span class="k">for</span> <span class="n">sibling</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_aspect</span> <span class="o">=</span> <span class="n">aspect</span>

        <span class="k">if</span> <span class="n">adjustable</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">adjustable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="n">adjustable</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="n">share</span><span class="p">)</span>  <span class="c1"># Handle sharing.</span>

        <span class="k">if</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_anchor</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="n">share</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_adjustable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether the Axes will adjust its physical dimension (&#39;box&#39;) or</span>
<span class="sd">        its data limits (&#39;datalim&#39;) to achieve the desired aspect ratio.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_adjustable</span>
<span class="sd">            Set how the Axes adjusts to achieve the required aspect ratio.</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            For a description of aspect handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span>

    <span class="k">def</span> <span class="nf">set_adjustable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">adjustable</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set how the Axes adjusts to achieve the required aspect ratio.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        adjustable : {&#39;box&#39;, &#39;datalim&#39;}</span>
<span class="sd">            If &#39;box&#39;, change the physical dimensions of the Axes.</span>
<span class="sd">            If &#39;datalim&#39;, change the ``x`` or ``y`` data limits.</span>

<span class="sd">        share : bool, default: False</span>
<span class="sd">            If ``True``, apply the settings to all shared Axes.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            For a description of aspect handling.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Shared Axes (of which twinned Axes are a special case)</span>
<span class="sd">        impose restrictions on how aspect ratios can be imposed.</span>
<span class="sd">        For twinned Axes, use &#39;datalim&#39;.  For Axes that share both</span>
<span class="sd">        x and y, use &#39;box&#39;.  Otherwise, either &#39;datalim&#39; or &#39;box&#39;</span>
<span class="sd">        may be used.  These limitations are partly a requirement</span>
<span class="sd">        to avoid over-specification, and partly a result of the</span>
<span class="sd">        particular implementation we are currently using, in</span>
<span class="sd">        which the adjustments for aspect ratios are done sequentially</span>
<span class="sd">        and independently on each Axes as it is drawn.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_in_list</span><span class="p">([</span><span class="s2">&quot;box&quot;</span><span class="p">,</span> <span class="s2">&quot;datalim&quot;</span><span class="p">],</span> <span class="n">adjustable</span><span class="o">=</span><span class="n">adjustable</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">share</span><span class="p">:</span>
            <span class="n">axs</span> <span class="o">=</span> <span class="p">{</span><span class="n">sibling</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span>
                   <span class="k">for</span> <span class="n">sibling</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axs</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">adjustable</span> <span class="o">==</span> <span class="s2">&quot;datalim&quot;</span>
                <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_data_ratio</span><span class="p">,</span> <span class="s2">&quot;__func__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                        <span class="o">!=</span> <span class="n">_AxesBase</span><span class="o">.</span><span class="n">get_data_ratio</span>
                        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">)):</span>
            <span class="c1"># Limits adjustment by apply_aspect assumes that the axes&#39; aspect</span>
            <span class="c1"># ratio can be computed from the data limits and scales.</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot set Axes adjustable to &#39;datalim&#39; for &quot;</span>
                             <span class="s2">&quot;Axes which override &#39;get_data_ratio&#39;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">=</span> <span class="n">adjustable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_box_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the Axes box aspect, i.e. the ratio of height to width.</span>

<span class="sd">        The box aspect is ``None`` (i.e. chosen depending on the available</span>
<span class="sd">        figure space) unless explicitly specified.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_box_aspect</span>
<span class="sd">            for a description of box aspect.</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_aspect</span>

    <span class="k">def</span> <span class="nf">set_box_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the Axes box aspect, i.e. the ratio of height to width.</span>

<span class="sd">        This defines the aspect of the Axes in figure space and is not to be</span>
<span class="sd">        confused with the data aspect (see `~.Axes.set_aspect`).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        aspect : float or None</span>
<span class="sd">            Changes the physical dimensions of the Axes, such that the ratio</span>
<span class="sd">            of the Axes height to the Axes width in physical units is equal to</span>
<span class="sd">            *aspect*. Defining a box aspect will change the *adjustable*</span>
<span class="sd">            property to &#39;datalim&#39; (see `~.Axes.set_adjustable`).</span>

<span class="sd">            *None* will disable a fixed box aspect so that height and width</span>
<span class="sd">            of the Axes are chosen independently.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axs</span> <span class="o">=</span> <span class="p">{</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
               <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)}</span>

        <span class="k">if</span> <span class="n">aspect</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">aspect</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">aspect</span><span class="p">)</span>
            <span class="c1"># when box_aspect is set to other than ´None`,</span>
            <span class="c1"># adjustable must be &quot;datalim&quot;</span>
            <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="s2">&quot;datalim&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_box_aspect</span> <span class="o">=</span> <span class="n">aspect</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the anchor location.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_anchor</span>
<span class="sd">            for a description of the anchor.</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anchor</span>

    <span class="k">def</span> <span class="nf">set_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">,</span> <span class="n">share</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Define the anchor location.</span>

<span class="sd">        The actual drawing area (active position) of the Axes may be smaller</span>
<span class="sd">        than the Bbox (original position) when a fixed aspect is required. The</span>
<span class="sd">        anchor defines where the drawing area will be located within the</span>
<span class="sd">        available space.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        anchor : (float, float) or {&#39;C&#39;, &#39;SW&#39;, &#39;S&#39;, &#39;SE&#39;, &#39;E&#39;, &#39;NE&#39;, ...}</span>
<span class="sd">            Either an (*x*, *y*) pair of relative coordinates (0 is left or</span>
<span class="sd">            bottom, 1 is right or top), &#39;C&#39; (center), or a cardinal direction</span>
<span class="sd">            (&#39;SW&#39;, southwest, is bottom left, etc.).  str inputs are shorthands</span>
<span class="sd">            for (*x*, *y*) coordinates, as shown in the following diagram::</span>

<span class="sd">               ┌─────────────────┬─────────────────┬─────────────────┐</span>
<span class="sd">               │ &#39;NW&#39; (0.0, 1.0) │ &#39;N&#39; (0.5, 1.0)  │ &#39;NE&#39; (1.0, 1.0) │</span>
<span class="sd">               ├─────────────────┼─────────────────┼─────────────────┤</span>
<span class="sd">               │ &#39;W&#39;  (0.0, 0.5) │ &#39;C&#39; (0.5, 0.5)  │ &#39;E&#39;  (1.0, 0.5) │</span>
<span class="sd">               ├─────────────────┼─────────────────┼─────────────────┤</span>
<span class="sd">               │ &#39;SW&#39; (0.0, 0.0) │ &#39;S&#39; (0.5, 0.0)  │ &#39;SE&#39; (1.0, 0.0) │</span>
<span class="sd">               └─────────────────┴─────────────────┴─────────────────┘</span>

<span class="sd">        share : bool, default: False</span>
<span class="sd">            If ``True``, apply the settings to all shared Axes.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            for a description of aspect handling.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">anchor</span> <span class="ow">in</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">coefs</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">anchor</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;argument must be among </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                             <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">coefs</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">share</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">{</span><span class="n">sibling</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span>
                    <span class="k">for</span> <span class="n">sibling</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">_anchor</span> <span class="o">=</span> <span class="n">anchor</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_data_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the aspect ratio of the scaled data.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This method is intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">txmin</span><span class="p">,</span> <span class="n">txmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">())</span>
        <span class="n">tymin</span><span class="p">,</span> <span class="n">tymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">())</span>
        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">txmax</span> <span class="o">-</span> <span class="n">txmin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">tymax</span> <span class="o">-</span> <span class="n">tymin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">xsize</span>

    <span class="k">def</span> <span class="nf">apply_aspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adjust the Axes for a specified data aspect ratio.</span>

<span class="sd">        Depending on `.get_adjustable` this will modify either the</span>
<span class="sd">        Axes box (position) or the view limits. In the former case,</span>
<span class="sd">        `~matplotlib.axes.Axes.get_anchor` will affect the position.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        position : None or .Bbox</span>

<span class="sd">            .. note::</span>
<span class="sd">                This parameter exists for historic reasons and is considered</span>
<span class="sd">                internal. End users should not use it.</span>

<span class="sd">            If not ``None``, this defines the position of the</span>
<span class="sd">            Axes within the figure as a Bbox. See `~.Axes.get_position`</span>
<span class="sd">            for further details.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This is called automatically when each Axes is drawn.  You may need</span>
<span class="sd">        to call it yourself if you need to update the Axes position and/or</span>
<span class="sd">        view limits before the Figure is drawn.</span>

<span class="sd">        An alternative with a broader scope is `.Figure.draw_without_rendering`,</span>
<span class="sd">        which updates all stale components of a figure, not only the positioning /</span>
<span class="sd">        view limits of a single Axes.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_aspect</span>
<span class="sd">            For a description of aspect ratio handling.</span>
<span class="sd">        matplotlib.axes.Axes.set_adjustable</span>
<span class="sd">            Set how the Axes adjusts to achieve the required aspect ratio.</span>
<span class="sd">        matplotlib.axes.Axes.set_anchor</span>
<span class="sd">            Set the position in case of extra space.</span>
<span class="sd">        matplotlib.figure.Figure.draw_without_rendering</span>
<span class="sd">            Update all stale components of a figure.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        A typical usage example would be the following. `~.Axes.imshow` sets the</span>
<span class="sd">        aspect to 1, but adapting the Axes position and extent to reflect this is</span>
<span class="sd">        deferred until rendering for performance reasons. If you want to know the</span>
<span class="sd">        Axes size before, you need to call `.apply_aspect` to get the correct</span>
<span class="sd">        values.</span>

<span class="sd">        &gt;&gt;&gt; fig, ax = plt.subplots()</span>
<span class="sd">        &gt;&gt;&gt; ax.imshow(np.zeros((3, 3)))</span>
<span class="sd">        &gt;&gt;&gt; ax.bbox.width, ax.bbox.height</span>
<span class="sd">        (496.0, 369.59999999999997)</span>
<span class="sd">        &gt;&gt;&gt; ax.apply_aspect()</span>
<span class="sd">        &gt;&gt;&gt; ax.bbox.width, ax.bbox.height</span>
<span class="sd">        (369.59999999999997, 369.59999999999997)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="n">original</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">aspect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_aspect</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">aspect</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_aspect</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">transSubfigure</span>
        <span class="n">bb</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">()</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">trans</span><span class="p">)</span>
        <span class="c1"># this is the physical aspect of the panel (or figure):</span>
        <span class="n">fig_aspect</span> <span class="o">=</span> <span class="n">bb</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="n">bb</span><span class="o">.</span><span class="n">width</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjustable</span> <span class="o">==</span> <span class="s1">&#39;box&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Adjustable &#39;box&#39; is not allowed in a &quot;</span>
                                   <span class="s2">&quot;twinned Axes; use &#39;datalim&#39; instead&quot;</span><span class="p">)</span>
            <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">aspect</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_ratio</span><span class="p">()</span>
            <span class="n">pb</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
            <span class="n">pb1</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">shrunk_to_aspect</span><span class="p">(</span><span class="n">box_aspect</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">fig_aspect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">pb1</span><span class="o">.</span><span class="n">anchored</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_anchor</span><span class="p">(),</span> <span class="n">pb</span><span class="p">),</span> <span class="s1">&#39;active&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># The following is only seen if self._adjustable == &#39;datalim&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_aspect</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pb</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">frozen</span><span class="p">()</span>
            <span class="n">pb1</span> <span class="o">=</span> <span class="n">pb</span><span class="o">.</span><span class="n">shrunk_to_aspect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_box_aspect</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">fig_aspect</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">pb1</span><span class="o">.</span><span class="n">anchored</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_anchor</span><span class="p">(),</span> <span class="n">pb</span><span class="p">),</span> <span class="s1">&#39;active&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">aspect</span> <span class="o">==</span> <span class="s2">&quot;auto&quot;</span><span class="p">:</span>
                <span class="k">return</span>

        <span class="c1"># reset active to original in case it had been changed by prior use</span>
        <span class="c1"># of &#39;box&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_box_aspect</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_position</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;active&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="n">pb1</span><span class="o">.</span><span class="n">anchored</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_anchor</span><span class="p">(),</span> <span class="n">pb</span><span class="p">)</span>

        <span class="n">x_trf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
        <span class="n">y_trf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">x_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">())</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">y_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">())</span>
        <span class="n">xsize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>
        <span class="n">ysize</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span><span class="p">),</span> <span class="mf">1e-30</span><span class="p">)</span>

        <span class="n">box_aspect</span> <span class="o">=</span> <span class="n">fig_aspect</span> <span class="o">*</span> <span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="n">position</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
        <span class="n">data_ratio</span> <span class="o">=</span> <span class="n">box_aspect</span> <span class="o">/</span> <span class="n">aspect</span>

        <span class="n">y_expander</span> <span class="o">=</span> <span class="n">data_ratio</span> <span class="o">*</span> <span class="n">xsize</span> <span class="o">/</span> <span class="n">ysize</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="c1"># If y_expander &gt; 0, the dy/dx viewLim ratio needs to increase</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y_expander</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.005</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">dL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">intervalx</span><span class="p">)</span>
        <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">dL</span><span class="o">.</span><span class="n">intervaly</span><span class="p">)</span>
        <span class="n">xr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span>
        <span class="n">yr</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span>

        <span class="n">xmarg</span> <span class="o">=</span> <span class="n">xsize</span> <span class="o">-</span> <span class="n">xr</span>
        <span class="n">ymarg</span> <span class="o">=</span> <span class="n">ysize</span> <span class="o">-</span> <span class="n">yr</span>
        <span class="n">Ysize</span> <span class="o">=</span> <span class="n">data_ratio</span> <span class="o">*</span> <span class="n">xsize</span>
        <span class="n">Xsize</span> <span class="o">=</span> <span class="n">ysize</span> <span class="o">/</span> <span class="n">data_ratio</span>
        <span class="n">Xmarg</span> <span class="o">=</span> <span class="n">Xsize</span> <span class="o">-</span> <span class="n">xr</span>
        <span class="n">Ymarg</span> <span class="o">=</span> <span class="n">Ysize</span> <span class="o">-</span> <span class="n">yr</span>
        <span class="c1"># Setting these targets to, e.g., 0.05*xr does not seem to help.</span>
        <span class="n">xm</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ym</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">shared_x</span> <span class="o">=</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>
        <span class="n">shared_y</span> <span class="o">=</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">shared_x</span> <span class="ow">and</span> <span class="n">shared_y</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;set_aspect(..., adjustable=&#39;datalim&#39;) or &quot;</span>
                               <span class="s2">&quot;axis(&#39;equal&#39;) are not allowed when both axes &quot;</span>
                               <span class="s2">&quot;are shared.  Try set_aspect(..., &quot;</span>
                               <span class="s2">&quot;adjustable=&#39;box&#39;).&quot;</span><span class="p">)</span>

        <span class="c1"># If y is shared, then we are only allowed to change x, etc.</span>
        <span class="k">if</span> <span class="n">shared_y</span><span class="p">:</span>
            <span class="n">adjust_y</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">xmarg</span> <span class="o">&gt;</span> <span class="n">xm</span> <span class="ow">and</span> <span class="n">ymarg</span> <span class="o">&gt;</span> <span class="n">ym</span><span class="p">:</span>
                <span class="n">adjy</span> <span class="o">=</span> <span class="p">((</span><span class="n">Ymarg</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y_expander</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="p">(</span><span class="n">Xmarg</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y_expander</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">adjy</span> <span class="o">=</span> <span class="n">y_expander</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="n">adjust_y</span> <span class="o">=</span> <span class="n">shared_x</span> <span class="ow">or</span> <span class="n">adjy</span>  <span class="c1"># (Ymarg &gt; xmarg)</span>

        <span class="k">if</span> <span class="n">adjust_y</span><span class="p">:</span>
            <span class="n">yc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">ymin</span> <span class="o">+</span> <span class="n">ymax</span><span class="p">)</span>
            <span class="n">y0</span> <span class="o">=</span> <span class="n">yc</span> <span class="o">-</span> <span class="n">Ysize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">yc</span> <span class="o">+</span> <span class="n">Ysize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">(</span><span class="n">y_trf</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xc</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">xmin</span> <span class="o">+</span> <span class="n">xmax</span><span class="p">)</span>
            <span class="n">x0</span> <span class="o">=</span> <span class="n">xc</span> <span class="o">-</span> <span class="n">Xsize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">xc</span> <span class="o">+</span> <span class="n">Xsize</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">(</span><span class="n">x_trf</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience method to get or set some axis properties.</span>

<span class="sd">        Call signatures::</span>

<span class="sd">          xmin, xmax, ymin, ymax = axis()</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis([xmin, xmax, ymin, ymax])</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis(option)</span>
<span class="sd">          xmin, xmax, ymin, ymax = axis(**kwargs)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xmin, xmax, ymin, ymax : float, optional</span>
<span class="sd">            The axis limits to be set.  This can also be achieved using ::</span>

<span class="sd">                ax.set(xlim=(xmin, xmax), ylim=(ymin, ymax))</span>

<span class="sd">        option : bool or str</span>
<span class="sd">            If a bool, turns axis lines and labels on or off. If a string,</span>
<span class="sd">            possible values are:</span>

<span class="sd">            ================ ===========================================================</span>
<span class="sd">            Value            Description</span>
<span class="sd">            ================ ===========================================================</span>
<span class="sd">            &#39;off&#39; or `False` Hide all axis decorations, i.e. axis labels, spines,</span>
<span class="sd">                             tick marks, tick labels, and grid lines.</span>
<span class="sd">                             This is the same as `~.Axes.set_axis_off()`.</span>
<span class="sd">            &#39;on&#39; or `True`   Do not hide all axis decorations, i.e. axis labels, spines,</span>
<span class="sd">                             tick marks, tick labels, and grid lines.</span>
<span class="sd">                             This is the same as `~.Axes.set_axis_on()`.</span>
<span class="sd">            &#39;equal&#39;          Set equal scaling (i.e., make circles circular) by</span>
<span class="sd">                             changing the axis limits. This is the same as</span>
<span class="sd">                             ``ax.set_aspect(&#39;equal&#39;, adjustable=&#39;datalim&#39;)``.</span>
<span class="sd">                             Explicit data limits may not be respected in this case.</span>
<span class="sd">            &#39;scaled&#39;         Set equal scaling (i.e., make circles circular) by</span>
<span class="sd">                             changing dimensions of the plot box. This is the same as</span>
<span class="sd">                             ``ax.set_aspect(&#39;equal&#39;, adjustable=&#39;box&#39;, anchor=&#39;C&#39;)``.</span>
<span class="sd">                             Additionally, further autoscaling will be disabled.</span>
<span class="sd">            &#39;tight&#39;          Set limits just large enough to show all data, then</span>
<span class="sd">                             disable further autoscaling.</span>
<span class="sd">            &#39;auto&#39;           Automatic scaling (fill plot box with data).</span>
<span class="sd">            &#39;image&#39;          &#39;scaled&#39; with axis limits equal to data limits.</span>
<span class="sd">            &#39;square&#39;         Square plot; similar to &#39;scaled&#39;, but initially forcing</span>
<span class="sd">                             ``xmax-xmin == ymax-ymin``.</span>
<span class="sd">            ================ ===========================================================</span>

<span class="sd">        emit : bool, default: True</span>
<span class="sd">            Whether observers are notified of the axis limit change.</span>
<span class="sd">            This option is passed on to `~.Axes.set_xlim` and</span>
<span class="sd">            `~.Axes.set_ylim`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xmin, xmax, ymin, ymax : float</span>
<span class="sd">            The axis limits.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_xlim</span>
<span class="sd">        matplotlib.axes.Axes.set_ylim</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        For 3D Axes, this method additionally takes *zmin*, *zmax* as</span>
<span class="sd">        parameters and likewise returns them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;on&#39;</span>
            <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;off&#39;</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">arg</span> <span class="o">==</span> <span class="s1">&#39;on&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_on</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">arg</span> <span class="o">==</span> <span class="s1">&#39;off&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">arg</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="s1">&#39;tight&#39;</span><span class="p">,</span> <span class="s1">&#39;scaled&#39;</span><span class="p">,</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="s1">&#39;square&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">arg</span> <span class="o">==</span> <span class="s1">&#39;equal&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;datalim&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">arg</span> <span class="o">==</span> <span class="s1">&#39;scaled&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Req. by Mark Bakker</span>
                <span class="k">elif</span> <span class="n">arg</span> <span class="o">==</span> <span class="s1">&#39;tight&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">arg</span> <span class="o">==</span> <span class="s1">&#39;image&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">arg</span> <span class="o">==</span> <span class="s1">&#39;square&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscale_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">xlim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
                    <span class="n">ylim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
                    <span class="n">edge_size</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">xlim</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">ylim</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">edge_size</span><span class="p">],</span>
                                  <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ylim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">edge_size</span><span class="p">],</span>
                                  <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unrecognized string </span><span class="si">{</span><span class="n">arg</span><span class="si">!r}</span><span class="s2"> to axis; &quot;</span>
                                 <span class="s2">&quot;try &#39;on&#39; or &#39;off&#39;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                        <span class="s2">&quot;The first argument to axis() must be an iterable of the form &quot;</span>
                        <span class="s2">&quot;[</span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">min, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">max&quot;</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">)))</span>
                <span class="n">limits</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">name</span><span class="p">:</span> <span class="n">arg</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">limits</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">:</span>
                    <span class="n">ax_min</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">min&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="n">ax_max</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">max&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="n">limits</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">ax_min</span><span class="p">,</span> <span class="n">ax_max</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="p">(</span><span class="n">ax_min</span><span class="p">,</span> <span class="n">ax_max</span><span class="p">)</span> <span class="ow">in</span> <span class="n">limits</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">ax_auto</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span>  <span class="c1"># Keep autoscale state as is.</span>
                           <span class="k">if</span> <span class="n">ax_min</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ax_max</span> <span class="ow">is</span> <span class="kc">None</span>
                           <span class="k">else</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># Turn off autoscale.</span>
                <span class="n">set_ax_lim</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;set_</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">lim&#39;</span><span class="p">)</span>
                <span class="n">set_ax_lim</span><span class="p">(</span><span class="n">ax_min</span><span class="p">,</span> <span class="n">ax_max</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">ax_auto</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">_api</span><span class="o">.</span><span class="n">kwarg_error</span><span class="p">(</span><span class="s2">&quot;axis&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="n">lims</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">:</span>
            <span class="n">get_ax_lim</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;get_</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">lim&#39;</span><span class="p">)</span>
            <span class="n">lims</span> <span class="o">+=</span> <span class="n">get_ax_lim</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">lims</span>

    <span class="k">def</span> <span class="nf">get_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the `.Legend` instance, or None if no legend is defined.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span>

    <span class="k">def</span> <span class="nf">get_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Return a list of `.AxesImage`\s contained by the Axes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;AxesImage&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of lines contained by the Axes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">silent_list</span><span class="p">(</span><span class="s1">&#39;Line2D&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        [*Discouraged*] Return the XAxis instance.</span>

<span class="sd">        .. admonition:: Discouraged</span>

<span class="sd">            The use of this function is discouraged. You should instead</span>
<span class="sd">            directly access the attribute ``ax.xaxis``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span>

    <span class="k">def</span> <span class="nf">get_yaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        [*Discouraged*] Return the YAxis instance.</span>

<span class="sd">        .. admonition:: Discouraged</span>

<span class="sd">            The use of this function is discouraged. You should instead</span>
<span class="sd">            directly access the attribute ``ax.yaxis``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span>

    <span class="n">get_xgridlines</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_gridlines&quot;</span><span class="p">)</span>
    <span class="n">get_xticklines</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklines&quot;</span><span class="p">)</span>
    <span class="n">get_ygridlines</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_gridlines&quot;</span><span class="p">)</span>
    <span class="n">get_yticklines</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklines&quot;</span><span class="p">)</span>

    <span class="c1"># Adding and tracking artists</span>

    <span class="k">def</span> <span class="nf">_sci</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">im</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the current image.</span>

<span class="sd">        This image will be the target of colormap functions like</span>
<span class="sd">        ``pyplot.viridis``, and other functions such as `~.pyplot.clim`.  The</span>
<span class="sd">        current image is an attribute of the current Axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_isinstance</span><span class="p">((</span><span class="n">mcoll</span><span class="o">.</span><span class="n">Collection</span><span class="p">,</span> <span class="n">mimage</span><span class="o">.</span><span class="n">AxesImage</span><span class="p">),</span> <span class="n">im</span><span class="o">=</span><span class="n">im</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">im</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Argument must be an image or collection in this Axes&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span> <span class="o">=</span> <span class="n">im</span>

    <span class="k">def</span> <span class="nf">_gci</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper for `~matplotlib.pyplot.gci`; do not use elsewhere.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_image</span>

    <span class="k">def</span> <span class="nf">has_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether any artists have been added to the Axes.</span>

<span class="sd">        This should not be used to determine whether the *dataLim*</span>
<span class="sd">        need to be updated, and may not actually be useful for</span>
<span class="sd">        anything.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="n">mcoll</span><span class="o">.</span><span class="n">Collection</span><span class="p">,</span> <span class="n">mimage</span><span class="o">.</span><span class="n">AxesImage</span><span class="p">,</span>
                                  <span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">,</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">))</span>
                   <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_artist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an `.Artist` to the Axes; return the artist.</span>

<span class="sd">        Use `add_artist` only for artists for which there is no dedicated</span>
<span class="sd">        &quot;add&quot; method; and if necessary, use a method such as `update_datalim`</span>
<span class="sd">        to manually update the dataLim if the artist is to be included in</span>
<span class="sd">        autoscaling.</span>

<span class="sd">        If no ``transform`` has been specified when creating the artist (e.g.</span>
<span class="sd">        ``artist.get_transform() == None``) then the transform is set to</span>
<span class="sd">        ``ax.transData``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">a</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">a</span>

    <span class="k">def</span> <span class="nf">add_child_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an `.AxesBase` to the Axes&#39; children; return the child Axes.</span>

<span class="sd">        This is the lowlevel version.  See `.axes.Axes.inset_axes`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># normally Axes have themselves as the Axes, but these need to have</span>
        <span class="c1"># their parent...</span>
        <span class="c1"># Need to bypass the getter...</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">_axes</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">stale_callback</span> <span class="o">=</span> <span class="n">martist</span><span class="o">.</span><span class="n">_stale_axes_callback</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">_remove_axes</span><span class="p">,</span> <span class="n">owners</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">ax</span>

    <span class="k">def</span> <span class="nf">add_collection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">autolim</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `.Collection` to the Axes; return the collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_isinstance</span><span class="p">(</span><span class="n">mcoll</span><span class="o">.</span><span class="n">Collection</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="n">collection</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">collection</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;_child</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>
        <span class="n">collection</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">collection</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">autolim</span><span class="p">:</span>
            <span class="c1"># Make sure viewLim is not stale (mostly to match</span>
            <span class="c1"># pre-lazy-autoscale behavior, which is not really better).</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_unstale_viewLim</span><span class="p">()</span>
            <span class="n">datalim</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">get_datalim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
            <span class="n">points</span> <span class="o">=</span> <span class="n">datalim</span><span class="o">.</span><span class="n">get_points</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">datalim</span><span class="o">.</span><span class="n">minpos</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                <span class="c1"># By definition, if minpos (minimum positive value) is set</span>
                <span class="c1"># (i.e., non-inf), then min(points) &lt;= minpos &lt;= max(points),</span>
                <span class="c1"># and minpos would be superfluous. However, we add minpos to</span>
                <span class="c1"># the call so that self.dataLim will update its own minpos.</span>
                <span class="c1"># This ensures that log scales see the correct minimum.</span>
                <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">points</span><span class="p">,</span> <span class="p">[</span><span class="n">datalim</span><span class="o">.</span><span class="n">minpos</span><span class="p">]])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">collection</span>

    <span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an `.AxesImage` to the Axes; return the image.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_isinstance</span><span class="p">(</span><span class="n">mimage</span><span class="o">.</span><span class="n">AxesImage</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">image</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
            <span class="n">image</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;_child</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="n">image</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="k">def</span> <span class="nf">_update_image_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get_extent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(((</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">),</span> <span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">add_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `.Line2D` to the Axes; return the line.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_isinstance</span><span class="p">(</span><span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_line_limits</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">get_label</span><span class="p">():</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;_child</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">line</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">line</span>

    <span class="k">def</span> <span class="nf">_add_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">txt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `.Text` to the Axes; return the text.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_isinstance</span><span class="p">(</span><span class="n">mtext</span><span class="o">.</span><span class="n">Text</span><span class="p">,</span> <span class="n">txt</span><span class="o">=</span><span class="n">txt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
        <span class="n">txt</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">remove</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">txt</span>

    <span class="k">def</span> <span class="nf">_update_line_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Figures out the data limit of the given line, updating self.dataLim.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">line_trf</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">line_trf</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">:</span>
            <span class="n">data_path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">elif</span> <span class="nb">any</span><span class="p">(</span><span class="n">line_trf</span><span class="o">.</span><span class="n">contains_branch_seperately</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)):</span>
            <span class="c1"># Compute the transform from line coordinates to data coordinates.</span>
            <span class="n">trf_to_data</span> <span class="o">=</span> <span class="n">line_trf</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span>
            <span class="c1"># If transData is affine we can use the cached non-affine component</span>
            <span class="c1"># of line&#39;s path (since the non-affine part of line_trf is</span>
            <span class="c1"># entirely encapsulated in trf_to_data).</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">is_affine</span><span class="p">:</span>
                <span class="n">line_trans_path</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">_get_transformed_path</span><span class="p">()</span>
                <span class="n">na_path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">line_trans_path</span><span class="o">.</span><span class="n">get_transformed_path_and_affine</span><span class="p">()</span>
                <span class="n">data_path</span> <span class="o">=</span> <span class="n">trf_to_data</span><span class="o">.</span><span class="n">transform_path_affine</span><span class="p">(</span><span class="n">na_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data_path</span> <span class="o">=</span> <span class="n">trf_to_data</span><span class="o">.</span><span class="n">transform_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># For backwards compatibility we update the dataLim with the</span>
            <span class="c1"># coordinate range of the given path, even though the coordinate</span>
            <span class="c1"># systems are completely different. This may occur in situations</span>
            <span class="c1"># such as when ax.transAxes is passed through for absolute</span>
            <span class="c1"># positioning.</span>
            <span class="n">data_path</span> <span class="o">=</span> <span class="n">path</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">data_path</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span> <span class="o">=</span> <span class="n">line_trf</span><span class="o">.</span><span class="n">contains_branch_seperately</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;rectilinear&quot;</span><span class="p">:</span>
            <span class="c1"># This block is mostly intended to handle axvline in polar plots,</span>
            <span class="c1"># for which updatey would otherwise be True.</span>
            <span class="k">if</span> <span class="n">updatex</span> <span class="ow">and</span> <span class="n">line_trf</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_transform</span><span class="p">():</span>
                <span class="n">updatex</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">updatey</span> <span class="ow">and</span> <span class="n">line_trf</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xaxis_transform</span><span class="p">():</span>
                <span class="n">updatey</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">update_from_path</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span><span class="p">,</span>
                                      <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `.Patch` to the Axes; return the patch.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_isinstance</span><span class="p">(</span><span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_patch_limits</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">remove</span>
        <span class="k">return</span> <span class="n">p</span>

    <span class="k">def</span> <span class="nf">_update_patch_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">patch</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the data limits for the given patch.&quot;&quot;&quot;</span>
        <span class="c1"># hist can add zero height Rectangles, which is useful to keep</span>
        <span class="c1"># the bins, counts and patches lined up, but it throws off log</span>
        <span class="c1"># scaling.  We&#39;ll ignore rects with zero height or width in</span>
        <span class="c1"># the auto-scaling</span>

        <span class="c1"># cannot check for &#39;==0&#39; since unitized data may not compare to zero</span>
        <span class="c1"># issue #2150 - we update the limits if patch has non zero width</span>
        <span class="c1"># or height.</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">patch</span><span class="p">,</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">)</span> <span class="ow">and</span>
                <span class="p">((</span><span class="ow">not</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_height</span><span class="p">()))):</span>
            <span class="k">return</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span>
        <span class="c1"># Get all vertices on the path</span>
        <span class="c1"># Loop through each segment to get extrema for Bezier curve sections</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">curve</span><span class="p">,</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">iter_bezier</span><span class="p">(</span><span class="n">simplify</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="c1"># Get distance along the curve of any extrema</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">dzeros</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">axis_aligned_extrema</span><span class="p">()</span>
            <span class="c1"># Calculate vertices of start, end and any extrema in between</span>
            <span class="n">vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">curve</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="n">dzeros</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">):</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>

        <span class="n">patch_trf</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
        <span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span> <span class="o">=</span> <span class="n">patch_trf</span><span class="o">.</span><span class="n">contains_branch_seperately</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">updatex</span> <span class="ow">or</span> <span class="n">updatey</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;rectilinear&quot;</span><span class="p">:</span>
            <span class="c1"># As in _update_line_limits, but for axvspan.</span>
            <span class="k">if</span> <span class="n">updatex</span> <span class="ow">and</span> <span class="n">patch_trf</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_transform</span><span class="p">():</span>
                <span class="n">updatex</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">updatey</span> <span class="ow">and</span> <span class="n">patch_trf</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xaxis_transform</span><span class="p">():</span>
                <span class="n">updatey</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">trf_to_data</span> <span class="o">=</span> <span class="n">patch_trf</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span>
        <span class="n">xys</span> <span class="o">=</span> <span class="n">trf_to_data</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(</span><span class="n">xys</span><span class="p">,</span> <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tab</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `.Table` to the Axes; return the table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_isinstance</span><span class="p">(</span><span class="n">mtable</span><span class="o">.</span><span class="n">Table</span><span class="p">,</span> <span class="n">tab</span><span class="o">=</span><span class="n">tab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_artist_props</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tab</span><span class="o">.</span><span class="n">get_clip_path</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tab</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">remove</span>
        <span class="k">return</span> <span class="n">tab</span>

    <span class="k">def</span> <span class="nf">add_container</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a `.Container` to the Axes&#39; containers; return the container.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">label</span><span class="p">:</span>
            <span class="n">container</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;_container</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
        <span class="n">container</span><span class="o">.</span><span class="n">_remove_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">remove</span>
        <span class="k">return</span> <span class="n">container</span>

    <span class="k">def</span> <span class="nf">_unit_change_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis_name</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process axis units changes: requests updates to data and view limits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Allow connecting `self._unit_change_handler(name)`</span>
            <span class="k">return</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_unit_change_handler</span><span class="p">,</span> <span class="n">axis_name</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="nb">object</span><span class="p">())</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_in_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="p">,</span> <span class="n">axis_name</span><span class="o">=</span><span class="n">axis_name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">recache_always</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relim</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="n">axis_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">relim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visible_only</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Recompute the data limits based on current artists.</span>

<span class="sd">        At present, `.Collection` instances are not supported.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        visible_only : bool, default: False</span>
<span class="sd">            Whether to exclude invisible artists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Collections are deliberately not supported (yet); see</span>
        <span class="c1"># the TODO note in artists.py.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">set_points</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">null</span><span class="p">()</span><span class="o">.</span><span class="n">get_points</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">visible_only</span> <span class="ow">or</span> <span class="n">artist</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_update_line_limits</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_update_patch_limits</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">mimage</span><span class="o">.</span><span class="n">AxesImage</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_update_image_limits</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_datalim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xys</span><span class="p">,</span> <span class="n">updatex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">updatey</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extend the `~.Axes.dataLim` Bbox to include the given points.</span>

<span class="sd">        If no data is set currently, the Bbox will ignore its limits and set</span>
<span class="sd">        the bound to be the bounds of the xydata (*xys*). Otherwise, it will</span>
<span class="sd">        compute the bounds of the union of its current data and the data in</span>
<span class="sd">        *xys*.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xys : 2D array-like</span>
<span class="sd">            The points to include in the data limits Bbox. This can be either</span>
<span class="sd">            a list of (x, y) tuples or a (N, 2) array.</span>

<span class="sd">        updatex, updatey : bool, default: True</span>
<span class="sd">            Whether to update the x/y limits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">xys</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">xys</span><span class="p">)):</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataLim</span><span class="o">.</span><span class="n">update_from_data_xy</span><span class="p">(</span><span class="n">xys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span><span class="p">,</span>
                                         <span class="n">updatex</span><span class="o">=</span><span class="n">updatex</span><span class="p">,</span> <span class="n">updatey</span><span class="o">=</span><span class="n">updatey</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ignore_existing_data_limits</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_process_unit_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datasets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">convert</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set axis units based on *datasets* and *kwargs*, and optionally apply</span>
<span class="sd">        unit conversions to *datasets*.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        datasets : list</span>
<span class="sd">            List of (axis_name, dataset) pairs (where the axis name is defined</span>
<span class="sd">            as in `._axis_map`).  Individual datasets can also be None</span>
<span class="sd">            (which gets passed through).</span>
<span class="sd">        kwargs : dict</span>
<span class="sd">            Other parameters from which unit info (i.e., the *xunits*,</span>
<span class="sd">            *yunits*, *zunits* (for 3D Axes), *runits* and *thetaunits* (for</span>
<span class="sd">            polar) entries) is popped, if present.  Note that this dict is</span>
<span class="sd">            mutated in-place!</span>
<span class="sd">        convert : bool, default: True</span>
<span class="sd">            Whether to return the original datasets or the converted ones.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            Either the original datasets if *convert* is False, or the</span>
<span class="sd">            converted ones if *convert* is True (the default).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># The API makes datasets a list of pairs rather than an axis_name to</span>
        <span class="c1"># dataset mapping because it is sometimes necessary to process multiple</span>
        <span class="c1"># datasets for a single axis, and concatenating them may be tricky</span>
        <span class="c1"># (e.g. if some are scalars, etc.).</span>
        <span class="n">datasets</span> <span class="o">=</span> <span class="n">datasets</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">axis_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span>
        <span class="k">for</span> <span class="n">axis_name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datasets</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">axis</span> <span class="o">=</span> <span class="n">axis_map</span><span class="p">[</span><span class="n">axis_name</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid axis name: </span><span class="si">{</span><span class="n">axis_name</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="kc">None</span>
            <span class="c1"># Update from data if axis is already set but no unit is set yet.</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">axis</span><span class="o">.</span><span class="n">have_units</span><span class="p">():</span>
                <span class="n">axis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">axis_name</span><span class="p">,</span> <span class="n">axis</span> <span class="ow">in</span> <span class="n">axis_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># Return if no axis is set.</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># Check for units in the kwargs, and if present update axis.</span>
            <span class="n">units</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">axis_name</span><span class="si">}</span><span class="s2">units&quot;</span><span class="p">,</span> <span class="n">axis</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;polar&quot;</span><span class="p">:</span>
                <span class="c1"># Special case: polar supports &quot;thetaunits&quot;/&quot;runits&quot;.</span>
                <span class="n">polar_units</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="s2">&quot;thetaunits&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="s2">&quot;runits&quot;</span><span class="p">}</span>
                <span class="n">units</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">polar_units</span><span class="p">[</span><span class="n">axis_name</span><span class="p">],</span> <span class="n">units</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">units</span> <span class="o">!=</span> <span class="n">axis</span><span class="o">.</span><span class="n">units</span> <span class="ow">and</span> <span class="n">units</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">axis</span><span class="o">.</span><span class="n">set_units</span><span class="p">(</span><span class="n">units</span><span class="p">)</span>
                <span class="c1"># If the units being set imply a different converter,</span>
                <span class="c1"># we need to update again.</span>
                <span class="k">for</span> <span class="n">dataset_axis_name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datasets</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">dataset_axis_name</span> <span class="o">==</span> <span class="n">axis_name</span> <span class="ow">and</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">axis</span><span class="o">.</span><span class="n">update_units</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">axis_map</span><span class="p">[</span><span class="n">axis_name</span><span class="p">]</span><span class="o">.</span><span class="n">convert_units</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">convert</span> <span class="ow">and</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">data</span>
                <span class="k">for</span> <span class="n">axis_name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">datasets</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">in_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether the given event (in display coords) is in the Axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">get_autoscalex_on</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;_get_autoscale_on&quot;</span><span class="p">)</span>
    <span class="n">get_autoscaley_on</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;_get_autoscale_on&quot;</span><span class="p">)</span>
    <span class="n">set_autoscalex_on</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;_set_autoscale_on&quot;</span><span class="p">)</span>
    <span class="n">set_autoscaley_on</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;_set_autoscale_on&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_autoscale_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if each axis is autoscaled, False otherwise.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">axis</span><span class="o">.</span><span class="n">_get_autoscale_on</span><span class="p">()</span>
                   <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">set_autoscale_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether autoscaling is applied to each axis on the next draw or</span>
<span class="sd">        call to `.Axes.autoscale_view`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">_set_autoscale_on</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">use_sticky_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        When autoscaling, whether to obey all `Artist.sticky_edges`.</span>

<span class="sd">        Default is ``True``.</span>

<span class="sd">        Setting this to ``False`` ensures that the specified margins</span>
<span class="sd">        will be applied, even if the plot includes an image, for</span>
<span class="sd">        example, which would otherwise force a view limit to coincide</span>
<span class="sd">        with its data limit.</span>

<span class="sd">        The changing this property does not change the plot until</span>
<span class="sd">        `autoscale` or `autoscale_view` is called.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_use_sticky_edges</span>

    <span class="nd">@use_sticky_edges</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">use_sticky_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_use_sticky_edges</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="c1"># No effect until next autoscaling, which will mark the Axes as stale.</span>

    <span class="k">def</span> <span class="nf">get_xmargin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve autoscaling margin of the x-axis.</span>

<span class="sd">        .. versionadded:: 3.9</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xmargin : float</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_xmargin</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span>

    <span class="k">def</span> <span class="nf">get_ymargin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve autoscaling margin of the y-axis.</span>

<span class="sd">        .. versionadded:: 3.9</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ymargin : float</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_ymargin</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span>

    <span class="k">def</span> <span class="nf">set_xmargin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set padding of X data limits prior to autoscaling.</span>

<span class="sd">        *m* times the data interval will be added to each end of that interval</span>
<span class="sd">        before it is used in autoscaling.  If *m* is negative, this will clip</span>
<span class="sd">        the data range instead of expanding it.</span>

<span class="sd">        For example, if your data is in the range [0, 2], a margin of 0.1 will</span>
<span class="sd">        result in a range [-0.2, 2.2]; a margin of -0.1 will result in a range</span>
<span class="sd">        of [0.2, 1.8].</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        m : float greater than -0.5</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;margin must be greater than -0.5&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">set_ymargin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set padding of Y data limits prior to autoscaling.</span>

<span class="sd">        *m* times the data interval will be added to each end of that interval</span>
<span class="sd">        before it is used in autoscaling.  If *m* is negative, this will clip</span>
<span class="sd">        the data range instead of expanding it.</span>

<span class="sd">        For example, if your data is in the range [0, 2], a margin of 0.1 will</span>
<span class="sd">        result in a range [-0.2, 2.2]; a margin of -0.1 will result in a range</span>
<span class="sd">        of [0.2, 1.8].</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        m : float greater than -0.5</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;margin must be greater than -0.5&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">margins</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">margins</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set or retrieve autoscaling margins.</span>

<span class="sd">        The padding added to each limit of the Axes is the *margin*</span>
<span class="sd">        times the data interval. All input parameters must be floats</span>
<span class="sd">        greater than -0.5. Passing both positional and keyword</span>
<span class="sd">        arguments is invalid and will raise a TypeError. If no</span>
<span class="sd">        arguments (positional or otherwise) are provided, the current</span>
<span class="sd">        margins will remain unchanged and simply be returned.</span>

<span class="sd">        Specifying any margin changes only the autoscaling; for example,</span>
<span class="sd">        if *xmargin* is not None, then *xmargin* times the X data</span>
<span class="sd">        interval will be added to each end of that interval before</span>
<span class="sd">        it is used in autoscaling.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        *margins : float, optional</span>
<span class="sd">            If a single positional argument is provided, it specifies</span>
<span class="sd">            both margins of the x-axis and y-axis limits. If two</span>
<span class="sd">            positional arguments are provided, they will be interpreted</span>
<span class="sd">            as *xmargin*, *ymargin*. If setting the margin on a single</span>
<span class="sd">            axis is desired, use the keyword arguments described below.</span>

<span class="sd">        x, y : float, optional</span>
<span class="sd">            Specific margin values for the x-axis and y-axis,</span>
<span class="sd">            respectively. These cannot be used with positional</span>
<span class="sd">            arguments, but can be used individually to alter on e.g.,</span>
<span class="sd">            only the y-axis.</span>

<span class="sd">        tight : bool or None, default: True</span>
<span class="sd">            The *tight* parameter is passed to `~.axes.Axes.autoscale_view`,</span>
<span class="sd">            which is executed after a margin is changed; the default</span>
<span class="sd">            here is *True*, on the assumption that when margins are</span>
<span class="sd">            specified, no additional padding to match tick marks is</span>
<span class="sd">            usually desired.  Setting *tight* to *None* preserves</span>
<span class="sd">            the previous setting.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xmargin, ymargin : float</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        If a previously used Axes method such as :meth:`pcolor` has set</span>
<span class="sd">        :attr:`use_sticky_edges` to `True`, only the limits not set by</span>
<span class="sd">        the &quot;sticky artists&quot; will be modified. To force all of the</span>
<span class="sd">        margins to be set, set :attr:`use_sticky_edges` to `False`</span>
<span class="sd">        before calling :meth:`margins`.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">margins</span> <span class="ow">and</span> <span class="p">(</span><span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Cannot pass both positional and keyword &#39;</span>
                            <span class="s1">&#39;arguments for x and/or y.&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="n">margins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">margins</span>
        <span class="k">elif</span> <span class="n">margins</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Must pass a single positional argument for all &#39;</span>
                            <span class="s1">&#39;margins, or one for each margin (x, y).&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">_api</span><span class="o">.</span><span class="n">warn_external</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ignoring tight=</span><span class="si">{</span><span class="n">tight</span><span class="si">!r}</span><span class="s1"> in get mode&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span>

        <span class="k">if</span> <span class="n">tight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="n">tight</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xmargin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ymargin</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_rasterization_zorder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the zorder threshold for rasterization for vector graphics output.</span>

<span class="sd">        All artists with a zorder below the given value will be rasterized if</span>
<span class="sd">        they support rasterization.</span>

<span class="sd">        This setting is ignored for pixel-based output.</span>

<span class="sd">        See also :doc:`/gallery/misc/rasterization_demo`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        z : float or None</span>
<span class="sd">            The zorder below which artists are rasterized.</span>
<span class="sd">            If ``None`` rasterization based on zorder is deactivated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span> <span class="o">=</span> <span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_rasterization_zorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the zorder value below which artists will be rasterized.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span>

    <span class="k">def</span> <span class="nf">autoscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Autoscale the axis view to the data (toggle).</span>

<span class="sd">        Convenience method for simple axis view autoscaling.</span>
<span class="sd">        It turns autoscaling on or off, and then,</span>
<span class="sd">        if autoscaling for either axis is on, it performs</span>
<span class="sd">        the autoscaling on the specified axis or Axes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        enable : bool or None, default: True</span>
<span class="sd">            True turns autoscaling on, False turns it off.</span>
<span class="sd">            None leaves the autoscaling state unchanged.</span>
<span class="sd">        axis : {&#39;both&#39;, &#39;x&#39;, &#39;y&#39;}, default: &#39;both&#39;</span>
<span class="sd">            The axis on which to operate.  (For 3D Axes, *axis* can also be set</span>
<span class="sd">            to &#39;z&#39;, and &#39;both&#39; refers to all three Axes.)</span>
<span class="sd">        tight : bool or None, default: None</span>
<span class="sd">            If True, first set the margins to zero.  Then, this argument is</span>
<span class="sd">            forwarded to `~.axes.Axes.autoscale_view` (regardless of</span>
<span class="sd">            its value); see the description of its behavior there.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">enable</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scalex</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">scaley</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscalex_on</span><span class="p">(</span><span class="nb">bool</span><span class="p">(</span><span class="n">enable</span><span class="p">))</span>
                <span class="n">scalex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_autoscalex_on</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">scalex</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscaley_on</span><span class="p">(</span><span class="nb">bool</span><span class="p">(</span><span class="n">enable</span><span class="p">))</span>
                <span class="n">scaley</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_autoscaley_on</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">scaley</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">and</span> <span class="n">scalex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">and</span> <span class="n">scaley</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">scalex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">scaley</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">autoscale_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scalex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scaley</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Autoscale the view limits using the data limits.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tight : bool or None</span>
<span class="sd">            If *True*, only expand the axis limits using the margins.  Note</span>
<span class="sd">            that unlike for `autoscale`, ``tight=True`` does *not* set the</span>
<span class="sd">            margins to zero.</span>

<span class="sd">            If *False* and :rc:`axes.autolimit_mode` is &#39;round_numbers&#39;, then</span>
<span class="sd">            after expansion by the margins, further expand the axis limits</span>
<span class="sd">            using the axis major locator.</span>

<span class="sd">            If None (the default), reuse the value set in the previous call to</span>
<span class="sd">            `autoscale_view` (the initial value is False, but the default style</span>
<span class="sd">            sets :rc:`axes.autolimit_mode` to &#39;data&#39;, in which case this</span>
<span class="sd">            behaves like True).</span>

<span class="sd">        scalex : bool, default: True</span>
<span class="sd">            Whether to autoscale the x-axis.</span>

<span class="sd">        scaley : bool, default: True</span>
<span class="sd">            Whether to autoscale the y-axis.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The autoscaling preserves any preexisting axis direction reversal.</span>

<span class="sd">        The data limits are not updated automatically when artist data are</span>
<span class="sd">        changed after the artist has been added to an Axes instance.  In that</span>
<span class="sd">        case, use :meth:`matplotlib.axes.Axes.relim` prior to calling</span>
<span class="sd">        autoscale_view.</span>

<span class="sd">        If the views of the Axes are fixed, e.g. via `set_xlim`, they will</span>
<span class="sd">        not be changed by autoscale_view().</span>
<span class="sd">        See :meth:`matplotlib.axes.Axes.autoscale` for an alternative.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tight</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">tight</span><span class="p">)</span>

        <span class="n">x_stickies</span> <span class="o">=</span> <span class="n">y_stickies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_sticky_edges</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span> <span class="ow">and</span> <span class="n">scalex</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_autoscalex_on</span><span class="p">():</span>
                <span class="n">x_stickies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span>
                    <span class="n">artist</span><span class="o">.</span><span class="n">sticky_edges</span><span class="o">.</span><span class="n">x</span>
                    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_children</span><span class="p">()]))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span> <span class="ow">and</span> <span class="n">scaley</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_autoscaley_on</span><span class="p">():</span>
                <span class="n">y_stickies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span>
                    <span class="n">artist</span><span class="o">.</span><span class="n">sticky_edges</span><span class="o">.</span><span class="n">y</span>
                    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_children</span><span class="p">()]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
            <span class="n">x_stickies</span> <span class="o">=</span> <span class="n">x_stickies</span><span class="p">[</span><span class="n">x_stickies</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;log&#39;</span><span class="p">:</span>
            <span class="n">y_stickies</span> <span class="o">=</span> <span class="n">y_stickies</span><span class="p">[</span><span class="n">y_stickies</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">handle_single_axis</span><span class="p">(</span>
                <span class="n">scale</span><span class="p">,</span> <span class="n">shared_axes</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">margin</span><span class="p">,</span> <span class="n">stickies</span><span class="p">,</span> <span class="n">set_bound</span><span class="p">):</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">scale</span> <span class="ow">and</span> <span class="n">axis</span><span class="o">.</span><span class="n">_get_autoscale_on</span><span class="p">()):</span>
                <span class="k">return</span>  <span class="c1"># nothing to do...</span>

            <span class="n">shared</span> <span class="o">=</span> <span class="n">shared_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="c1"># Base autoscaling on finite data limits when there is at least one</span>
            <span class="c1"># finite data limit among all the shared_axes and intervals.</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">shared</span>
                      <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">dataLim</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;interval</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                      <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">val</span><span class="p">)]</span>
            <span class="k">if</span> <span class="n">values</span><span class="p">:</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">values</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;mutated</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)():</span>
                <span class="c1"># No data, but explicit viewLims already set:</span>
                <span class="c1"># in mutatedx or mutatedy.</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
            <span class="c1"># If x0 and x1 are nonfinite, get default limits from the locator.</span>
            <span class="n">locator</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="c1"># Find the minimum minpos for use in the margin calculation.</span>
            <span class="n">minimum_minpos</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">dataLim</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;minpos</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">shared</span><span class="p">)</span>

            <span class="c1"># Prevent margin addition from crossing a sticky value.  A small</span>
            <span class="c1"># tolerance must be added due to floating point issues with</span>
            <span class="c1"># streamplot; it is defined relative to x1-x0 but has</span>
            <span class="c1"># no absolute term (e.g. &quot;+1e-8&quot;) to avoid issues when working with</span>
            <span class="c1"># datasets where all values are tiny (less than 1e-8).</span>
            <span class="n">tol</span> <span class="o">=</span> <span class="mf">1e-5</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span>
            <span class="c1"># Index of largest element &lt; x0 + tol, if any.</span>
            <span class="n">i0</span> <span class="o">=</span> <span class="n">stickies</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">x0</span> <span class="o">+</span> <span class="n">tol</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">x0bound</span> <span class="o">=</span> <span class="n">stickies</span><span class="p">[</span><span class="n">i0</span><span class="p">]</span> <span class="k">if</span> <span class="n">i0</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="c1"># Index of smallest element &gt; x1 - tol, if any.</span>
            <span class="n">i1</span> <span class="o">=</span> <span class="n">stickies</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">tol</span><span class="p">)</span>
            <span class="n">x1bound</span> <span class="o">=</span> <span class="n">stickies</span><span class="p">[</span><span class="n">i1</span><span class="p">]</span> <span class="k">if</span> <span class="n">i1</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">stickies</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>

            <span class="c1"># Add the margin in figure space and then transform back, to handle</span>
            <span class="c1"># non-linear scales.</span>
            <span class="n">transform</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
            <span class="n">inverse_trans</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">_scale</span><span class="o">.</span><span class="n">limit_range_for_scale</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">minimum_minpos</span><span class="p">)</span>
            <span class="n">x0t</span><span class="p">,</span> <span class="n">x1t</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">])</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1t</span> <span class="o">-</span> <span class="n">x0t</span><span class="p">)</span> <span class="o">*</span> <span class="n">margin</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">delta</span><span class="p">):</span>
                <span class="n">delta</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># If a bound isn&#39;t finite, set margin to zero.</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">inverse_trans</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">x0t</span> <span class="o">-</span> <span class="n">delta</span><span class="p">,</span> <span class="n">x1t</span> <span class="o">+</span> <span class="n">delta</span><span class="p">])</span>

            <span class="c1"># Apply sticky bounds.</span>
            <span class="k">if</span> <span class="n">x0bound</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">x0</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x0bound</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x1bound</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x1bound</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tight</span><span class="p">:</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="n">view_limits</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="n">set_bound</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="c1"># End of definition of internal function &#39;handle_single_axis&#39;.</span>

        <span class="n">handle_single_axis</span><span class="p">(</span>
            <span class="n">scalex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xmargin</span><span class="p">,</span>
            <span class="n">x_stickies</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">)</span>
        <span class="n">handle_single_axis</span><span class="p">(</span>
            <span class="n">scaley</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ymargin</span><span class="p">,</span>
            <span class="n">y_stickies</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_title_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the title position based on the bounding box enclosing</span>
<span class="sd">        all the ticklabels and x-axis spine and xlabel...</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autotitlepos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autotitlepos</span><span class="p">:</span>
            <span class="n">_log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;title position was updated manually, not adjusting&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">titles</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">)</span>

        <span class="c1"># Need to check all our twins too, aligned axes, and all the children</span>
        <span class="c1"># as well.</span>
        <span class="n">axs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">axs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span><span class="p">)</span>
        <span class="n">axs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="n">axs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">_align_label_groups</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span><span class="p">:</span>  <span class="c1"># Child positions must be updated first.</span>
            <span class="n">locator</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">(</span><span class="n">locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span> <span class="k">if</span> <span class="n">locator</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">titles</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="c1"># need to start again in case of window resizing</span>
            <span class="n">title</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
            <span class="n">top</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span>
            <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
                <span class="n">bb</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticks_position</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">]</span>
                        <span class="ow">or</span> <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_label_position</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span><span class="p">):</span>
                    <span class="n">bb</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">bb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;outline&#39;</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">:</span>
                        <span class="c1"># Special case for colorbars:</span>
                        <span class="n">bb</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;outline&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bb</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                <span class="n">top</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="n">bb</span><span class="o">.</span><span class="n">ymax</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">title</span><span class="o">.</span><span class="n">get_text</span><span class="p">():</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>  <span class="c1"># update offsetText</span>
                    <span class="k">if</span> <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">offsetText</span><span class="o">.</span><span class="n">get_text</span><span class="p">():</span>
                        <span class="n">bb</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">offsetText</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">bb</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">title</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">),</span> <span class="n">bb</span><span class="p">):</span>
                            <span class="n">top</span> <span class="o">=</span> <span class="n">bb</span><span class="o">.</span><span class="n">ymax</span>
            <span class="k">if</span> <span class="n">top</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># the top of Axes is not even on the figure, so don&#39;t try and</span>
                <span class="c1"># automatically place it.</span>
                <span class="n">_log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;top of Axes not in the figure, so title not moved&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="n">title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span><span class="o">.</span><span class="n">ymin</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="p">))</span>
                <span class="n">title</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
                <span class="c1"># empirically, this doesn&#39;t always get the min to top,</span>
                <span class="c1"># so we need to adjust again.</span>
                <span class="k">if</span> <span class="n">title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span><span class="o">.</span><span class="n">ymin</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
                    <span class="n">_</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                        <span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">top</span> <span class="o">-</span> <span class="n">title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span><span class="o">.</span><span class="n">ymin</span><span class="p">))</span>
                    <span class="n">title</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

        <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">title</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">titles</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">titles</span><span class="p">:</span>
            <span class="c1"># now line up all the titles at the highest baseline.</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="n">title</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">ymax</span><span class="p">))</span>

    <span class="c1"># Drawing</span>
    <span class="nd">@martist</span><span class="o">.</span><span class="n">allow_rasterization</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;No renderer defined&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unstale_viewLim</span><span class="p">()</span>

        <span class="n">renderer</span><span class="o">.</span><span class="n">open_group</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="n">gid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_gid</span><span class="p">())</span>

        <span class="c1"># prevent triggering call backs during the draw process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stale</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># loop over self and child Axes...</span>
        <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">(</span><span class="n">locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span> <span class="k">if</span> <span class="n">locator</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>
        <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="c1"># the frame draws the edges around the Axes patch -- we</span>
        <span class="c1"># decouple these so the patch can be in the background and the</span>
        <span class="c1"># frame in the foreground. Do this before drawing the axis</span>
        <span class="c1"># objects so that the spine has the opportunity to update them.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">spine</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_title_position</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">_axis</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">is_saving</span><span class="p">():</span>
            <span class="n">artists</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">get_animated</span><span class="p">()</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">mimage</span><span class="o">.</span><span class="n">AxesImage</span><span class="p">)]</span>
        <span class="n">artists</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s1">&#39;zorder&#39;</span><span class="p">))</span>

        <span class="c1"># rasterize artists with negative zorder</span>
        <span class="c1"># if the minimum zorder is negative, start rasterization</span>
        <span class="n">rasterization_zorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rasterization_zorder</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">rasterization_zorder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                <span class="n">artists</span> <span class="ow">and</span> <span class="n">artists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">zorder</span> <span class="o">&lt;</span> <span class="n">rasterization_zorder</span><span class="p">):</span>
            <span class="n">split_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span>
                <span class="p">[</span><span class="n">art</span><span class="o">.</span><span class="n">zorder</span> <span class="k">for</span> <span class="n">art</span> <span class="ow">in</span> <span class="n">artists</span><span class="p">],</span>
                <span class="n">rasterization_zorder</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s1">&#39;right&#39;</span>
            <span class="p">)</span>
            <span class="n">artists_rasterized</span> <span class="o">=</span> <span class="n">artists</span><span class="p">[:</span><span class="n">split_index</span><span class="p">]</span>
            <span class="n">artists</span> <span class="o">=</span> <span class="n">artists</span><span class="p">[</span><span class="n">split_index</span><span class="p">:]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">artists_rasterized</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">artists_rasterized</span><span class="p">:</span>
                <span class="n">artists_rasterized</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">]</span> <span class="o">+</span> <span class="n">artists_rasterized</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">]</span> <span class="o">+</span> <span class="n">artists</span>

        <span class="k">if</span> <span class="n">artists_rasterized</span><span class="p">:</span>
            <span class="n">_draw_rasterized</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">,</span> <span class="n">artists_rasterized</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>

        <span class="n">mimage</span><span class="o">.</span><span class="n">_draw_list_compositing_images</span><span class="p">(</span>
            <span class="n">renderer</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">artists</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">suppressComposite</span><span class="p">)</span>

        <span class="n">renderer</span><span class="o">.</span><span class="n">close_group</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">draw_artist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Efficiently redraw a single artist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">get_renderer</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">redraw_in_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Efficiently redraw Axes data, but not axis ticks, labels, etc.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">ExitStack</span><span class="p">()</span> <span class="k">as</span> <span class="n">stack</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="p">[</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">]:</span>
                <span class="n">stack</span><span class="o">.</span><span class="n">enter_context</span><span class="p">(</span><span class="n">artist</span><span class="o">.</span><span class="n">_cm_set</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">get_renderer</span><span class="p">())</span>

    <span class="c1"># Axes rectangle characteristics</span>

    <span class="k">def</span> <span class="nf">get_frame_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get whether the Axes rectangle patch is drawn.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span>

    <span class="k">def</span> <span class="nf">set_frame_on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether the Axes rectangle patch is drawn.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_axisbelow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether axis ticks and gridlines are above or below most artists.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool or &#39;line&#39;</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        set_axisbelow</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span>

    <span class="k">def</span> <span class="nf">set_axisbelow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether axis ticks and gridlines are above or below most artists.</span>

<span class="sd">        This controls the zorder of the ticks and gridlines. For more</span>
<span class="sd">        information on the zorder see :doc:`/gallery/misc/zorder_demo`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool or &#39;line&#39;</span>
<span class="sd">            Possible values:</span>

<span class="sd">            - *True* (zorder = 0.5): Ticks and gridlines are below patches and</span>
<span class="sd">              lines, though still above images.</span>
<span class="sd">            - &#39;line&#39; (zorder = 1.5): Ticks and gridlines are above patches</span>
<span class="sd">              (e.g. rectangles, with default zorder = 1) but still below lines</span>
<span class="sd">              and markers (with their default zorder = 2).</span>
<span class="sd">            - *False* (zorder = 2.5): Ticks and gridlines are above patches</span>
<span class="sd">              and lines / markers.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        For more control, call the `~.Artist.set_zorder` method of each axis.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        get_axisbelow</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check that b is True, False or &#39;line&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axisbelow</span> <span class="o">=</span> <span class="n">axisbelow</span> <span class="o">=</span> <span class="n">validate_axisbelow</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">zorder</span> <span class="o">=</span> <span class="p">{</span>
            <span class="kc">True</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
            <span class="kc">False</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
        <span class="p">}[</span><span class="n">axisbelow</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="n">zorder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@_docstring</span><span class="o">.</span><span class="n">dedent_interpd</span>
    <span class="k">def</span> <span class="nf">grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure the grid lines.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        visible : bool or None, optional</span>
<span class="sd">            Whether to show the grid lines.  If any *kwargs* are supplied, it</span>
<span class="sd">            is assumed you want the grid on and *visible* will be set to True.</span>

<span class="sd">            If *visible* is *None* and there are no *kwargs*, this toggles the</span>
<span class="sd">            visibility of the lines.</span>

<span class="sd">        which : {&#39;major&#39;, &#39;minor&#39;, &#39;both&#39;}, optional</span>
<span class="sd">            The grid lines to apply the changes on.</span>

<span class="sd">        axis : {&#39;both&#39;, &#39;x&#39;, &#39;y&#39;}, optional</span>
<span class="sd">            The axis to apply the changes on.</span>

<span class="sd">        **kwargs : `~matplotlib.lines.Line2D` properties</span>
<span class="sd">            Define the line properties of the grid, e.g.::</span>

<span class="sd">                grid(color=&#39;r&#39;, linestyle=&#39;-&#39;, linewidth=2)</span>

<span class="sd">            Valid keyword arguments are:</span>

<span class="sd">            %(Line2D:kwdoc)s</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The axis is drawn as a unit, so the effective zorder for drawing the</span>
<span class="sd">        grid is determined by the zorder of each axis, not by the zorder of the</span>
<span class="sd">        `.Line2D` objects comprising the grid.  Therefore, to set grid zorder,</span>
<span class="sd">        use `.set_axisbelow` or, for more control, call the</span>
<span class="sd">        `~.Artist.set_zorder` method of each axis.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_in_list</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">visible</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">visible</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ticklabel_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scilimits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">useOffset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">useLocale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">useMathText</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Configure the `.ScalarFormatter` used by default for linear Axes.</span>

<span class="sd">        If a parameter is not set, the corresponding property of the formatter</span>
<span class="sd">        is left unchanged.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axis : {&#39;x&#39;, &#39;y&#39;, &#39;both&#39;}, default: &#39;both&#39;</span>
<span class="sd">            The axis to configure.  Only major ticks are affected.</span>

<span class="sd">        style : {&#39;sci&#39;, &#39;scientific&#39;, &#39;plain&#39;}</span>
<span class="sd">            Whether to use scientific notation.</span>
<span class="sd">            The formatter default is to use scientific notation.</span>
<span class="sd">            &#39;sci&#39; is equivalent to &#39;scientific&#39;.</span>

<span class="sd">        scilimits : pair of ints (m, n)</span>
<span class="sd">            Scientific notation is used only for numbers outside the range</span>
<span class="sd">            10\ :sup:`m` to 10\ :sup:`n` (and only if the formatter is</span>
<span class="sd">            configured to use scientific notation at all).  Use (0, 0) to</span>
<span class="sd">            include all numbers.  Use (m, m) where m != 0 to fix the order of</span>
<span class="sd">            magnitude to 10\ :sup:`m`.</span>
<span class="sd">            The formatter default is :rc:`axes.formatter.limits`.</span>

<span class="sd">        useOffset : bool or float</span>
<span class="sd">            If True, the offset is calculated as needed.</span>
<span class="sd">            If False, no offset is used.</span>
<span class="sd">            If a numeric value, it sets the offset.</span>
<span class="sd">            The formatter default is :rc:`axes.formatter.useoffset`.</span>

<span class="sd">        useLocale : bool</span>
<span class="sd">            Whether to format the number using the current locale or using the</span>
<span class="sd">            C (English) locale.  This affects e.g. the decimal separator.  The</span>
<span class="sd">            formatter default is :rc:`axes.formatter.use_locale`.</span>

<span class="sd">        useMathText : bool</span>
<span class="sd">            Render the offset and scientific notation in mathtext.</span>
<span class="sd">            The formatter default is :rc:`axes.formatter.use_mathtext`.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        AttributeError</span>
<span class="sd">            If the current formatter is not a `.ScalarFormatter`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">style</span> <span class="o">=</span> <span class="n">style</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">scilimits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">scilimits</span>
                <span class="n">m</span> <span class="o">+</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># check that both are numbers</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;scilimits must be a sequence of 2 integers&quot;</span>
                                 <span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>
        <span class="n">STYLES</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sci&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;scientific&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;plain&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="c1"># The &#39;&#39; option is included for backwards-compatibility.</span>
        <span class="n">is_sci_style</span> <span class="o">=</span> <span class="n">_api</span><span class="o">.</span><span class="n">check_getitem</span><span class="p">(</span><span class="n">STYLES</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">)</span>
        <span class="n">axis_map</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
                    <span class="s1">&#39;both&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">values</span><span class="p">())}</span>
        <span class="n">axises</span> <span class="o">=</span> <span class="n">_api</span><span class="o">.</span><span class="n">check_getitem</span><span class="p">(</span><span class="n">axis_map</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="n">axises</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_sci_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_scientific</span><span class="p">(</span><span class="n">is_sci_style</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">scilimits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_powerlimits</span><span class="p">(</span><span class="n">scilimits</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">useOffset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useOffset</span><span class="p">(</span><span class="n">useOffset</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">useLocale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useLocale</span><span class="p">(</span><span class="n">useLocale</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">useMathText</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">major</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">set_useMathText</span><span class="p">(</span><span class="n">useMathText</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="s2">&quot;This method only works with the ScalarFormatter&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>

    <span class="k">def</span> <span class="nf">locator_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Control behavior of major tick locators.</span>

<span class="sd">        Because the locator is involved in autoscaling, `~.Axes.autoscale_view`</span>
<span class="sd">        is called automatically after the parameters are changed.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axis : {&#39;both&#39;, &#39;x&#39;, &#39;y&#39;}, default: &#39;both&#39;</span>
<span class="sd">            The axis on which to operate.  (For 3D Axes, *axis* can also be</span>
<span class="sd">            set to &#39;z&#39;, and &#39;both&#39; refers to all three axes.)</span>
<span class="sd">        tight : bool or None, optional</span>
<span class="sd">            Parameter passed to `~.Axes.autoscale_view`.</span>
<span class="sd">            Default is None, for no change.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>
<span class="sd">        **kwargs</span>
<span class="sd">            Remaining keyword arguments are passed to directly to the</span>
<span class="sd">            ``set_params()`` method of the locator. Supported keywords depend</span>
<span class="sd">            on the type of the locator. See for example</span>
<span class="sd">            `~.ticker.MaxNLocator.set_params` for the `.ticker.MaxNLocator`</span>
<span class="sd">            used by default for linear.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        When plotting small subplots, one might want to reduce the maximum</span>
<span class="sd">        number of ticks and use tight bounds, for example::</span>

<span class="sd">            ax.locator_params(tight=True, nbins=4)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_in_list</span><span class="p">([</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">,</span> <span class="s2">&quot;both&quot;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;both&quot;</span><span class="p">]:</span>
                <span class="n">loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span>
                <span class="n">loc</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_request_autoscale_view</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">tight</span><span class="o">=</span><span class="n">tight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">tick_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the appearance of ticks, tick labels, and gridlines.</span>

<span class="sd">        Tick properties that are not explicitly set using the keyword</span>
<span class="sd">        arguments remain unchanged unless *reset* is True. For the current</span>
<span class="sd">        style settings, see `.Axis.get_tick_params`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        axis : {&#39;x&#39;, &#39;y&#39;, &#39;both&#39;}, default: &#39;both&#39;</span>
<span class="sd">            The axis to which the parameters are applied.</span>
<span class="sd">        which : {&#39;major&#39;, &#39;minor&#39;, &#39;both&#39;}, default: &#39;major&#39;</span>
<span class="sd">            The group of ticks to which the parameters are applied.</span>
<span class="sd">        reset : bool, default: False</span>
<span class="sd">            Whether to reset the ticks to defaults before updating them.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>
<span class="sd">        direction : {&#39;in&#39;, &#39;out&#39;, &#39;inout&#39;}</span>
<span class="sd">            Puts ticks inside the Axes, outside the Axes, or both.</span>
<span class="sd">        length : float</span>
<span class="sd">            Tick length in points.</span>
<span class="sd">        width : float</span>
<span class="sd">            Tick width in points.</span>
<span class="sd">        color : :mpltype:`color`</span>
<span class="sd">            Tick color.</span>
<span class="sd">        pad : float</span>
<span class="sd">            Distance in points between tick and label.</span>
<span class="sd">        labelsize : float or str</span>
<span class="sd">            Tick label font size in points or as a string (e.g., &#39;large&#39;).</span>
<span class="sd">        labelcolor : :mpltype:`color`</span>
<span class="sd">            Tick label color.</span>
<span class="sd">        labelfontfamily : str</span>
<span class="sd">            Tick label font.</span>
<span class="sd">        colors : :mpltype:`color`</span>
<span class="sd">            Tick color and label color.</span>
<span class="sd">        zorder : float</span>
<span class="sd">            Tick and label zorder.</span>
<span class="sd">        bottom, top, left, right : bool</span>
<span class="sd">            Whether to draw the respective ticks.</span>
<span class="sd">        labelbottom, labeltop, labelleft, labelright : bool</span>
<span class="sd">            Whether to draw the respective tick labels.</span>
<span class="sd">        labelrotation : float</span>
<span class="sd">            Tick label rotation</span>
<span class="sd">        grid_color : :mpltype:`color`</span>
<span class="sd">            Gridline color.</span>
<span class="sd">        grid_alpha : float</span>
<span class="sd">            Transparency of gridlines: 0 (transparent) to 1 (opaque).</span>
<span class="sd">        grid_linewidth : float</span>
<span class="sd">            Width of gridlines in points.</span>
<span class="sd">        grid_linestyle : str</span>
<span class="sd">            Any valid `.Line2D` line style spec.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        ::</span>

<span class="sd">            ax.tick_params(direction=&#39;out&#39;, length=6, width=2, colors=&#39;r&#39;,</span>
<span class="sd">                           grid_color=&#39;r&#39;, grid_alpha=0.5)</span>

<span class="sd">        This will make all major ticks be red, pointing out of the box,</span>
<span class="sd">        and with dimensions 6 points by 2 points.  Tick labels will</span>
<span class="sd">        also be red.  Gridlines will be red and translucent.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_in_list</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
            <span class="n">xkw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labelleft&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">xkw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labelright&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="o">**</span><span class="n">xkw</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;both&#39;</span><span class="p">]:</span>
            <span class="n">ykw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labeltop&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">ykw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;labelbottom&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="o">**</span><span class="n">ykw</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_axis_off</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hide all visual components of the x- and y-axis.</span>

<span class="sd">        This sets a flag to suppress drawing of all axis decorations, i.e.</span>
<span class="sd">        axis labels, axis spines, and the axis tick component (tick markers,</span>
<span class="sd">        tick labels, and grid lines). Individual visibility settings of these</span>
<span class="sd">        components are ignored as long as `set_axis_off()` is in effect.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">set_axis_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Do not hide all visual components of the x- and y-axis.</span>

<span class="sd">        This reverts the effect of a prior `.set_axis_off()` call. Whether the</span>
<span class="sd">        individual axis decorations are drawn is controlled by their respective</span>
<span class="sd">        visibility settings.</span>

<span class="sd">        This is on by default.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stale</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># data limits, ticks, tick labels, and formatting</span>

    <span class="k">def</span> <span class="nf">get_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the xlabel text string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">label</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                   <span class="n">loc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the label for the x-axis.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xlabel : str</span>
<span class="sd">            The label text.</span>

<span class="sd">        labelpad : float, default: :rc:`axes.labelpad`</span>
<span class="sd">            Spacing in points from the Axes bounding box including ticks</span>
<span class="sd">            and tick labels.  If None, the previous value is left as is.</span>

<span class="sd">        loc : {&#39;left&#39;, &#39;center&#39;, &#39;right&#39;}, default: :rc:`xaxis.labellocation`</span>
<span class="sd">            The label position. This is a high-level alternative for passing</span>
<span class="sd">            parameters *x* and *horizontalalignment*.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>
<span class="sd">        **kwargs : `~matplotlib.text.Text` properties</span>
<span class="sd">            `.Text` properties control the appearance of the label.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        text : Documents the properties supported by `.Text`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">labelpad</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">labelpad</span> <span class="o">=</span> <span class="n">labelpad</span>
        <span class="n">protected_kw</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;horizontalalignment&#39;</span><span class="p">,</span> <span class="s1">&#39;ha&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">{</span><span class="o">*</span><span class="n">kwargs</span><span class="p">}</span> <span class="o">&amp;</span> <span class="p">{</span><span class="o">*</span><span class="n">protected_kw</span><span class="p">}:</span>
            <span class="k">if</span> <span class="n">loc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Specifying &#39;loc&#39; is disallowed when any of &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;its corresponding low level keyword &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;arguments (</span><span class="si">{</span><span class="n">protected_kw</span><span class="si">}</span><span class="s2">) are also &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;supplied&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="p">(</span><span class="n">loc</span> <span class="k">if</span> <span class="n">loc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                   <span class="k">else</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xaxis.labellocation&#39;</span><span class="p">])</span>
            <span class="n">_api</span><span class="o">.</span><span class="n">check_in_list</span><span class="p">((</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">)</span>

            <span class="n">x</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s1">&#39;center&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
                <span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="p">}[</span><span class="n">loc</span><span class="p">]</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="n">loc</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_text</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontdict</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">invert_xaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Invert the x-axis.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        xaxis_inverted</span>
<span class="sd">        get_xlim, set_xlim</span>
<span class="sd">        get_xbound, set_xbound</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_inverted</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_inverted</span><span class="p">())</span>

    <span class="n">xaxis_inverted</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_inverted&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xbound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the lower and upper x-axis bounds, in increasing order.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        set_xbound</span>
<span class="sd">        get_xlim, set_xlim</span>
<span class="sd">        invert_xaxis, xaxis_inverted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">right</span><span class="p">,</span> <span class="n">left</span>

    <span class="k">def</span> <span class="nf">set_xbound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the lower and upper numerical bounds of the x-axis.</span>

<span class="sd">        This method will honor axis inversion regardless of parameter order.</span>
<span class="sd">        It will not change the autoscaling setting (`.get_autoscalex_on()`).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        lower, upper : float or None</span>
<span class="sd">            The lower and upper bounds. If *None*, the respective axis bound</span>
<span class="sd">            is not modified.</span>

<span class="sd">            .. ACCEPTS: (lower: float, upper: float)</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        get_xbound</span>
<span class="sd">        get_xlim, set_xlim</span>
<span class="sd">        invert_xaxis, xaxis_inverted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">lower</span><span class="p">):</span>
            <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">lower</span>

        <span class="n">old_lower</span><span class="p">,</span> <span class="n">old_upper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">lower</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="n">old_lower</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="n">old_upper</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="nb">sorted</span><span class="p">((</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">),</span>
                             <span class="n">reverse</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis_inverted</span><span class="p">())),</span>
                      <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the x-axis view limits.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        left, right : (float, float)</span>
<span class="sd">            The current x-axis limits in data coordinates.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        .Axes.set_xlim</span>
<span class="sd">        .Axes.set_xbound, .Axes.get_xbound</span>
<span class="sd">        .Axes.invert_xaxis, .Axes.xaxis_inverted</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The x-axis may be inverted, in which case the *left* value will</span>
<span class="sd">        be greater than the *right* value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_validate_converted_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">convert</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Raise ValueError if converted limits are non-finite.</span>

<span class="sd">        Note that this function also accepts None as a limit argument.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        The limit value after call to convert(), or None if limit is None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">converted_limit</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">converted_limit</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
                <span class="n">converted_limit</span> <span class="o">=</span> <span class="n">converted_limit</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">converted_limit</span><span class="p">,</span> <span class="n">Real</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">converted_limit</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Axis limits cannot be NaN or Inf&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">converted_limit</span>

    <span class="k">def</span> <span class="nf">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">xmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the x-axis view limits.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        left : float, optional</span>
<span class="sd">            The left xlim in data coordinates. Passing *None* leaves the</span>
<span class="sd">            limit unchanged.</span>

<span class="sd">            The left and right xlims may also be passed as the tuple</span>
<span class="sd">            (*left*, *right*) as the first positional argument (or as</span>
<span class="sd">            the *left* keyword argument).</span>

<span class="sd">            .. ACCEPTS: (left: float, right: float)</span>

<span class="sd">        right : float, optional</span>
<span class="sd">            The right xlim in data coordinates. Passing *None* leaves the</span>
<span class="sd">            limit unchanged.</span>

<span class="sd">        emit : bool, default: True</span>
<span class="sd">            Whether to notify observers of limit change.</span>

<span class="sd">        auto : bool or None, default: False</span>
<span class="sd">            Whether to turn on autoscaling of the x-axis. True turns on,</span>
<span class="sd">            False turns off, None leaves unchanged.</span>

<span class="sd">        xmin, xmax : float, optional</span>
<span class="sd">            They are equivalent to left and right respectively, and it is an</span>
<span class="sd">            error to pass both *xmin* and *left* or *xmax* and *right*.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        left, right : (float, float)</span>
<span class="sd">            The new x-axis limits in data coordinates.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        get_xlim</span>
<span class="sd">        set_xbound, get_xbound</span>
<span class="sd">        invert_xaxis, xaxis_inverted</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The *left* value may be greater than the *right* value, in which</span>
<span class="sd">        case the x-axis values will decrease from left to right.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; set_xlim(left, right)</span>
<span class="sd">        &gt;&gt;&gt; set_xlim((left, right))</span>
<span class="sd">        &gt;&gt;&gt; left, right = set_xlim(left, right)</span>

<span class="sd">        One limit may be left unchanged.</span>

<span class="sd">        &gt;&gt;&gt; set_xlim(right=right_lim)</span>

<span class="sd">        Limits may be passed in reverse order to flip the direction of</span>
<span class="sd">        the x-axis. For example, suppose *x* represents the number of</span>
<span class="sd">        years before present. The x-axis limits might be set like the</span>
<span class="sd">        following so 5000 years ago is on the left of the plot and the</span>
<span class="sd">        present is on the right.</span>

<span class="sd">        &gt;&gt;&gt; set_xlim(5000, 0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">left</span><span class="p">):</span>
            <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">left</span>
        <span class="k">if</span> <span class="n">xmin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">left</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot pass both &#39;left&#39; and &#39;xmin&#39;&quot;</span><span class="p">)</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">xmin</span>
        <span class="k">if</span> <span class="n">xmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot pass both &#39;right&#39; and &#39;xmax&#39;&quot;</span><span class="p">)</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">xmax</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">_set_lim</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>

    <span class="n">get_xscale</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_scale&quot;</span><span class="p">)</span>
    <span class="n">set_xscale</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;_set_axes_scale&quot;</span><span class="p">)</span>
    <span class="n">get_xticks</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklocs&quot;</span><span class="p">)</span>
    <span class="n">set_xticks</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;set_ticks&quot;</span><span class="p">,</span>
                                      <span class="n">doc_sub</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;set_ticks&#39;</span><span class="p">:</span> <span class="s1">&#39;set_xticks&#39;</span><span class="p">})</span>
    <span class="n">get_xmajorticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_majorticklabels&quot;</span><span class="p">)</span>
    <span class="n">get_xminorticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_minorticklabels&quot;</span><span class="p">)</span>
    <span class="n">get_xticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklabels&quot;</span><span class="p">)</span>
    <span class="n">set_xticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span>
        <span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;set_ticklabels&quot;</span><span class="p">,</span>
        <span class="n">doc_sub</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Axis.set_ticks&quot;</span><span class="p">:</span> <span class="s2">&quot;Axes.set_xticks&quot;</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">get_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the ylabel text string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">label</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                   <span class="n">loc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the label for the y-axis.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ylabel : str</span>
<span class="sd">            The label text.</span>

<span class="sd">        labelpad : float, default: :rc:`axes.labelpad`</span>
<span class="sd">            Spacing in points from the Axes bounding box including ticks</span>
<span class="sd">            and tick labels.  If None, the previous value is left as is.</span>

<span class="sd">        loc : {&#39;bottom&#39;, &#39;center&#39;, &#39;top&#39;}, default: :rc:`yaxis.labellocation`</span>
<span class="sd">            The label position. This is a high-level alternative for passing</span>
<span class="sd">            parameters *y* and *horizontalalignment*.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>
<span class="sd">        **kwargs : `~matplotlib.text.Text` properties</span>
<span class="sd">            `.Text` properties control the appearance of the label.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        text : Documents the properties supported by `.Text`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">labelpad</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">labelpad</span> <span class="o">=</span> <span class="n">labelpad</span>
        <span class="n">protected_kw</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;horizontalalignment&#39;</span><span class="p">,</span> <span class="s1">&#39;ha&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">{</span><span class="o">*</span><span class="n">kwargs</span><span class="p">}</span> <span class="o">&amp;</span> <span class="p">{</span><span class="o">*</span><span class="n">protected_kw</span><span class="p">}:</span>
            <span class="k">if</span> <span class="n">loc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Specifying &#39;loc&#39; is disallowed when any of &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;its corresponding low level keyword &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;arguments (</span><span class="si">{</span><span class="n">protected_kw</span><span class="si">}</span><span class="s2">) are also &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;supplied&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">loc</span> <span class="o">=</span> <span class="p">(</span><span class="n">loc</span> <span class="k">if</span> <span class="n">loc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                   <span class="k">else</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;yaxis.labellocation&#39;</span><span class="p">])</span>
            <span class="n">_api</span><span class="o">.</span><span class="n">check_in_list</span><span class="p">((</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">)</span>

            <span class="n">y</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;bottom&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">),</span>
                <span class="s1">&#39;center&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">),</span>
                <span class="s1">&#39;top&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>
            <span class="p">}[</span><span class="n">loc</span><span class="p">]</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="n">ha</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_text</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontdict</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">invert_yaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Invert the y-axis.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        yaxis_inverted</span>
<span class="sd">        get_ylim, set_ylim</span>
<span class="sd">        get_ybound, set_ybound</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_inverted</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_inverted</span><span class="p">())</span>

    <span class="n">yaxis_inverted</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_inverted&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_ybound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the lower and upper y-axis bounds, in increasing order.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        set_ybound</span>
<span class="sd">        get_ylim, set_ylim</span>
<span class="sd">        invert_yaxis, yaxis_inverted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">bottom</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">top</span><span class="p">,</span> <span class="n">bottom</span>

    <span class="k">def</span> <span class="nf">set_ybound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the lower and upper numerical bounds of the y-axis.</span>

<span class="sd">        This method will honor axis inversion regardless of parameter order.</span>
<span class="sd">        It will not change the autoscaling setting (`.get_autoscaley_on()`).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        lower, upper : float or None</span>
<span class="sd">            The lower and upper bounds. If *None*, the respective axis bound</span>
<span class="sd">            is not modified.</span>

<span class="sd">         .. ACCEPTS: (lower: float, upper: float)</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        get_ybound</span>
<span class="sd">        get_ylim, set_ylim</span>
<span class="sd">        invert_yaxis, yaxis_inverted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">lower</span><span class="p">):</span>
            <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span> <span class="o">=</span> <span class="n">lower</span>

        <span class="n">old_lower</span><span class="p">,</span> <span class="n">old_upper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">lower</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lower</span> <span class="o">=</span> <span class="n">old_lower</span>
        <span class="k">if</span> <span class="n">upper</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">upper</span> <span class="o">=</span> <span class="n">old_upper</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="nb">sorted</span><span class="p">((</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">),</span>
                             <span class="n">reverse</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis_inverted</span><span class="p">())),</span>
                      <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_ylim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the y-axis view limits.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bottom, top : (float, float)</span>
<span class="sd">            The current y-axis limits in data coordinates.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        .Axes.set_ylim</span>
<span class="sd">        .Axes.set_ybound, .Axes.get_ybound</span>
<span class="sd">        .Axes.invert_yaxis, .Axes.yaxis_inverted</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The y-axis may be inverted, in which case the *bottom* value</span>
<span class="sd">        will be greater than the *top* value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervaly</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">ymin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the y-axis view limits.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bottom : float, optional</span>
<span class="sd">            The bottom ylim in data coordinates. Passing *None* leaves the</span>
<span class="sd">            limit unchanged.</span>

<span class="sd">            The bottom and top ylims may also be passed as the tuple</span>
<span class="sd">            (*bottom*, *top*) as the first positional argument (or as</span>
<span class="sd">            the *bottom* keyword argument).</span>

<span class="sd">            .. ACCEPTS: (bottom: float, top: float)</span>

<span class="sd">        top : float, optional</span>
<span class="sd">            The top ylim in data coordinates. Passing *None* leaves the</span>
<span class="sd">            limit unchanged.</span>

<span class="sd">        emit : bool, default: True</span>
<span class="sd">            Whether to notify observers of limit change.</span>

<span class="sd">        auto : bool or None, default: False</span>
<span class="sd">            Whether to turn on autoscaling of the y-axis. *True* turns on,</span>
<span class="sd">            *False* turns off, *None* leaves unchanged.</span>

<span class="sd">        ymin, ymax : float, optional</span>
<span class="sd">            They are equivalent to bottom and top respectively, and it is an</span>
<span class="sd">            error to pass both *ymin* and *bottom* or *ymax* and *top*.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bottom, top : (float, float)</span>
<span class="sd">            The new y-axis limits in data coordinates.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        get_ylim</span>
<span class="sd">        set_ybound, get_ybound</span>
<span class="sd">        invert_yaxis, yaxis_inverted</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The *bottom* value may be greater than the *top* value, in which</span>
<span class="sd">        case the y-axis values will decrease from *bottom* to *top*.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; set_ylim(bottom, top)</span>
<span class="sd">        &gt;&gt;&gt; set_ylim((bottom, top))</span>
<span class="sd">        &gt;&gt;&gt; bottom, top = set_ylim(bottom, top)</span>

<span class="sd">        One limit may be left unchanged.</span>

<span class="sd">        &gt;&gt;&gt; set_ylim(top=top_lim)</span>

<span class="sd">        Limits may be passed in reverse order to flip the direction of</span>
<span class="sd">        the y-axis. For example, suppose ``y`` represents depth of the</span>
<span class="sd">        ocean in m. The y-axis limits might be set like the following</span>
<span class="sd">        so 5000 m depth is at the bottom of the plot and the surface,</span>
<span class="sd">        0 m, is at the top.</span>

<span class="sd">        &gt;&gt;&gt; set_ylim(5000, 0)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">iterable</span><span class="p">(</span><span class="n">bottom</span><span class="p">):</span>
            <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="n">bottom</span>
        <span class="k">if</span> <span class="n">ymin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">bottom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot pass both &#39;bottom&#39; and &#39;ymin&#39;&quot;</span><span class="p">)</span>
            <span class="n">bottom</span> <span class="o">=</span> <span class="n">ymin</span>
        <span class="k">if</span> <span class="n">ymax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot pass both &#39;top&#39; and &#39;ymax&#39;&quot;</span><span class="p">)</span>
            <span class="n">top</span> <span class="o">=</span> <span class="n">ymax</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">_set_lim</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">)</span>

    <span class="n">get_yscale</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_scale&quot;</span><span class="p">)</span>
    <span class="n">set_yscale</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;_set_axes_scale&quot;</span><span class="p">)</span>
    <span class="n">get_yticks</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklocs&quot;</span><span class="p">)</span>
    <span class="n">set_yticks</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;set_ticks&quot;</span><span class="p">,</span>
                                      <span class="n">doc_sub</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;set_ticks&#39;</span><span class="p">:</span> <span class="s1">&#39;set_yticks&#39;</span><span class="p">})</span>
    <span class="n">get_ymajorticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_majorticklabels&quot;</span><span class="p">)</span>
    <span class="n">get_yminorticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_minorticklabels&quot;</span><span class="p">)</span>
    <span class="n">get_yticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;get_ticklabels&quot;</span><span class="p">)</span>
    <span class="n">set_yticklabels</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span>
        <span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;set_ticklabels&quot;</span><span class="p">,</span>
        <span class="n">doc_sub</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Axis.set_ticks&quot;</span><span class="p">:</span> <span class="s2">&quot;Axes.set_yticks&quot;</span><span class="p">})</span>

    <span class="n">xaxis_date</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;xaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;axis_date&quot;</span><span class="p">)</span>
    <span class="n">yaxis_date</span> <span class="o">=</span> <span class="n">_axis_method_wrapper</span><span class="p">(</span><span class="s2">&quot;yaxis&quot;</span><span class="p">,</span> <span class="s2">&quot;axis_date&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_xdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *x* formatted as an x-value.</span>

<span class="sd">        This function will use the `.fmt_xdata` attribute if it is not None,</span>
<span class="sd">        else will fall back on the xaxis major formatter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt_xdata</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_xdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">format_data_short</span><span class="p">)(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_ydata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return *y* formatted as a y-value.</span>

<span class="sd">        This function will use the `.fmt_ydata` attribute if it is not None,</span>
<span class="sd">        else will fall back on the yaxis major formatter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fmt_ydata</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmt_ydata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">format_data_short</span><span class="p">)(</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a format string formatting the *x*, *y* coordinates.&quot;&quot;&quot;</span>
        <span class="n">twins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">twins</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;(x, y) = (</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;???&quot;</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_xdata</span><span class="p">(</span><span class="n">x</span><span class="p">),</span>
                <span class="s2">&quot;???&quot;</span> <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_ydata</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
        <span class="n">screen_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="n">xy_strs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Retrieve twins in the order of self.figure.axes to sort tied zorders (which is</span>
        <span class="c1"># the common case) by the order in which they are added to the figure.</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">twins</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">attrgetter</span><span class="p">(</span><span class="s2">&quot;zorder&quot;</span><span class="p">)):</span>
            <span class="n">data_x</span><span class="p">,</span> <span class="n">data_y</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">screen_xy</span><span class="p">)</span>
            <span class="n">xy_strs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="s2">&quot;(</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">format_xdata</span><span class="p">(</span><span class="n">data_x</span><span class="p">),</span> <span class="n">ax</span><span class="o">.</span><span class="n">format_ydata</span><span class="p">(</span><span class="n">data_y</span><span class="p">)))</span>
        <span class="k">return</span> <span class="s2">&quot;(x, y) = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot; | &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">xy_strs</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">minorticks_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display minor ticks on the Axes.</span>

<span class="sd">        Displaying minor ticks may reduce performance; you may turn them off</span>
<span class="sd">        using `minorticks_off()` if drawing speed is a problem.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">minorticks_on</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minorticks_on</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">minorticks_off</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove minor ticks from the Axes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">minorticks_off</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minorticks_off</span><span class="p">()</span>

    <span class="c1"># Interactive manipulation</span>

    <span class="k">def</span> <span class="nf">can_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether this Axes supports the zoom box button functionality.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">can_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether this Axes supports any pan/zoom button functionality.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">get_navigate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get whether the Axes responds to navigation commands.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_navigate</span>

    <span class="k">def</span> <span class="nf">set_navigate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set whether the Axes responds to navigation toolbar commands.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        b : bool</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_forward_navigation_events</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_navigate</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">get_navigate_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the navigation toolbar button status: &#39;PAN&#39;, &#39;ZOOM&#39;, or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_navigate_mode</span>

    <span class="k">def</span> <span class="nf">set_navigate_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the navigation toolbar button status.</span>

<span class="sd">        .. warning::</span>
<span class="sd">            This is not a user-API function.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_navigate_mode</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">_get_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save information required to reproduce the current view.</span>

<span class="sd">        This method is called before a view is changed, such as during a pan or zoom</span>
<span class="sd">        initiated by the user.  It returns an opaque object that describes the current</span>
<span class="sd">        view, in a format compatible with :meth:`_set_view`.</span>

<span class="sd">        The default implementation saves the view limits and autoscaling state.</span>
<span class="sd">        Subclasses may override this as needed, as long as :meth:`_set_view` is also</span>
<span class="sd">        adjusted accordingly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;xlim&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">(),</span> <span class="s2">&quot;autoscalex_on&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_autoscalex_on</span><span class="p">(),</span>
            <span class="s2">&quot;ylim&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">(),</span> <span class="s2">&quot;autoscaley_on&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_autoscaley_on</span><span class="p">(),</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_set_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply a previously saved view.</span>

<span class="sd">        This method is called when restoring a view (with the return value of</span>
<span class="sd">        :meth:`_get_view` as argument), such as with the navigation buttons.</span>

<span class="sd">        Subclasses that override :meth:`_get_view` also need to override this method</span>
<span class="sd">        accordingly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="n">view</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_prepare_view_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">,</span>
                                <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">twinx</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">twiny</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to prepare the new bounds from a bbox.</span>

<span class="sd">        This helper function returns the new x and y bounds from the zoom</span>
<span class="sd">        bbox. This a convenience method to abstract the bbox logic</span>
<span class="sd">        out of the base setter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span><span class="p">,</span> <span class="n">scl</span> <span class="o">=</span> <span class="n">bbox</span>  <span class="c1"># Zooming code</span>
            <span class="k">if</span> <span class="n">scl</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Should not happen</span>
                <span class="n">scl</span> <span class="o">=</span> <span class="mf">1.</span>
            <span class="k">if</span> <span class="n">scl</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;in&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;out&#39;</span>
                <span class="n">scl</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">scl</span>
            <span class="c1"># get the limits of the axes</span>
            <span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">),</span> <span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()]))</span>
            <span class="c1"># set the range</span>
            <span class="n">xwidth</span> <span class="o">=</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span>
            <span class="n">ywidth</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span>
            <span class="n">xcen</span> <span class="o">=</span> <span class="p">(</span><span class="n">xmax</span> <span class="o">+</span> <span class="n">xmin</span><span class="p">)</span><span class="o">*</span><span class="mf">.5</span>
            <span class="n">ycen</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymax</span> <span class="o">+</span> <span class="n">ymin</span><span class="p">)</span><span class="o">*</span><span class="mf">.5</span>
            <span class="n">xzc</span> <span class="o">=</span> <span class="p">(</span><span class="n">xp</span><span class="o">*</span><span class="p">(</span><span class="n">scl</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">xcen</span><span class="p">)</span><span class="o">/</span><span class="n">scl</span>
            <span class="n">yzc</span> <span class="o">=</span> <span class="p">(</span><span class="n">yp</span><span class="o">*</span><span class="p">(</span><span class="n">scl</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">ycen</span><span class="p">)</span><span class="o">/</span><span class="n">scl</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="p">[</span><span class="n">xzc</span> <span class="o">-</span> <span class="n">xwidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">,</span> <span class="n">yzc</span> <span class="o">-</span> <span class="n">ywidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">,</span>
                    <span class="n">xzc</span> <span class="o">+</span> <span class="n">xwidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">,</span> <span class="n">yzc</span> <span class="o">+</span> <span class="n">ywidth</span><span class="o">/</span><span class="mf">2.</span><span class="o">/</span><span class="n">scl</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="c1"># should be len 3 or 4 but nothing else</span>
            <span class="n">_api</span><span class="o">.</span><span class="n">warn_external</span><span class="p">(</span>
                <span class="s2">&quot;Warning in _set_view_from_bbox: bounding box is not a tuple &quot;</span>
                <span class="s2">&quot;of length 3 or 4. Ignoring the view change.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Original limits.</span>
        <span class="n">xmin0</span><span class="p">,</span> <span class="n">xmax0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xbound</span><span class="p">()</span>
        <span class="n">ymin0</span><span class="p">,</span> <span class="n">ymax0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ybound</span><span class="p">()</span>
        <span class="c1"># The zoom box in screen coords.</span>
        <span class="n">startx</span><span class="p">,</span> <span class="n">starty</span><span class="p">,</span> <span class="n">stopx</span><span class="p">,</span> <span class="n">stopy</span> <span class="o">=</span> <span class="n">bbox</span>
        <span class="c1"># Convert to data coords.</span>
        <span class="p">(</span><span class="n">startx</span><span class="p">,</span> <span class="n">starty</span><span class="p">),</span> <span class="p">(</span><span class="n">stopx</span><span class="p">,</span> <span class="n">stopy</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
            <span class="p">[(</span><span class="n">startx</span><span class="p">,</span> <span class="n">starty</span><span class="p">),</span> <span class="p">(</span><span class="n">stopx</span><span class="p">,</span> <span class="n">stopy</span><span class="p">)])</span>
        <span class="c1"># Clip to axes limits.</span>
        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">startx</span><span class="p">,</span> <span class="n">stopx</span><span class="p">]),</span> <span class="n">xmin0</span><span class="p">,</span> <span class="n">xmax0</span><span class="p">)</span>
        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">starty</span><span class="p">,</span> <span class="n">stopy</span><span class="p">]),</span> <span class="n">ymin0</span><span class="p">,</span> <span class="n">ymax0</span><span class="p">)</span>
        <span class="c1"># Don&#39;t double-zoom twinned axes or if zooming only the other axis.</span>
        <span class="k">if</span> <span class="n">twinx</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
            <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmin0</span><span class="p">,</span> <span class="n">xmax0</span>
        <span class="k">if</span> <span class="n">twiny</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span>
            <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">ymin0</span><span class="p">,</span> <span class="n">ymax0</span>

        <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;in&quot;</span><span class="p">:</span>
            <span class="n">new_xbound</span> <span class="o">=</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span>
            <span class="n">new_ybound</span> <span class="o">=</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span>

        <span class="k">elif</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;out&quot;</span><span class="p">:</span>
            <span class="n">x_trf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
            <span class="n">sxmin0</span><span class="p">,</span> <span class="n">sxmax0</span><span class="p">,</span> <span class="n">sxmin</span><span class="p">,</span> <span class="n">sxmax</span> <span class="o">=</span> <span class="n">x_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                <span class="p">[</span><span class="n">xmin0</span><span class="p">,</span> <span class="n">xmax0</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">])</span>  <span class="c1"># To screen space.</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="p">(</span><span class="n">sxmax0</span> <span class="o">-</span> <span class="n">sxmin0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">sxmax</span> <span class="o">-</span> <span class="n">sxmin</span><span class="p">)</span>  <span class="c1"># Unzoom factor.</span>
            <span class="c1"># Move original bounds away by</span>
            <span class="c1"># (factor) x (distance between unzoom box and Axes bbox).</span>
            <span class="n">sxmin1</span> <span class="o">=</span> <span class="n">sxmin0</span> <span class="o">-</span> <span class="n">factor</span> <span class="o">*</span> <span class="p">(</span><span class="n">sxmin</span> <span class="o">-</span> <span class="n">sxmin0</span><span class="p">)</span>
            <span class="n">sxmax1</span> <span class="o">=</span> <span class="n">sxmax0</span> <span class="o">+</span> <span class="n">factor</span> <span class="o">*</span> <span class="p">(</span><span class="n">sxmax0</span> <span class="o">-</span> <span class="n">sxmax</span><span class="p">)</span>
            <span class="c1"># And back to data space.</span>
            <span class="n">new_xbound</span> <span class="o">=</span> <span class="n">x_trf</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">sxmin1</span><span class="p">,</span> <span class="n">sxmax1</span><span class="p">])</span>

            <span class="n">y_trf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
            <span class="n">symin0</span><span class="p">,</span> <span class="n">symax0</span><span class="p">,</span> <span class="n">symin</span><span class="p">,</span> <span class="n">symax</span> <span class="o">=</span> <span class="n">y_trf</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                <span class="p">[</span><span class="n">ymin0</span><span class="p">,</span> <span class="n">ymax0</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">])</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="p">(</span><span class="n">symax0</span> <span class="o">-</span> <span class="n">symin0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">symax</span> <span class="o">-</span> <span class="n">symin</span><span class="p">)</span>
            <span class="n">symin1</span> <span class="o">=</span> <span class="n">symin0</span> <span class="o">-</span> <span class="n">factor</span> <span class="o">*</span> <span class="p">(</span><span class="n">symin</span> <span class="o">-</span> <span class="n">symin0</span><span class="p">)</span>
            <span class="n">symax1</span> <span class="o">=</span> <span class="n">symax0</span> <span class="o">+</span> <span class="n">factor</span> <span class="o">*</span> <span class="p">(</span><span class="n">symax0</span> <span class="o">-</span> <span class="n">symax</span><span class="p">)</span>
            <span class="n">new_ybound</span> <span class="o">=</span> <span class="n">y_trf</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="n">symin1</span><span class="p">,</span> <span class="n">symax1</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">new_xbound</span><span class="p">,</span> <span class="n">new_ybound</span>

    <span class="k">def</span> <span class="nf">_set_view_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">,</span>
                            <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">twinx</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">twiny</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update view from a selection bbox.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Intended to be overridden by new projection types, but if not, the</span>
<span class="sd">            default implementation sets the view limits to the bbox directly.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bbox : 4-tuple or 3 tuple</span>
<span class="sd">            * If bbox is a 4 tuple, it is the selected bounding box limits,</span>
<span class="sd">              in *display* coordinates.</span>
<span class="sd">            * If bbox is a 3 tuple, it is an (xp, yp, scl) triple, where</span>
<span class="sd">              (xp, yp) is the center of zooming and scl the scale factor to</span>
<span class="sd">              zoom by.</span>

<span class="sd">        direction : str</span>
<span class="sd">            The direction to apply the bounding box.</span>
<span class="sd">                * `&#39;in&#39;` - The bounding box describes the view directly, i.e.,</span>
<span class="sd">                           it zooms in.</span>
<span class="sd">                * `&#39;out&#39;` - The bounding box describes the size to make the</span>
<span class="sd">                            existing view, i.e., it zooms out.</span>

<span class="sd">        mode : str or None</span>
<span class="sd">            The selection mode, whether to apply the bounding box in only the</span>
<span class="sd">            `&#39;x&#39;` direction, `&#39;y&#39;` direction or both (`None`).</span>

<span class="sd">        twinx : bool</span>
<span class="sd">            Whether this axis is twinned in the *x*-direction.</span>

<span class="sd">        twiny : bool</span>
<span class="sd">            Whether this axis is twinned in the *y*-direction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_xbound</span><span class="p">,</span> <span class="n">new_ybound</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_view_from_bbox</span><span class="p">(</span>
            <span class="n">bbox</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="n">twinx</span><span class="o">=</span><span class="n">twinx</span><span class="p">,</span> <span class="n">twiny</span><span class="o">=</span><span class="n">twiny</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">twinx</span> <span class="ow">and</span> <span class="n">mode</span> <span class="o">!=</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xbound</span><span class="p">(</span><span class="n">new_xbound</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscalex_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">twiny</span> <span class="ow">and</span> <span class="n">mode</span> <span class="o">!=</span> <span class="s2">&quot;x&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ybound</span><span class="p">(</span><span class="n">new_ybound</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_autoscaley_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">start_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when a pan operation has started.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x, y : float</span>
<span class="sd">            The mouse coordinates in display coords.</span>
<span class="sd">        button : `.MouseButton`</span>
<span class="sd">            The pressed mouse button.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This is intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">SimpleNamespace</span><span class="p">(</span>
            <span class="n">lim</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">trans</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">trans_inverse</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">bbox</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">end_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when a pan operation completes (when the mouse button is up.)</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This is intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span>

    <span class="k">def</span> <span class="nf">_get_pan_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to return the new points after a pan.</span>

<span class="sd">        This helper function returns the points on the axis after a pan has</span>
<span class="sd">        occurred. This is a convenience method to abstract the pan logic</span>
<span class="sd">        out of the base setter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;control&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="n">dx</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dy</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;shift&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">):</span>
                    <span class="n">dy</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">/</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span>

        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span>
        <span class="k">if</span> <span class="n">dx</span> <span class="o">==</span> <span class="n">dy</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">translated</span><span class="p">(</span><span class="o">-</span><span class="n">dx</span><span class="p">,</span> <span class="o">-</span><span class="n">dy</span><span class="p">)</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans_inverse</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">width</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">height</span>
                <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">format_deltas</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_aspect</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;auto&#39;</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">=</span> <span class="n">dy</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span>
                <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">))</span>
                <span class="n">start</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">])</span>
                <span class="n">oldpoints</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">lim</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans</span><span class="p">)</span>
                <span class="n">newpoints</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="n">oldpoints</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">(</span><span class="n">newpoints</span><span class="p">)</span>
                          <span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans_inverse</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">OverflowError</span><span class="p">:</span>
                <span class="n">_api</span><span class="o">.</span><span class="n">warn_external</span><span class="p">(</span><span class="s1">&#39;Overflow while panning&#39;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">valid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">trans</span><span class="p">))</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get_points</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="c1"># Just ignore invalid limits (typically, underflow in log-scale).</span>
        <span class="n">points</span><span class="p">[</span><span class="o">~</span><span class="n">valid</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">points</span>

    <span class="k">def</span> <span class="nf">drag_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when the mouse moves during a pan operation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        button : `.MouseButton`</span>
<span class="sd">            The pressed mouse button.</span>
<span class="sd">        key : str or None</span>
<span class="sd">            The pressed key, if any.</span>
<span class="sd">        x, y : float</span>
<span class="sd">            The mouse coordinates in display coords.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This is intended to be overridden by new projection types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pan_points</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">points</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">points</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">points</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">get_children</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># docstring inherited.</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">,</span>
            <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">child_axes</span><span class="p">,</span>
            <span class="o">*</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">legend_</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[]),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouseevent</span><span class="p">):</span>
        <span class="c1"># docstring inherited.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">mouseevent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">contains_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether *point* (pair of pixel coordinates) is inside the Axes</span>
<span class="sd">        patch.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">contains_point</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_default_bbox_extra_artists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a default list of artists that are used for the bounding box</span>
<span class="sd">        calculation.</span>

<span class="sd">        Artists are excluded either by not being visible or</span>
<span class="sd">        ``artist.set_in_layout(False)``.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="c1"># axis tight bboxes are calculated separately inside</span>
            <span class="c1"># Axes.get_tightbbox() using for_layout_only=True</span>
            <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frameon</span><span class="p">):</span>
            <span class="c1"># don&#39;t do bbox on spines if frame not on.</span>
            <span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">spine</span><span class="p">)</span>

        <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">)</span>
        <span class="n">artists</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">)</span>

        <span class="c1"># always include types that do not internally implement clipping</span>
        <span class="c1"># to Axes. may have clip_on set to True and clip_box equivalent</span>
        <span class="c1"># to ax.bbox but then ignore these properties during draws.</span>
        <span class="n">noclip</span> <span class="o">=</span> <span class="p">(</span><span class="n">_AxesBase</span><span class="p">,</span> <span class="n">maxis</span><span class="o">.</span><span class="n">Axis</span><span class="p">,</span>
                  <span class="n">offsetbox</span><span class="o">.</span><span class="n">AnnotationBbox</span><span class="p">,</span> <span class="n">offsetbox</span><span class="o">.</span><span class="n">OffsetBox</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">artists</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">get_visible</span><span class="p">()</span> <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">get_in_layout</span><span class="p">()</span>
                <span class="ow">and</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">noclip</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">_fully_clipped_to_axes</span><span class="p">())]</span>

    <span class="nd">@_api</span><span class="o">.</span><span class="n">make_keyword_only</span><span class="p">(</span><span class="s2">&quot;3.8&quot;</span><span class="p">,</span> <span class="s2">&quot;call_axes_locator&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_tightbbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">call_axes_locator</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                      <span class="n">bbox_extra_artists</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">for_layout_only</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the tight bounding box of the Axes, including axis and their</span>
<span class="sd">        decorators (xlabel, title, etc).</span>

<span class="sd">        Artists that have ``artist.set_in_layout(False)`` are not included</span>
<span class="sd">        in the bbox.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        renderer : `.RendererBase` subclass</span>
<span class="sd">            renderer that will be used to draw the figures (i.e.</span>
<span class="sd">            ``fig.canvas.get_renderer()``)</span>

<span class="sd">        bbox_extra_artists : list of `.Artist` or ``None``</span>
<span class="sd">            List of artists to include in the tight bounding box.  If</span>
<span class="sd">            ``None`` (default), then all artist children of the Axes are</span>
<span class="sd">            included in the tight bounding box.</span>

<span class="sd">        call_axes_locator : bool, default: True</span>
<span class="sd">            If *call_axes_locator* is ``False``, it does not call the</span>
<span class="sd">            ``_axes_locator`` attribute, which is necessary to get the correct</span>
<span class="sd">            bounding box. ``call_axes_locator=False`` can be used if the</span>
<span class="sd">            caller is only interested in the relative size of the tightbbox</span>
<span class="sd">            compared to the Axes bbox.</span>

<span class="sd">        for_layout_only : default: False</span>
<span class="sd">            The bounding box will *not* include the x-extent of the title and</span>
<span class="sd">            the xlabel, or the y-extent of the ylabel.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        `.BboxBase`</span>
<span class="sd">            Bounding box in figure pixel coordinates.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.get_window_extent</span>
<span class="sd">        matplotlib.axis.Axis.get_tightbbox</span>
<span class="sd">        matplotlib.spines.Spine.get_window_extent</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">bb</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">renderer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">renderer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">_get_renderer</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">locator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_locator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply_aspect</span><span class="p">(</span>
            <span class="n">locator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span> <span class="k">if</span> <span class="n">locator</span> <span class="ow">and</span> <span class="n">call_axes_locator</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">axis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis_map</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axison</span> <span class="ow">and</span> <span class="n">axis</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="n">ba</span> <span class="o">=</span> <span class="n">martist</span><span class="o">.</span><span class="n">_get_tightbbox_for_layout_only</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ba</span><span class="p">:</span>
                    <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ba</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_title_position</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="n">axbbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">axbbox</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left_title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_title</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">title</span><span class="o">.</span><span class="n">get_visible</span><span class="p">():</span>
                <span class="n">bt</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">for_layout_only</span> <span class="ow">and</span> <span class="n">bt</span><span class="o">.</span><span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># make the title bbox 1 pixel wide so its width</span>
                    <span class="c1"># is not accounted for in bbox calculations in</span>
                    <span class="c1"># tight/constrained_layout</span>
                    <span class="n">bt</span><span class="o">.</span><span class="n">x0</span> <span class="o">=</span> <span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">x0</span> <span class="o">+</span> <span class="n">bt</span><span class="o">.</span><span class="n">x1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mf">0.5</span>
                    <span class="n">bt</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="n">bt</span><span class="o">.</span><span class="n">x0</span> <span class="o">+</span> <span class="mf">1.0</span>
                <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bt</span><span class="p">)</span>

        <span class="n">bbox_artists</span> <span class="o">=</span> <span class="n">bbox_extra_artists</span>
        <span class="k">if</span> <span class="n">bbox_artists</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">bbox_artists</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_default_bbox_extra_artists</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">bbox_artists</span><span class="p">:</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get_tightbbox</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">bbox</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">bbox</span><span class="o">.</span><span class="n">width</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
                    <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">bbox</span><span class="o">.</span><span class="n">height</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">):</span>
                <span class="n">bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="o">.</span><span class="n">union</span><span class="p">(</span>
            <span class="p">[</span><span class="n">b</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bb</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">width</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_make_twin_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make a twinx Axes of self. This is used for twinx and twiny.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;sharex&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="s1">&#39;sharey&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="c1"># The following line is added in v2.2 to avoid breaking Seaborn,</span>
            <span class="c1"># which currently uses this internal API.</span>
            <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sharex&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sharey&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Twinned Axes may share only one axis&quot;</span><span class="p">)</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_subplotspec</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ss</span><span class="p">:</span>
            <span class="n">twin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">twin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">(</span><span class="kc">True</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="n">axes_locator</span><span class="o">=</span><span class="n">_TransformedBoundsLocator</span><span class="p">(</span>
                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="s1">&#39;datalim&#39;</span><span class="p">)</span>
        <span class="n">twin</span><span class="o">.</span><span class="n">set_adjustable</span><span class="p">(</span><span class="s1">&#39;datalim&#39;</span><span class="p">)</span>
        <span class="n">twin</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zorder</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_twinned_axes</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">twin</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">twin</span>

    <span class="k">def</span> <span class="nf">twinx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a twin Axes sharing the xaxis.</span>

<span class="sd">        Create a new Axes with an invisible x-axis and an independent</span>
<span class="sd">        y-axis positioned opposite to the original one (i.e. at right). The</span>
<span class="sd">        x-axis autoscale setting will be inherited from the original</span>
<span class="sd">        Axes.  To ensure that the tick marks of both y-axes align, see</span>
<span class="sd">        `~matplotlib.ticker.LinearLocator`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Axes</span>
<span class="sd">            The newly created Axes instance</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        For those who are &#39;picking&#39; artists while using twinx, pick</span>
<span class="sd">        events are only called for the artists in the top-most Axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_twin_axes</span><span class="p">(</span><span class="n">sharex</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_right</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_offset_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_autoscalex_on</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_autoscalex_on</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_left</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">units</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">twiny</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a twin Axes sharing the yaxis.</span>

<span class="sd">        Create a new Axes with an invisible y-axis and an independent</span>
<span class="sd">        x-axis positioned opposite to the original one (i.e. at top). The</span>
<span class="sd">        y-axis autoscale setting will be inherited from the original Axes.</span>
<span class="sd">        To ensure that the tick marks of both x-axes align, see</span>
<span class="sd">        `~matplotlib.ticker.LinearLocator`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Axes</span>
<span class="sd">            The newly created Axes instance</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        For those who are &#39;picking&#39; artists while using twiny, pick</span>
<span class="sd">        events are only called for the artists in the top-most Axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_twin_axes</span><span class="p">(</span><span class="n">sharey</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_top</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_autoscaley_on</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_autoscaley_on</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_bottom</span><span class="p">()</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">units</span>
        <span class="k">return</span> <span class="n">ax2</span>

    <span class="k">def</span> <span class="nf">get_shared_x_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an immutable view on the shared x-axes Grouper.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">GrouperView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">get_shared_y_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an immutable view on the shared y-axes Grouper.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cbook</span><span class="o">.</span><span class="n">GrouperView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shared_axes</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">label_outer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remove_inner_ticks</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Only show &quot;outer&quot; labels and tick labels.</span>

<span class="sd">        x-labels are only kept for subplots on the last row (or first row, if</span>
<span class="sd">        labels are on the top side); y-labels only for subplots on the first</span>
<span class="sd">        column (or last column, if labels are on the right side).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        remove_inner_ticks : bool, default: False</span>
<span class="sd">            If True, remove the inner ticks as well (not only tick labels).</span>

<span class="sd">            .. versionadded:: 3.8</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label_outer_xaxis</span><span class="p">(</span><span class="n">skip_non_rectangular_axes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                <span class="n">remove_inner_ticks</span><span class="o">=</span><span class="n">remove_inner_ticks</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label_outer_yaxis</span><span class="p">(</span><span class="n">skip_non_rectangular_axes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                <span class="n">remove_inner_ticks</span><span class="o">=</span><span class="n">remove_inner_ticks</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_label_outer_xaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">skip_non_rectangular_axes</span><span class="p">,</span>
                           <span class="n">remove_inner_ticks</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># see documentation in label_outer.</span>
        <span class="k">if</span> <span class="n">skip_non_rectangular_axes</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">,</span>
                                                        <span class="n">mpl</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_subplotspec</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ss</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">label_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_label_position</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ss</span><span class="o">.</span><span class="n">is_first_row</span><span class="p">():</span>  <span class="c1"># Remove top label/ticklabels/offsettext.</span>
            <span class="k">if</span> <span class="n">label_position</span> <span class="o">==</span> <span class="s2">&quot;top&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">top_kw</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;top&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span> <span class="k">if</span> <span class="n">remove_inner_ticks</span> <span class="k">else</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span>
                <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">labeltop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">top_kw</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">offsetText</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">offsetText</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ss</span><span class="o">.</span><span class="n">is_last_row</span><span class="p">():</span>  <span class="c1"># Remove bottom label/ticklabels/offsettext.</span>
            <span class="k">if</span> <span class="n">label_position</span> <span class="o">==</span> <span class="s2">&quot;bottom&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">bottom_kw</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bottom&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span> <span class="k">if</span> <span class="n">remove_inner_ticks</span> <span class="k">else</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span>
                <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">bottom_kw</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">offsetText</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">offsetText</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_label_outer_yaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">skip_non_rectangular_axes</span><span class="p">,</span>
                           <span class="n">remove_inner_ticks</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># see documentation in label_outer.</span>
        <span class="k">if</span> <span class="n">skip_non_rectangular_axes</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">,</span>
                                                        <span class="n">mpl</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_subplotspec</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ss</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">label_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_label_position</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ss</span><span class="o">.</span><span class="n">is_first_col</span><span class="p">():</span>  <span class="c1"># Remove left label/ticklabels/offsettext.</span>
            <span class="k">if</span> <span class="n">label_position</span> <span class="o">==</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">left_kw</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span> <span class="k">if</span> <span class="n">remove_inner_ticks</span> <span class="k">else</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span>
                <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">labelleft</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">left_kw</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">offsetText</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">offsetText</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ss</span><span class="o">.</span><span class="n">is_last_col</span><span class="p">():</span>  <span class="c1"># Remove right label/ticklabels/offsettext.</span>
            <span class="k">if</span> <span class="n">label_position</span> <span class="o">==</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">right_kw</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span> <span class="k">if</span> <span class="n">remove_inner_ticks</span> <span class="k">else</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span>
                <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">labelright</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">right_kw</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">offsetText</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">offsetText</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_forward_navigation_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">forward</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set how pan/zoom events are forwarded to Axes below this one.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        forward : bool or &quot;auto&quot;</span>
<span class="sd">            Possible values:</span>

<span class="sd">            - True: Forward events to other axes with lower or equal zorder.</span>
<span class="sd">            - False: Events are only executed on this axes.</span>
<span class="sd">            - &quot;auto&quot;: Default behaviour (*True* for axes with an invisible</span>
<span class="sd">              patch and *False* otherwise)</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        matplotlib.axes.Axes.set_navigate</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_forward_navigation_events</span> <span class="o">=</span> <span class="n">forward</span>

    <span class="k">def</span> <span class="nf">get_forward_navigation_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get how pan/zoom events are forwarded to Axes below this one.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_forward_navigation_events</span>


<span class="k">def</span> <span class="nf">_draw_rasterized</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">artists</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A helper function for rasterizing the list of artists.</span>

<span class="sd">    The bookkeeping to track if we are or are not in rasterizing mode</span>
<span class="sd">    with the mixed-mode backends is relatively complicated and is now</span>
<span class="sd">    handled in the matplotlib.artist.allow_rasterization decorator.</span>

<span class="sd">    This helper defines the absolute minimum methods and attributes on a</span>
<span class="sd">    shim class to be compatible with that decorator and then uses it to</span>
<span class="sd">    rasterize the list of artists.</span>

<span class="sd">    This is maybe too-clever, but allows us to reuse the same code that is</span>
<span class="sd">    used on normal artists to participate in the &quot;are we rasterizing&quot;</span>
<span class="sd">    accounting.</span>

<span class="sd">    Please do not use this outside of the &quot;rasterize below a given zorder&quot;</span>
<span class="sd">    functionality of Axes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    figure : matplotlib.figure.Figure</span>
<span class="sd">        The figure all of the artists belong to (not checked).  We need this</span>
<span class="sd">        because we can at the figure level suppress composition and insert each</span>
<span class="sd">        rasterized artist as its own image.</span>

<span class="sd">    artists : List[matplotlib.artist.Artist]</span>
<span class="sd">        The list of Artists to be rasterized.  These are assumed to all</span>
<span class="sd">        be in the same Figure.</span>

<span class="sd">    renderer : matplotlib.backendbases.RendererBase</span>
<span class="sd">        The currently active renderer</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    None</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">class</span> <span class="nc">_MinimalArtist</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">get_rasterized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">def</span> <span class="nf">get_agg_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">figure</span><span class="p">,</span> <span class="n">artists</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="n">figure</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">artists</span> <span class="o">=</span> <span class="n">artists</span>

        <span class="nd">@martist</span><span class="o">.</span><span class="n">allow_rasterization</span>
        <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">artists</span><span class="p">:</span>
                <span class="n">a</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_MinimalArtist</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">artists</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2024, Pipeline Dev. Team, build: 2024.2.0.4+149-gc67ed7416-PIPE-1669-run-dev-pipeline-with-modular-casa6.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>