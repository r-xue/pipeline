

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pipeline.h.tasks.common.displays.applycal &mdash; Pipeline 2024.2.0.4+148-g793ad1aab-PIPE-1669-run-dev-pipeline-with-modular-casa6 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx_astrorefs.css?v=4d4a2fdb" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/custom_theme.css?v=30144f19" />

  
      <script src="../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../_static/documentation_options.js?v=1eabddb0"></script>
      <script src="../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: gray" >

          
          
          <a href="../../../../../../index.html" class="icon icon-home">
            Pipeline
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/ways_to_run_the_pipeline.html">Ways to run the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/recipes.html">Pipeline Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../dependencies.html">Dependencies of <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../releases.html">Past Releases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../apisummary.html">Full APIs (autosummary)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../apisummary.html#pipeline-tasks-autosummary">Pipeline Tasks (autosummary)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../apisummary.html#pipeline-domain-context-autosummary">Pipeline domain/context (autosummary)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../apisummary.html#pipeline-domain-infrastructure-modules-automodapi">Pipeline domain/infrastructure modules (automodapi)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../apisummary.html#pipeline-h-tasks-modules-autmodapi"><code class="docutils literal notranslate"><span class="pre">pipeline.h*.tasks</span></code> modules (autmodapi)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../apisummary.html#inheritance-diagrams-for-pipeline-task-inputs-results-classes">Inheritance Diagrams for Pipeline <code class="docutils literal notranslate"><span class="pre">Task</span></code>/<code class="docutils literal notranslate"><span class="pre">Inputs</span></code>/<code class="docutils literal notranslate"><span class="pre">Results</span></code> Classes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/ALMA-Imaging-Workflow.html">ALMA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/VLA-Imaging-Workflow.html">VLA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/VLASS-SE-CONT-Imaging-Workflow.html">VLASS-SE-CONT imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/VLASS-SE-CUBE-Imaging-Workflow.html">VLASS-SE-CUBE imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/selfcal_workflow.html">VLASS Selfcal &amp; Restore workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/comparing_pipeline_executions.html">Comparing pipeline executions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/building_the_pipeline.html">Building the pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../modular.html">Run the Pipeline in a Conda environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/pipeline_tests.html">Pipeline testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/DataType_Testing.html">DataType Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/QA_scores.html">Pipeline Quality Assurance (QA) Score Class Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/DeveloperDocumentation.html">Pipeline developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../develdocmd/python3_conversion_notes.html">Python 3 conversion notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../heuristics/field_parameter.html">Field parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../heuristics/FlaggingTasks.html">Pipeline Flagging Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../notebooks/context.html">Pipeline Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../notebooks/tier0dask.html">“Tier0” Parallelization with Dask/Futures</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: gray" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">Pipeline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../../../../pipeline.html">pipeline</a></li>
      <li class="breadcrumb-item active">pipeline.h.tasks.common.displays.applycal</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pipeline.h.tasks.common.displays.applycal</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">import</span> <span class="nn">pipeline.infrastructure</span> <span class="k">as</span> <span class="nn">infrastructure</span>
<span class="kn">import</span> <span class="nn">pipeline.infrastructure.filenamer</span> <span class="k">as</span> <span class="nn">filenamer</span>
<span class="kn">import</span> <span class="nn">pipeline.infrastructure.renderer.logger</span> <span class="k">as</span> <span class="nn">logger</span>
<span class="kn">import</span> <span class="nn">pipeline.infrastructure.utils</span> <span class="k">as</span> <span class="nn">utils</span>
<span class="kn">from</span> <span class="nn">pipeline.infrastructure</span> <span class="kn">import</span> <span class="n">casa_tasks</span>
<span class="kn">from</span> <span class="nn">pipeline.infrastructure.renderer.htmlrenderer</span> <span class="kn">import</span> <span class="n">is_singledish_ms</span>
<span class="kn">from</span> <span class="nn">pipeline.infrastructure.launcher</span> <span class="kn">import</span> <span class="n">Context</span>
<span class="kn">from</span> <span class="nn">pipeline.infrastructure.callibrary</span> <span class="kn">import</span> <span class="n">CalTo</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">common</span>

<span class="n">LOG</span> <span class="o">=</span> <span class="n">infrastructure</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="PlotmsLeaf">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PlotmsLeaf.html#pipeline.hifa.tasks.targetflag.targetflag.PlotmsLeaf">[docs]</a>
<span class="k">class</span> <span class="nc">PlotmsLeaf</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to execute plotms and return a plot wrapper. It passes the spw and</span>
<span class="sd">    ant arguments through to plotms without further manipulation, creating</span>
<span class="sd">    exactly one plot.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ant</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">scan</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">uvrange</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">correlation</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_context</span> <span class="o">=</span> <span class="n">context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output_dir</span> <span class="o">=</span> <span class="n">output_dir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_suffix</span> <span class="o">=</span> <span class="n">suffix</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_vis</span> <span class="o">=</span> <span class="n">calto</span><span class="o">.</span><span class="n">vis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">observing_run</span><span class="o">.</span><span class="n">get_ms</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vis</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis</span> <span class="o">=</span> <span class="n">xaxis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis</span> <span class="o">=</span> <span class="n">yaxis</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_spw</span> <span class="o">=</span> <span class="n">spw</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_intent</span> <span class="o">=</span> <span class="n">intent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_uvrange</span> <span class="o">=</span> <span class="n">uvrange</span>

        <span class="c1"># TODO</span>
        <span class="c1"># This should be revisited when the confusion between correlation and</span>
        <span class="c1"># polarisation is ironed out. I&#39;m not convinced that</span>
        <span class="c1"># get_alma_corrstring does anything useful; I suspect an empty string</span>
        <span class="c1"># forcing all correlations to be plotted would be equivalent.</span>
        <span class="k">if</span> <span class="n">correlation</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">observatory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">antenna_array</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="n">observatory</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;ALMA&#39;</span><span class="p">,</span> <span class="s1">&#39;NRO&#39;</span><span class="p">):</span>
                <span class="n">correlation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">get_alma_corrstring</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">observatory</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;VLA&#39;</span><span class="p">,</span> <span class="s1">&#39;EVLA&#39;</span><span class="p">):</span>
                <span class="n">correlation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">get_vla_corrstring</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># New observatories: you could probably use &#39;&#39; but I can&#39;t</span>
                <span class="c1"># guarantee it, hence the error is raised</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Could not expand correlation for observatory: </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">observatory</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_correlation</span> <span class="o">=</span> <span class="n">correlation</span>

        <span class="c1">#         # convert intent to scan selection</span>
        <span class="c1">#         if intent != &#39;&#39;:</span>
        <span class="c1">#             domain_fields = self._ms.get_fields(field)</span>
        <span class="c1">#             domain_spws = self._ms.get_spectral_windows(spw)</span>
        <span class="c1">#             scans = [s for s in self._ms.get_scans(scan_intent=intent)</span>
        <span class="c1">#                      if s.fields.intersection(domain_fields)</span>
        <span class="c1">#                      and s.spws.intersection(domain_spws)]</span>
        <span class="c1">#             scan = &#39;,&#39;.join([str(s.id) for s in scans])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scan</span> <span class="o">=</span> <span class="n">scan</span>

        <span class="c1"># use field name rather than ID where possible</span>
        <span class="n">field_label</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">field</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">matching</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matching</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">field_name</span> <span class="o">=</span> <span class="n">matching</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
                <span class="n">field_id</span> <span class="o">=</span> <span class="n">matching</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
                <span class="c1"># in case the arg is an ID, check that returned field doesn&#39;t</span>
                <span class="c1"># contain a duplicate name</span>
                <span class="n">matching_by_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matching_by_name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c1"># if the argument was the field ID but the field name is</span>
                    <span class="c1"># unique. Therefore, we can use the field name.</span>
                    <span class="n">field</span> <span class="o">=</span> <span class="n">field_name</span>
                    <span class="n">field_label</span> <span class="o">=</span> <span class="n">field_name</span>
                    <span class="n">LOG</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s1">&#39;One field found for search term </span><span class="si">%r</span><span class="s1"> and name &#39;</span>
                              <span class="s1">&#39;appears unique. Using </span><span class="si">%r</span><span class="s1"> as field identifier&#39;</span><span class="p">,</span>
                              <span class="n">field</span><span class="p">,</span> <span class="n">field_label</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># if the argument was the field ID but the field name is</span>
                    <span class="c1"># not unique, prepend the ID with the field name</span>
                    <span class="n">field_label</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> (field #</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_id</span><span class="p">)</span>
                    <span class="n">LOG</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s1">&#39;One field found for search term </span><span class="si">%r</span><span class="s1"> but name &#39;</span>
                              <span class="s1">&#39;also refers to other fields. Using </span><span class="si">%r</span><span class="s1"> as field &#39;</span>
                              <span class="s1">&#39;identifier&#39;</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">field_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="s1">&#39;More than one field found for search term </span><span class="si">%r</span><span class="s1">. &#39;</span>
                          <span class="s1">&#39;Using </span><span class="si">%r</span><span class="s1"> as field identifier&#39;</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
                <span class="n">field_label</span> <span class="o">=</span> <span class="n">field</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_field</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_field_label</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">field_label</span><span class="p">)</span>

        <span class="c1"># use antenna name rather than ID if possible</span>
        <span class="k">if</span> <span class="n">ant</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">domain_antennas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">get_antenna</span><span class="p">(</span><span class="n">ant</span><span class="p">)</span>
            <span class="n">idents</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">name</span> <span class="k">else</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">domain_antennas</span><span class="p">]</span>
            <span class="n">ant</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">idents</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ant</span> <span class="o">=</span> <span class="n">ant</span>

        <span class="c1"># get baseband from extra kwargs, deleting it after copying so it</span>
        <span class="c1"># doesn&#39;t affect the plotms call</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_baseband</span> <span class="o">=</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;baseband&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_baseband</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">plot_args</span><span class="p">[</span><span class="s1">&#39;baseband&#39;</span><span class="p">]</span>

        <span class="c1"># same procedure for receiver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_receiver</span> <span class="o">=</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;receiver&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receiver</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">plot_args</span><span class="p">[</span><span class="s1">&#39;receiver&#39;</span><span class="p">]</span>

        <span class="c1">#</span>
        <span class="c1"># PIPE-157: pipeline hif_applycal spectral plots should overlay image</span>
        <span class="c1"># sideband transmission for DSB receivers (once plotms can do this)</span>
        <span class="c1">#</span>
        <span class="c1"># if showatm=True and spw is a DSB receiver, add showimage=True to the</span>
        <span class="c1"># plotms args</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;showatm&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="c1"># use any rather than all on the basis that we&#39;d prefer a warning</span>
            <span class="c1"># if plotms doesn&#39;t like mixed DSB/non-DSB plots over not getting</span>
            <span class="c1"># the sideband image at all</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">spw_do</span><span class="o">.</span><span class="n">receiver</span> <span class="o">==</span> <span class="s1">&#39;DSB&#39;</span> <span class="k">for</span> <span class="n">spw_do</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">get_spectral_windows</span><span class="p">(</span><span class="n">spw</span><span class="p">)]):</span>
                <span class="n">plot_args</span><span class="p">[</span><span class="s1">&#39;showimage&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_args</span> <span class="o">=</span> <span class="n">plot_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plotfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_plotfile</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_is_null_select</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Attempt to identify a null data selection to prevent CASA/plotms grpc-related exceptions.</span>

<span class="sd">        Note: this doesn&#39;t guarantee to detect all null-selection conditions, but can rule out several known</span>
<span class="sd">        scenarios. See PIPE-1596/PIPE-1259/PIPE-1255.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_null_select</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># reject the case that the spw/scan/intent selection leads to zero scan.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">get_scans</span><span class="p">(</span><span class="n">spw</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_spw</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_field</span><span class="p">,</span> <span class="n">scan_intent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_intent</span><span class="p">):</span>
            <span class="n">is_null_select</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># reject the case that the requested correlation(s) is not in any selected spw, only for VLA</span>
        <span class="n">corrstring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correlation</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">antenna_array</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;VLA&#39;</span><span class="p">,</span> <span class="s1">&#39;EVLA&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">corrstring</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">vla_corrlist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">get_vla_corrlist_from_spw</span><span class="p">(</span><span class="n">spw</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spw</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">vla_corrlist</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">corrstring</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))):</span>
                <span class="n">is_null_select</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">is_null_select</span>

<div class="viewcode-block" id="PlotmsLeaf.plot">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PlotmsLeaf.html#pipeline.hifa.tasks.targetflag.targetflag.PlotmsLeaf.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the jobrequest and its plot wrapper ready, before the plot is generated.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_null_select</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="n">task</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_plot_task</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">task</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_plot_wrapper</span><span class="p">(</span><span class="n">task</span><span class="p">))]</span></div>


    <span class="k">def</span> <span class="nf">_get_plotfile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fileparts</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vis&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vis</span><span class="p">),</span>
            <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis</span><span class="p">,</span>
            <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis</span><span class="p">,</span>
            <span class="s1">&#39;ant&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ant</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="s1">&#39;ant</span><span class="si">%s</span><span class="s1">-&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ant</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">),</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_label</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="s1">&#39;-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_label</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">),</span>
            <span class="s1">&#39;intent&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_intent</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_intent</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">),</span>
            <span class="s1">&#39;uvrange&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uvrange</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="s1">&#39;uvrange</span><span class="si">%s</span><span class="s1">-&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uvrange</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">),</span>
            <span class="s1">&#39;receiver&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receiver</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_receiver</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">),</span>
            <span class="s1">&#39;suffix&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_suffix</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="s1">&#39;-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_suffix</span><span class="p">,</span>
            <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correlation</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="s1">&#39;-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correlation</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spw</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">fileparts</span><span class="p">[</span><span class="s1">&#39;spw&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># format spws for filename sorting</span>
            <span class="n">spws</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">%0.2d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">int</span><span class="p">(</span><span class="n">spw</span><span class="p">)</span> <span class="k">for</span> <span class="n">spw</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spw</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
            <span class="n">fileparts</span><span class="p">[</span><span class="s1">&#39;spw&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;spw</span><span class="si">%s</span><span class="s1">-&#39;</span> <span class="o">%</span> <span class="s1">&#39;_&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">spws</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_baseband</span><span class="p">:</span>
            <span class="n">fileparts</span><span class="p">[</span><span class="s1">&#39;spw&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bb</span><span class="si">%s</span><span class="s1">-&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_baseband</span>

        <span class="n">png</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{vis}{field}</span><span class="s1">-</span><span class="si">{receiver}{spw}{ant}{intent}{uvrange}{y}</span><span class="s1">_vs_</span><span class="si">{x}{suffix}{correlation}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">fileparts</span><span class="p">)</span>
        <span class="n">png</span> <span class="o">=</span> <span class="n">filenamer</span><span class="o">.</span><span class="n">sanitize</span><span class="p">(</span><span class="n">png</span><span class="p">)</span>

        <span class="c1"># Maximum filename size for Lustre filesystems is 255 bytes. Mosaics</span>
        <span class="c1"># can exceed this limit due to including the names of all the field.</span>
        <span class="c1"># Truncate over-long field components while keeping them unique by</span>
        <span class="c1"># replacing them with the hash of the component</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">png</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">251</span><span class="p">:</span>  <span class="c1"># 255 - &#39;.png&#39;</span>
            <span class="n">new_png</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{!s}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">png</span><span class="p">))</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Renaming plot to avoid exceeding filesystem limit on filename length.</span><span class="se">\n</span><span class="s1">&#39;</span>
                     <span class="s1">&#39;Old: </span><span class="si">{!s}</span><span class="se">\n</span><span class="s1">New: </span><span class="si">{!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">png</span><span class="p">,</span> <span class="n">new_png</span><span class="p">))</span>
            <span class="n">png</span> <span class="o">=</span> <span class="n">new_png</span>

        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_dir</span><span class="p">,</span> <span class="n">png</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_plot_wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;vis&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vis</span><span class="p">)}</span>

        <span class="n">domain_spws</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">get_spectral_windows</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spw</span><span class="p">)</span>
        <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;receiver&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">spw</span><span class="o">.</span><span class="n">band</span> <span class="k">for</span> <span class="n">spw</span> <span class="ow">in</span> <span class="n">domain_spws</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_label</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_baseband</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;baseband&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_baseband</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correlation</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correlation</span>

        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;spw&#39;</span><span class="p">,</span> <span class="s1">&#39;ant&#39;</span><span class="p">,</span> <span class="s1">&#39;intent&#39;</span><span class="p">,</span> <span class="s1">&#39;scan&#39;</span><span class="p">]:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">attr</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">parameters</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>

        <span class="n">wrapper</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">Plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_plotfile</span><span class="p">,</span>
                              <span class="n">x_axis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_xaxis</span><span class="p">,</span>
                              <span class="n">y_axis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_yaxis</span><span class="p">,</span>
                              <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
                              <span class="n">command</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">task</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">wrapper</span>

    <span class="k">def</span> <span class="nf">_get_plot_task</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">casa_intent</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">to_CASA_intent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_intent</span><span class="p">)</span>
        <span class="n">task_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vis&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ms</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;xaxis&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis</span><span class="p">,</span>
            <span class="s1">&#39;yaxis&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_field</span><span class="p">),</span>
            <span class="s1">&#39;spw&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spw</span><span class="p">),</span>
            <span class="s1">&#39;scan&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scan</span><span class="p">),</span>
            <span class="s1">&#39;intent&#39;</span><span class="p">:</span> <span class="n">casa_intent</span><span class="p">,</span>
            <span class="s1">&#39;antenna&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ant</span><span class="p">,</span>
            <span class="s1">&#39;uvrange&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uvrange</span><span class="p">,</span>
            <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_correlation</span><span class="p">,</span>
            <span class="s1">&#39;plotfile&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plotfile</span><span class="p">,</span>
            <span class="s1">&#39;clearplots&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;showgui&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>

        <span class="n">task_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_plot_args</span><span class="p">)</span>

        <span class="n">task</span> <span class="o">=</span> <span class="n">casa_tasks</span><span class="o">.</span><span class="n">plotms</span><span class="p">(</span><span class="o">**</span><span class="n">task_args</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">task</span></div>



<div class="viewcode-block" id="SpwComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.SpwComposite.html#pipeline.hifa.tasks.targetflag.targetflag.SpwComposite">[docs]</a>
<span class="k">class</span> <span class="nc">SpwComposite</span><span class="p">(</span><span class="n">common</span><span class="o">.</span><span class="n">LeafComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a PlotLeaf for each spw in the applied calibration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># reference to the PlotLeaf class to call</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">ant</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">ms</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">observing_run</span><span class="o">.</span><span class="n">get_ms</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">vis</span><span class="p">)</span>
        <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">spw</span> <span class="ow">in</span> <span class="n">ms</span><span class="o">.</span><span class="n">get_spectral_windows</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">spw</span><span class="p">):</span>
            <span class="c1"># For PIPE-690 it was requested to create plots only for a certain spw/field</span>
            <span class="c1"># selection. This is accomplished by passing a dictionary to the field</span>
            <span class="c1"># override parameter.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">field_spec</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">spw</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field_spec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">field_spec</span> <span class="o">=</span> <span class="n">field</span>
            <span class="c1"># only create plots for scans with data</span>
            <span class="n">scans</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">get_scans</span><span class="p">(</span><span class="n">spw</span><span class="o">=</span><span class="n">spw</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field_spec</span><span class="p">,</span> <span class="n">scan_intent</span><span class="o">=</span><span class="n">intent</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">scans</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">kwargs_copy</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">kwargs_copy</span><span class="p">[</span><span class="s1">&#39;avgchannel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;avgchannel&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">spw</span><span class="o">.</span><span class="n">num_channels</span><span class="p">))</span>

            <span class="n">leaf_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leaf_class</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="n">spw</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">ant</span><span class="o">=</span><span class="n">ant</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field_spec</span><span class="p">,</span>
                        <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_copy</span><span class="p">)</span>
            <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf_obj</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">SpwComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">children</span><span class="p">)</span></div>



<div class="viewcode-block" id="BasebandComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.BasebandComposite.html#pipeline.hifa.tasks.targetflag.targetflag.BasebandComposite">[docs]</a>
<span class="k">class</span> <span class="nc">BasebandComposite</span><span class="p">(</span><span class="n">common</span><span class="o">.</span><span class="n">LeafComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a PlotLeaf for each baseband in the applied calibration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># reference to the PlotLeaf class to call</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">ant</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">overplot_receivers</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="n">ms</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">observing_run</span><span class="o">.</span><span class="n">get_ms</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">vis</span><span class="p">)</span>

        <span class="n">receivers</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">utils</span><span class="o">.</span><span class="n">OrderedDefaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">spw</span> <span class="ow">in</span> <span class="n">ms</span><span class="o">.</span><span class="n">get_spectral_windows</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">spw</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">intent</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">wanted</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">intent</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">spw</span><span class="o">.</span><span class="n">intents</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">wanted</span><span class="p">):</span>
                    <span class="k">continue</span>

            <span class="n">rx</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span> <span class="k">if</span> <span class="n">overplot_receivers</span> <span class="k">else</span> <span class="n">spw</span><span class="o">.</span><span class="n">band</span>
            <span class="n">receivers</span><span class="p">[</span><span class="n">rx</span><span class="p">][</span><span class="n">spw</span><span class="o">.</span><span class="n">baseband</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">spw</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="n">is_single_receiver</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">receivers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

        <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s1">&#39;spws&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">source_spws</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;spws&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;spws&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source_spws</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="k">for</span> <span class="n">receiver_id</span><span class="p">,</span> <span class="n">basebands</span> <span class="ow">in</span> <span class="n">receivers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># keep receiver component out of filename if possible</span>
            <span class="k">if</span> <span class="n">overplot_receivers</span> <span class="ow">or</span> <span class="n">is_single_receiver</span><span class="p">:</span>
                <span class="n">receiver_id</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

            <span class="k">for</span> <span class="n">baseband_id</span><span class="p">,</span> <span class="n">spw_ids</span> <span class="ow">in</span> <span class="n">basebands</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># spws = &#39;,&#39;.join([str(i) for i in spw_ids])</span>
                <span class="k">if</span> <span class="n">source_spws</span><span class="p">:</span>
                    <span class="c1"># Determine valid spws</span>
                    <span class="n">source_spwidlist_str</span> <span class="o">=</span> <span class="n">source_spws</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                    <span class="n">source_spwidlist</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">spwstr</span><span class="p">)</span> <span class="k">for</span> <span class="n">spwstr</span> <span class="ow">in</span> <span class="n">source_spwidlist_str</span><span class="p">]</span>
                    <span class="n">spws</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">spwid</span><span class="p">)</span> <span class="k">for</span> <span class="n">spwid</span> <span class="ow">in</span> <span class="n">spw_ids</span> <span class="k">if</span> <span class="n">spwid</span> <span class="ow">in</span> <span class="n">source_spwidlist</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">spws</span><span class="p">:</span>
                        <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Keyword override for </span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: spws=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">spws</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">spws</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">spw_ids</span><span class="p">])</span>

                <span class="k">if</span> <span class="n">spws</span><span class="p">:</span>
                    <span class="n">leaf_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leaf_class</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="n">spws</span><span class="p">,</span> <span class="n">ant</span><span class="o">=</span><span class="n">ant</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">,</span>
                                               <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="n">baseband</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">baseband_id</span><span class="p">),</span> <span class="n">receiver</span><span class="o">=</span><span class="n">receiver_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                    <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf_obj</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">BasebandComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">children</span><span class="p">)</span></div>



<div class="viewcode-block" id="AntComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AntComposite.html#pipeline.hifa.tasks.targetflag.targetflag.AntComposite">[docs]</a>
<span class="k">class</span> <span class="nc">AntComposite</span><span class="p">(</span><span class="n">common</span><span class="o">.</span><span class="n">LeafComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a PlotLeaf for each antenna in the applied calibration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># reference to the PlotLeaf class to call</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># set the singledish flag for SD runs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">singledish</span> <span class="o">=</span> <span class="n">is_singledish_ms</span><span class="p">(</span> <span class="n">context</span> <span class="p">)</span>

        <span class="n">ms</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">observing_run</span><span class="o">.</span><span class="n">get_ms</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">vis</span><span class="p">)</span>
        <span class="n">antennas</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">ms</span><span class="o">.</span><span class="n">get_antenna</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">antenna</span><span class="p">)]</span>

        <span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">leaf_class</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span>
                                    <span class="n">ant</span><span class="o">=</span><span class="n">ant</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="n">spw</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">ant</span> <span class="ow">in</span> <span class="n">antennas</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AntComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">children</span><span class="p">)</span></div>



<div class="viewcode-block" id="FieldComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.FieldComposite.html#pipeline.hifa.tasks.targetflag.targetflag.FieldComposite">[docs]</a>
<span class="k">class</span> <span class="nc">FieldComposite</span><span class="p">(</span><span class="n">common</span><span class="o">.</span><span class="n">LeafComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a PlotLeaf for each field in the applied calibration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># reference to the PlotLeaf class to call</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ant</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">ms</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">observing_run</span><span class="o">.</span><span class="n">get_ms</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">vis</span><span class="p">)</span>

        <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">ms</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">field</span><span class="p">):</span>
            <span class="n">wanted</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">intent</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
            <span class="n">intersection</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">intents</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">wanted</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">intersection</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">leaf_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leaf_class</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span>
                                       <span class="n">ant</span><span class="o">=</span><span class="n">ant</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="n">spw</span><span class="p">,</span>
                                       <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">intersection</span><span class="p">),</span>
                                       <span class="n">field</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf_obj</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">FieldComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">children</span><span class="p">)</span></div>



<div class="viewcode-block" id="FieldSpwComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.FieldSpwComposite.html#pipeline.hifa.tasks.targetflag.targetflag.FieldSpwComposite">[docs]</a>
<span class="k">class</span> <span class="nc">FieldSpwComposite</span><span class="p">(</span><span class="n">common</span><span class="o">.</span><span class="n">LeafComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a PlotLeaf for each field and spw in the applied calibration</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">ms</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">observing_run</span><span class="o">.</span><span class="n">get_ms</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">vis</span><span class="p">)</span>

        <span class="n">wanted</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">intent</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Add override for kwargs</span>
        <span class="k">if</span> <span class="s1">&#39;field&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Override for </span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: fields=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">fields</span><span class="p">))</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>

            <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="n">leaf_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leaf_class</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span>
                                <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span>
                                <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">ms</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="n">intersection</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">intents</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">wanted</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">intersection</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">leaf_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leaf_class</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span>
                                       <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">intersection</span><span class="p">),</span>
                                       <span class="n">field</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf_obj</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">FieldSpwComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">children</span><span class="p">)</span></div>



<div class="viewcode-block" id="SpwAntComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.SpwAntComposite.html#pipeline.hifa.tasks.targetflag.targetflag.SpwAntComposite">[docs]</a>
<span class="k">class</span> <span class="nc">SpwAntComposite</span><span class="p">(</span><span class="n">common</span><span class="o">.</span><span class="n">LeafComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a PlotLeaf for each spw and antenna in the applied calibration</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">ms</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">observing_run</span><span class="o">.</span><span class="n">get_ms</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">vis</span><span class="p">)</span>

        <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">spw</span> <span class="ow">in</span> <span class="n">ms</span><span class="o">.</span><span class="n">get_spectral_windows</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">spw</span><span class="p">):</span>
            <span class="n">leaf_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leaf_class</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span>
                                       <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="n">spw</span><span class="o">=</span><span class="n">spw</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                       <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf_obj</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">SpwAntComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">children</span><span class="p">)</span></div>



<div class="viewcode-block" id="FieldSpwAntComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.FieldSpwAntComposite.html#pipeline.hifa.tasks.targetflag.targetflag.FieldSpwAntComposite">[docs]</a>
<span class="k">class</span> <span class="nc">FieldSpwAntComposite</span><span class="p">(</span><span class="n">common</span><span class="o">.</span><span class="n">LeafComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a PlotLeaf for each field, spw and antenna in the applied calibration</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">ms</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">observing_run</span><span class="o">.</span><span class="n">get_ms</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">vis</span><span class="p">)</span>

        <span class="n">wanted</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">intent</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">ms</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(</span><span class="n">calto</span><span class="o">.</span><span class="n">field</span><span class="p">):</span>
            <span class="n">intersection</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">intents</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">wanted</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">intersection</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">leaf_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leaf_class</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span>
                                       <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">intersection</span><span class="p">),</span>
                                       <span class="n">field</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">leaf_obj</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">FieldSpwAntComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">children</span><span class="p">)</span></div>



<div class="viewcode-block" id="PlotmsAntComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PlotmsAntComposite.html#pipeline.hifa.tasks.targetflag.targetflag.PlotmsAntComposite">[docs]</a>
<span class="k">class</span> <span class="nc">PlotmsAntComposite</span><span class="p">(</span><span class="n">AntComposite</span><span class="p">):</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="n">PlotmsLeaf</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># set singledish flag</span>
        <span class="n">singledish</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;singledish&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># merge separate ant jobs into one job using plotms iterator</span>
        <span class="n">jobs_and_wrappers</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">PlotmsAntComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
        <span class="n">successful_wrappers</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">plotms_iterate</span><span class="p">(</span><span class="n">jobs_and_wrappers</span><span class="p">,</span> <span class="s1">&#39;antenna&#39;</span><span class="p">,</span> <span class="n">singledish</span><span class="o">=</span><span class="n">singledish</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">successful_wrappers</span></div>



<div class="viewcode-block" id="PlotmsSpwComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PlotmsSpwComposite.html#pipeline.hifa.tasks.targetflag.targetflag.PlotmsSpwComposite">[docs]</a>
<span class="k">class</span> <span class="nc">PlotmsSpwComposite</span><span class="p">(</span><span class="n">SpwComposite</span><span class="p">):</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="n">PlotmsLeaf</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># merge separate spw jobs into one job using plotms iterator</span>
        <span class="n">jobs_and_wrappers</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">PlotmsSpwComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
        <span class="n">successful_wrappers</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">plotms_iterate</span><span class="p">(</span><span class="n">jobs_and_wrappers</span><span class="p">,</span> <span class="s1">&#39;spw&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">successful_wrappers</span></div>



<div class="viewcode-block" id="PlotmsBasebandComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PlotmsBasebandComposite.html#pipeline.hifa.tasks.targetflag.targetflag.PlotmsBasebandComposite">[docs]</a>
<span class="k">class</span> <span class="nc">PlotmsBasebandComposite</span><span class="p">(</span><span class="n">BasebandComposite</span><span class="p">):</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="n">PlotmsLeaf</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># merge separate spw jobs into one job using plotms iterator</span>
        <span class="n">jobs_and_wrappers</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">PlotmsBasebandComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
        <span class="n">successful_wrappers</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">plotms_iterate</span><span class="p">(</span><span class="n">jobs_and_wrappers</span><span class="p">,</span> <span class="s1">&#39;spw&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">successful_wrappers</span></div>



<div class="viewcode-block" id="PlotmsFieldComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PlotmsFieldComposite.html#pipeline.hifa.tasks.targetflag.targetflag.PlotmsFieldComposite">[docs]</a>
<span class="k">class</span> <span class="nc">PlotmsFieldComposite</span><span class="p">(</span><span class="n">FieldComposite</span><span class="p">):</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="n">PlotmsLeaf</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># merge separate spw jobs into one job using plotms iterator</span>
        <span class="n">jobs_and_wrappers</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">PlotmsFieldComposite</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
        <span class="n">successful_wrappers</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">plotms_iterate</span><span class="p">(</span><span class="n">jobs_and_wrappers</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">successful_wrappers</span></div>



<div class="viewcode-block" id="PlotmsFieldSpwComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PlotmsFieldSpwComposite.html#pipeline.hifa.tasks.targetflag.targetflag.PlotmsFieldSpwComposite">[docs]</a>
<span class="k">class</span> <span class="nc">PlotmsFieldSpwComposite</span><span class="p">(</span><span class="n">FieldSpwComposite</span><span class="p">):</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="n">PlotmsSpwComposite</span></div>



<div class="viewcode-block" id="PlotmsFieldBasebandComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PlotmsFieldBasebandComposite.html#pipeline.hifa.tasks.targetflag.targetflag.PlotmsFieldBasebandComposite">[docs]</a>
<span class="k">class</span> <span class="nc">PlotmsFieldBasebandComposite</span><span class="p">(</span><span class="n">FieldSpwComposite</span><span class="p">):</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="n">PlotmsBasebandComposite</span></div>



<div class="viewcode-block" id="PlotmsSpwAntComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PlotmsSpwAntComposite.html#pipeline.hifa.tasks.targetflag.targetflag.PlotmsSpwAntComposite">[docs]</a>
<span class="k">class</span> <span class="nc">PlotmsSpwAntComposite</span><span class="p">(</span><span class="n">SpwAntComposite</span><span class="p">):</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="n">PlotmsAntComposite</span></div>



<div class="viewcode-block" id="PlotmsFieldSpwAntComposite">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PlotmsFieldSpwAntComposite.html#pipeline.hifa.tasks.targetflag.targetflag.PlotmsFieldSpwAntComposite">[docs]</a>
<span class="k">class</span> <span class="nc">PlotmsFieldSpwAntComposite</span><span class="p">(</span><span class="n">FieldSpwAntComposite</span><span class="p">):</span>
    <span class="n">leaf_class</span> <span class="o">=</span> <span class="n">PlotmsSpwAntComposite</span></div>



<div class="viewcode-block" id="SpwFieldSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.SpwFieldSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.SpwFieldSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">SpwFieldSummaryChart</span><span class="p">(</span><span class="n">PlotmsFieldSpwComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Like SpwSummaryChart, but creates separate plots for each field</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># (calto, intent) = _get_summary_args(context, result, intent)</span>

        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">calto</span><span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;field&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Override for </span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: field=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">calto</span><span class="o">.</span><span class="n">field</span>
        <span class="c1"># request plots per spw, overlaying all antennas</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">,</span>
                                              <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>



<div class="viewcode-block" id="SpwSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.SpwSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.SpwSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">SpwSummaryChart</span><span class="p">(</span><span class="n">PlotmsSpwComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for executing plotms per calibrator field and spw</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># (calto, intent) = _get_summary_args(context, result, intent)</span>

        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">calto</span><span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;field&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Override for </span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: field=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">calto</span><span class="o">.</span><span class="n">field</span>

        <span class="c1"># request plots per spw, overlaying all antennas</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SpwSummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">,</span>
                                              <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>



<div class="viewcode-block" id="BasebandSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.BasebandSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.BasebandSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">BasebandSummaryChart</span><span class="p">(</span><span class="n">PlotmsBasebandComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for executing plotms per baseband</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># (calto, intent) = _get_summary_args(context, result, intent)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">calto</span><span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;field&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Override for </span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: field=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">calto</span><span class="o">.</span><span class="n">field</span>

        <span class="c1"># request plots per spw, overlaying all antennas</span>
        <span class="c1"># if field is specified in kwargs, it will override the calto.field</span>
        <span class="c1"># selection</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BasebandSummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span>
                                                   <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>



<div class="viewcode-block" id="FieldBasebandSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.FieldBasebandSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.FieldBasebandSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">FieldBasebandSummaryChart</span><span class="p">(</span><span class="n">PlotmsFieldBasebandComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Like BasebandSummaryChart, but creates separate plots for each field</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># (calto, intent) = _get_summary_args(context, result, intent)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">calto</span><span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;field&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Override for </span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: field=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">calto</span><span class="o">.</span><span class="n">field</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmpVsUVSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsUVSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsUVSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsUVSummaryChart</span><span class="p">(</span><span class="n">SpwSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs UV distance plot for each spw, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>

        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgbaseline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;9000&#39;</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="c1"># PIPE-310: set yselfscale=True for amp vs UVdist plots</span>
            <span class="s1">&#39;yselfscale&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">AmpVsUVSummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;uvdist&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span>
                                                  <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmpVsUVFieldSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsUVFieldSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsUVFieldSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsUVFieldSummaryChart</span><span class="p">(</span><span class="n">SpwFieldSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs UV distance plot for each spw, overplotting by antenna, with separate plots for each field.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>

        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgbaseline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;9000&#39;</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="c1"># PIPE-310: set yselfscale=True for amp vs UVdist plots</span>
            <span class="s1">&#39;yselfscale&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;uvdist&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span>
                                                  <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmpVsUVBasebandSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsUVBasebandSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsUVBasebandSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsUVBasebandSummaryChart</span><span class="p">(</span><span class="n">BasebandSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs UV distance plot for each spw, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgbaseline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;9000&#39;</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">AmpVsUVBasebandSummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;uvdist&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span>
                                                          <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="PhaseVsUVSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PhaseVsUVSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.PhaseVsUVSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">PhaseVsUVSummaryChart</span><span class="p">(</span><span class="n">SpwSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs UV distance plot for each spw, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgbaseline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;9000&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PhaseVsUVSummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;uvdist&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span>
                                                    <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmpVsTimeSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsTimeSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsTimeSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsTimeSummaryChart</span><span class="p">(</span><span class="n">SpwSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs time plot for each spw, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgbaseline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">AmpVsTimeSummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span>
                                                    <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="PhaseVsTimeSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PhaseVsTimeSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.PhaseVsTimeSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">PhaseVsTimeSummaryChart</span><span class="p">(</span><span class="n">SpwSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs time plot for each spw, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgbaseline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PhaseVsTimeSummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span>
                                                      <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmpVsFrequencySummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsFrequencySummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsFrequencySummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsFrequencySummaryChart</span><span class="p">(</span><span class="n">SpwSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs time plot for each spw, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;showatm&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="c1"># CAS-10875: applycal plots should have global y-scale per source/dataset</span>
            <span class="s1">&#39;yselfscale&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">AmpVsFrequencySummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span>
                                                         <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>


<div class="viewcode-block" id="AmpVsFrequencyFieldSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsFrequencyFieldSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsFrequencyFieldSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsFrequencyFieldSummaryChart</span><span class="p">(</span><span class="n">SpwFieldSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs time plot for each spw, overplotting by antenna, with separate plots for each field.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;showatm&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="c1"># CAS-10875: applycal plots should have global y-scale per source/dataset</span>
            <span class="s1">&#39;yselfscale&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span>
                         <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmpVsFrequencyPerBasebandSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsFrequencyPerBasebandSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsFrequencyPerBasebandSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsFrequencyPerBasebandSummaryChart</span><span class="p">(</span><span class="n">BasebandSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an Amp vs Frequency plot for each baseband, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
                     <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                     <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                     <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                     <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmpVsFrequencyPerFieldBasebandSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsFrequencyPerFieldBasebandSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsFrequencyPerFieldBasebandSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsFrequencyPerFieldBasebandSummaryChart</span><span class="p">(</span><span class="n">FieldBasebandSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs time plot for each spw, overplotting by antenna, with separate plots for each field.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span>
                         <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="PhaseVsFrequencyPerSpwSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PhaseVsFrequencyPerSpwSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.PhaseVsFrequencyPerSpwSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">PhaseVsFrequencyPerSpwSummaryChart</span><span class="p">(</span><span class="n">SpwFieldSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs time plot for each spw, overplotting by antenna, with separate plots for each field.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span>
            <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PhaseVsFrequencyPerSpwSummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span>
                                                                 <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="PhaseVsFrequencyPerBasebandSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PhaseVsFrequencyPerBasebandSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.PhaseVsFrequencyPerBasebandSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">PhaseVsFrequencyPerBasebandSummaryChart</span><span class="p">(</span><span class="n">BasebandSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an Phase vs Frequency plot for each baseband, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
                     <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                     <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                     <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span>
                     <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PhaseVsFrequencyPerBasebandSummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="PhaseVsFrequencyPerFieldBasebandSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PhaseVsFrequencyPerFieldBasebandSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.PhaseVsFrequencyPerFieldBasebandSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">PhaseVsFrequencyPerFieldBasebandSummaryChart</span><span class="p">(</span><span class="n">FieldBasebandSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an Phase vs Frequency plot for each baseband, overplotting by antenna, with separate plots for each field.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
                     <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                     <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                     <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span>
                     <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="SpwAntDetailChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.SpwAntDetailChart.html#pipeline.hifa.tasks.targetflag.targetflag.SpwAntDetailChart">[docs]</a>
<span class="k">class</span> <span class="nc">SpwAntDetailChart</span><span class="p">(</span><span class="n">PlotmsSpwAntComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for executing plotms per calibrator field and spw</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># (calto, intent) = _get_summary_args(context, result, intent)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">calto</span><span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;field&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;field&#39;</span><span class="p">]</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Override for </span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: field=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">calto</span><span class="o">.</span><span class="n">field</span>

        <span class="c1"># request plots per spw, overlaying all antennas</span>
        <span class="c1"># if field is specified in kwargs, it will override the calto.field</span>
        <span class="c1"># selection</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SpwAntDetailChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">,</span>
                                                <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span></div>



<div class="viewcode-block" id="FieldSpwAntDetailChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.FieldSpwAntDetailChart.html#pipeline.hifa.tasks.targetflag.targetflag.FieldSpwAntDetailChart">[docs]</a>
<span class="k">class</span> <span class="nc">FieldSpwAntDetailChart</span><span class="p">(</span><span class="n">PlotmsFieldSpwAntComposite</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for executing plotms per calibrator field, spw and antenna</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># (calto, intent) = _get_summary_args(context, result, intent)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> vs </span><span class="si">%s</span><span class="s1"> plot: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yaxis</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">calto</span><span class="p">))</span>

        <span class="c1"># request plots per spw, overlaying all antennas</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FieldSpwAntDetailChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="p">,</span> <span class="n">yaxis</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmpVsFrequencyDetailChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsFrequencyDetailChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsFrequencyDetailChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsFrequencyDetailChart</span><span class="p">(</span><span class="n">FieldSpwAntDetailChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs frequency plot for each spw and antenna,</span>
<span class="sd">    overplotting by field.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;showatm&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">AmpVsFrequencyDetailChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span>
                                                        <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="PhaseVsFrequencyDetailChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PhaseVsFrequencyDetailChart.html#pipeline.hifa.tasks.targetflag.targetflag.PhaseVsFrequencyDetailChart">[docs]</a>
<span class="k">class</span> <span class="nc">PhaseVsFrequencyDetailChart</span><span class="p">(</span><span class="n">FieldSpwAntDetailChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a phase vs frequency plot for each spw and antenna, overplotting</span>
<span class="sd">    by field.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>

        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PhaseVsFrequencyDetailChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span>
                                                          <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmpVsUVDetailChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsUVDetailChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsUVDetailChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsUVDetailChart</span><span class="p">(</span><span class="n">FieldSpwAntDetailChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs UV distance plot for each field, spw and antenna</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgbaseline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;9000&#39;</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">AmpVsUVDetailChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;uvdist&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span>
                                                 <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="PhaseVsUVDetailChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PhaseVsUVDetailChart.html#pipeline.hifa.tasks.targetflag.targetflag.PhaseVsUVDetailChart">[docs]</a>
<span class="k">class</span> <span class="nc">PhaseVsUVDetailChart</span><span class="p">(</span><span class="n">SpwAntDetailChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs UV distance plot for each spw and antenna</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgbaseline&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;9000&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PhaseVsUVDetailChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;uvdist&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span>
                                                   <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="AmpVsTimeDetailChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.AmpVsTimeDetailChart.html#pipeline.hifa.tasks.targetflag.targetflag.AmpVsTimeDetailChart">[docs]</a>
<span class="k">class</span> <span class="nc">AmpVsTimeDetailChart</span><span class="p">(</span><span class="n">FieldSpwAntDetailChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs time plot for each field, spw and antenna,</span>
<span class="sd">    overplotting by correlation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">AmpVsTimeDetailChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span>
                                                   <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="CAS9154AmpVsTimeDetailChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.CAS9154AmpVsTimeDetailChart.html#pipeline.hifa.tasks.targetflag.targetflag.CAS9154AmpVsTimeDetailChart">[docs]</a>
<span class="k">class</span> <span class="nc">CAS9154AmpVsTimeDetailChart</span><span class="p">(</span><span class="n">SpwAntDetailChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs time plot per spw and antenna, overplotting by</span>
<span class="sd">    correlation.</span>

<span class="sd">    The fields in this plot are already delineated because this plot is</span>
<span class="sd">    against the time axis, hence we can overplot by correlation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;xselfscale&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;yselfscale&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">CAS9154AmpVsTimeDetailChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span>
                                                          <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="PhaseVsTimeDetailChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.PhaseVsTimeDetailChart.html#pipeline.hifa.tasks.targetflag.targetflag.PhaseVsTimeDetailChart">[docs]</a>
<span class="k">class</span> <span class="nc">PhaseVsTimeDetailChart</span><span class="p">(</span><span class="n">FieldSpwAntDetailChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an phase vs time plot for each field, spw and antenna,</span>
<span class="sd">    overplotting by correlation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">overrides</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;corr&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">overrides</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">PhaseVsTimeDetailChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span>
                                                     <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="CorrectedToModelRatioVsAntenna1SummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.CorrectedToModelRatioVsAntenna1SummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.CorrectedToModelRatioVsAntenna1SummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">CorrectedToModelRatioVsAntenna1SummaryChart</span><span class="p">(</span><span class="n">SpwSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs time plot for each spw, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected/model&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">CorrectedToModelRatioVsAntenna1SummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
                                                                          <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="CorrectedToModelRatioVsUVDistanceSummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.CorrectedToModelRatioVsUVDistanceSummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.CorrectedToModelRatioVsUVDistanceSummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">CorrectedToModelRatioVsUVDistanceSummaryChart</span><span class="p">(</span><span class="n">SpwSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an amplitude vs time plot for each spw, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected/model&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">CorrectedToModelRatioVsUVDistanceSummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;uvdist&#39;</span><span class="p">,</span>
                                                                            <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;amp&#39;</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>



<div class="viewcode-block" id="RealVsFrequencySummaryChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.RealVsFrequencySummaryChart.html#pipeline.hifa.tasks.targetflag.targetflag.RealVsFrequencySummaryChart">[docs]</a>
<span class="k">class</span> <span class="nc">RealVsFrequencySummaryChart</span><span class="p">(</span><span class="n">SpwSummaryChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a real vs time plot for each spw, overplotting by antenna.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ydatacolumn</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;showatm&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">RealVsFrequencySummaryChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;real&#39;</span><span class="p">,</span>
                                                          <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>


<div class="viewcode-block" id="RealVsFrequencyDetailChart">
<a class="viewcode-back" href="../../../../../../_autosummary/pipeline.h.tasks.common.displays.applycal.RealVsFrequencyDetailChart.html#pipeline.hifa.tasks.targetflag.targetflag.RealVsFrequencyDetailChart">[docs]</a>
<span class="k">class</span> <span class="nc">RealVsFrequencyDetailChart</span><span class="p">(</span><span class="n">SpwAntDetailChart</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a real vs time plot for each spw and antenna</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span>
                 <span class="n">output_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">calto</span><span class="p">:</span> <span class="n">CalTo</span><span class="p">,</span>
                 <span class="n">intent</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">ydatacolumn</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;corrected&#39;</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construct RealVsFrequencyDetailChart instance</span>

<span class="sd">        Args:</span>
<span class="sd">            context:     Pipeline context</span>
<span class="sd">            output_dir:  Output directory for plots</span>
<span class="sd">            calto:       Target data selection to apply calibration</span>
<span class="sd">            intent:      Intent of the field</span>
<span class="sd">            ydatacolumn: Data column for y-axis of the plot</span>
<span class="sd">            kwargs:      Plotms arguments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plot_args</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ydatacolumn&#39;</span><span class="p">:</span> <span class="n">ydatacolumn</span><span class="p">,</span>
            <span class="s1">&#39;avgchannel&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgtime&#39;</span><span class="p">:</span> <span class="s1">&#39;1e8&#39;</span><span class="p">,</span>
            <span class="s1">&#39;avgscan&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;avgantenna&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;plotrange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coloraxis&#39;</span><span class="p">:</span> <span class="s1">&#39;antenna1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;showatm&#39;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">}</span>
        <span class="n">plot_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># determine SD or not from context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">singledish</span> <span class="o">=</span> <span class="n">is_singledish_ms</span><span class="p">(</span> <span class="n">context</span> <span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">RealVsFrequencyDetailChart</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">calto</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="s1">&#39;real&#39;</span><span class="p">,</span>
                                                         <span class="n">intent</span><span class="o">=</span><span class="n">intent</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_args</span><span class="p">)</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2024, Pipeline Dev. Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>