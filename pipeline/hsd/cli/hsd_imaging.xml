<casaxml xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd file:///opt/casa/code/xmlcasa/xml/casa.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://casa.nrao.edu/schema/psetTypes.html">

<task category="pipeline" name="hsd_imaging" type="function">
<shortdescription>Generate single dish images</shortdescription>
<description>The hsd_imaging task generates single dish images per antenna as
             well as combined image over whole antennas for each field and 
             spectral window. Image configuration (grid size, number of pixels,
             etc.) is automatically determined based on meta data such as 
             antenna diameter, map extent, etc.

             Note that generated images are always in LSRK frame.

             Output:
              results -- If pipeline mode is 'getinputs' then None is returned.
                         Otherwise the results object for the pipeline task is
                         returned.
</description>
<input>
    <param name="mode" type="string">
	<shortdescription>Imaging mode [\'line\'|\'ampcal\']</shortdescription>
        <description>imaging mode controls imaging parameters in the task.
                     Accepts either 'line' (spectral line imaging) or 'ampcal'
                     (image settings for amplitude calibrator)
        </description>
	<value>line</value>
	<allowed kind="enum">
	    <value>line</value>

	    <value>ampcal</value>
	</allowed>
    </param>

    <param name="restfreq" type="stringVec">
	<description>Rest frequency</description>
	<value/>
    </param>

    <param name="pipelinemode" type="string">
	<shortdescription>The pipeline operating mode</shortdescription>
        <description>The pipeline operating mode. In 'automatic' mode the 
                     pipeline determines the values of all context defined
                     pipeline inputs automatically.  In 'interactive' mode
                     the user can set the pipeline context defined parameters
                     manually.  In 'getinputs' mode the user can check the 
                     settings of all pipeline parameters without running
                     the task.
        </description>
	<value>automatic</value>
	<allowed kind="enum">
	    <value>automatic</value>
	    <value>interactive</value>
	    <value>getinputs</value>
	</allowed>
    </param>

    <param subparam="true" name="infiles" type="stringVec">
        <shortdescription>List of input files (default all)</shortdescription>
        <description>List of data files. These must be a name of 
                     MeasurementSets that are registered to context via 
                     hsd_importdata task.
                     example: vis=['uid___A002_X85c183_X36f.ms', 
                                   'uid___A002_X85c183_X60b.ms']
        </description>
        <value/>
    </param>

    <param subparam="true" name="field" type="string">
        <shortdescription>Field to be imaged, e.g., \'M100,Sgr*\' (default all)
        </shortdescription>
        <description>Data selection by field names or ids.
                     example: '*Sgr*,M100'
        </description>
        <value/>
    </param>

    <param subparam="true" name="spw" type="any">
            <shortdescription>select data by spectral window IDs, e.g. \'3,5,7\' (default all)</shortdescription>
            <description>Data selection by spw ids.
                         example: '3,4' (generate images for spw 3 and 4)
            </description>
            <type>string</type>
            <value type="string"/>
    </param>

    <param subparam="true" name="dryrun" type="bool">
	<shortdescription>Run the task (False) or display task command (True)</shortdescription>
        <description>Run the commands (True) or generate the commands to be 
                     run but do not execute (False).
        </description>
	<value>False</value>
    </param>

    <param subparam="true" name="acceptresults" type="bool">
	<shortdescription>Add the results into the pipeline context</shortdescription>
        <description>Add the results of the task to the pipeline context (True)
                     or reject them (False).
        </description>
	<value>True</value>
    </param>

    <constraints>
	<when param="pipelinemode">
	    <equals value="automatic" type="string">
	    </equals>
	    <equals value="interactive" type="string">
                <default param="infiles"><value type="stringVec"/></default>
                <default param="field"><value type="string"/></default>
                <default param="spw"><value type="string"/></default>
		<default param="dryrun"><value type="bool">False</value></default>
		<default param="acceptresults"><value type="bool">True</value></default>
	    </equals>
	    <equals value="getinputs" type="string">
                <default param="infiles"><value type="stringVec"/></default>
                <default param="field"><value type="string"/></default>
                <default param="spw"><value type="string"/></default>
	    </equals>
	</when>
    </constraints>

</input>


<returns>any</returns>

<example></example>
</task>
</casaxml>
