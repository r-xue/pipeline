<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task type="function" name="hifa_renorm" category="pipeline">
<shortdescription>Base renorm task</shortdescription>
<description>
</description>
<input>
    <param type="stringVec" name="vis" subparam="true">
	<description>List of input visibility data</description>
	<value></value>
    </param>

    <param name="apply" type="bool">
        <shortdescription>Apply renormalization correction</shortdescription>
        <description>Apply renormalization correction</description>
        <value>False</value>
    </param>

    <param name="threshold" type="float">
        <shortdescription>Apply correction if max correction is above threshold and apply=True</shortdescription>
        <description>Apply correction if max correction is above threshold and apply=True. 
            Default is 1.02 (i.e. 2%)
        </description>
        <value>1.02</value>
    </param>

    <param name="correctATM" type="bool">
        <shortdescription>Correct for ATM residual features</shortdescription>
        <description>Use the ATM model transmission profiles to try and correct
            for any ATM residual features that get into the scaling spectra
        </description>
        <value>False</value>
    </param>  

    <param name="spw" type="string">
        <shortdescription>List of spectral windows to use in data selection</shortdescription>
        <description>The list of spectral windows to evaluate. Set to spw='' by default,
            which means the task will select all relevant (science FDM) spectral windows.

            Example: spw="[11,13,15,17]"
        </description>
        <value/>
    </param>

    <param name="excludechan" type="string">
        <shortdescription>Channels to exclude</shortdescription>
        <description>Channels to exclude in either channel or frequency space (TOPO, GHz)
            Examples: excludechan="{'22':'100~150;800~850', '24':'100~200'}"
                      excludechan="{'22':'230.1GHz~230.2GHz'}"
        </description>
        <value/>
    </param>

    <param name="atm_auto_exclude" type="bool">
        <shortdescription>Automatically find and exclude regions with atmospheric features.</shortdescription>
        <description>Automatically find and exclude regions with atmospheric features.
                Default is False
        </description>
        <value>False</value>
    </param>

    <param type="string" name="pipelinemode">
    <shortdescription>The pipeline operating mode</shortdescription>
	<description>The pipeline operating mode</description>
	<value>automatic</value>
	<allowed kind="enum">
	    <value>automatic</value>
	    <value>interactive</value>
	    <value>getinputs</value>
	</allowed>
    </param>

    <param type="bool" name="dryrun" subparam="true">
    <shortdescription>Run the task (False) or display task command (True)</shortdescription>
	<description>Run the task (False) or display task command (True)</description>
	<value>False</value>
    </param>

    <param type="bool" name="acceptresults" subparam="true">
    <shortdescription>Add the results into the pipeline context</shortdescription>
	<description>Add the results into the pipeline context</description>
	<value>True</value>
    </param>

    <constraints>
	<when param="pipelinemode">
	    <equals type="string" value="automatic">
	    </equals>
	    <equals type="string" value="interactive">
                <default param="vis"><value type="stringVec"></value></default>

		<default param="dryrun"><value type="bool">False</value></default>
		<default param="acceptresults"><value type="bool">True</value></default>
	    </equals>
	    <equals type="string" value="getinputs">
                <default param="vis"><value type="stringVec"></value></default>

	    </equals>
	</when>
    </constraints>

</input>

<returns type="void"/>


<example>
</example>
</task>
</casaxml>
