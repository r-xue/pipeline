<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task category="pipeline" name="h_init" type="function">
<shortdescription>Initialize the interferometry pipeline</shortdescription>

<description>
The h_init task initializes the interferometry pipeline and optionally 
imports data.

h_init  must be called before any other interferometry pipeline task. The
pipeline can be initialized in one of two ways: by creating a new pipeline 
state (h_init) or be loading a saved pipeline state (h_resume).

h_init creates an empty pipeline context but does not load visibility data
into the context. hif_importdata or hsd_importdata can be used to load data.

If pipeline mode is 'getinputs' then None is returned. Otherwise
the results object for the pipeline task is returned.
</description>
<input>
    <param name="pipelinemode" type="string">
	<shortdescription>The pipeline operating mode</shortdescription>
	<description>The pipeline operating mode. In 'automatic' mode the pipeline determines the values of all context defined pipeline inputs automatically.  In interactive mode the user can set the pipeline context defined parameters manually.  In 'getinputs' mode the user can check the settings of all pipeline parameters without running the task.
	</description>
	<value>automatic</value>
	<allowed kind="enum">
	    <value>automatic</value>
	    <value>interactive</value>
	    <value>getinputs</value>
	</allowed>
    </param>

    <param name="loglevel" subparam="true" type="string">
	<shortdescription>Log level for pipeline messages</shortdescription>
	<description>Log level for pipeline messages. Log messages below this threshold will not be displayed.</description>

	<value>info</value>
	<allowed kind="enum">
	    <value>trace</value>
	    <value>debug</value>
	    <value>info</value>
	    <value>warning</value>
	    <value>error</value>
	    <value>critical</value>
	</allowed>
    </param>

    <param name="plotlevel" subparam="true" type="string">
		<shortdescription>Pipeline plot level threshold</shortdescription>
		<description>Toggle generation of detail plots in the web log. A level of 'all' generates 
					 all plots; 'summary' omits detail plots; 'default' generates all plots 
					 apart from for the hif_applycal task.
		</description>
		<value>default</value>
		<allowed kind="enum">
		    <value>all</value>
		    <value>default</value>
		    <value>summary</value>
		</allowed>
    </param>

    <param name="output_dir" subparam="true" type="string">
	<shortdescription>The output working directory</shortdescription>
	<description>Working directory for pipeline processing. Some pipeline
		processing products such as HTML logs and images will be directed to
		subdirectories of this path. 
    </description>
	<value>./</value>
    </param>

    <param name="weblog" subparam="true" type="bool">
	<shortdescription>Generate the web log</shortdescription>
	<description>Generate the web log</description>
	<value>True</value>
    </param>

    <param name="overwrite" subparam="true" type="bool">
        <shortdescription>Overwrite existing files on import</shortdescription>
        <description>Overwrite existing files on import</description>
	<value>True</value>
    </param>

    <param name="dryrun" subparam="true" type="bool">
	<shortdescription>Run the task (False) or display the task command (True)</shortdescription>
	<description>Run the task (False) or display the task command (True)</description>
	<value>False</value>
    </param>

    <param name="acceptresults" subparam="true" type="bool">
	<shortdescription>Add the results into the pipeline context</shortdescription>
	<description>Add the results into the pipeline context</description>
	<value>True</value>
    </param>

    <constraints>
	<when param="pipelinemode">
	    <equals type="string" value="automatic">
	    </equals>
	    <equals type="string" value="interactive">
		<default param="loglevel"><value type="string">info</value></default>
		<default param="plotlevel"><value type="string">default</value></default>
		<default param="output_dir"><value type="string">./</value></default>
		<default param="weblog"><value type="bool">True</value></default>
		<default param="overwrite"><value type="bool">True</value></default>
		<default param="dryrun"><value type="bool">False</value></default>
		<default param="acceptresults"><value type="bool">True</value></default>
	    </equals>
	    <equals type="string" value="getinputs">
		<default param="loglevel"><value type="string">info</value></default>
		<default param="plotlevel"><value type="string">default</value></default>
		<default param="output_dir"><value type="string">./</value></default>
		<default param="weblog"><value type="bool">True</value></default>
		<default param="overwrite"><value type="bool">True</value></default>
	    </equals>
	</when>
    </constraints>

</input>


<returns>any</returns>


<example>
Examples

1. Create the pipeline context

h_init()
</example>
</task>
</casaxml>
