<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task category="pipeline" name="h_export_calstate" type="function">
<shortdescription>Save the pipeline calibration state to disk</shortdescription>

<description>
h_export_calstate saves the current pipeline calibration state to disk
in the form of a set of equivalent applycal calls.

If filename is not given, h_export_calstate saves the calibration state to
disk with a filename based on the pipeline context creation time, using the
extension '.calstate'

One of two calibration states can be exported: either the active calibration
state (those calibrations currently applied on-the-fly but scheduled for
permanent application to the MeasurementSet in a subsequent hif_applycal
call) or the applied calibration state (calibrations that were previously
applied to the MeasurementSet using hif_applycal). The default is to export
the active calibration state.

Issues

If run several times in one pipeline session does the automatic export
file naming scheme, overwrite previous versions?
</description>		

<input>
    <param name="filename" type="string">
        <shortdescription>Name for saved calibration state</shortdescription>
        <description>Name for saved calibration state</description>
        <value/>
    </param>

  <param name="state" type="string">
    <shortdescription>The calibration state to export</shortdescription>
    <description>The calibration state to export</description>
    <value>active</value>
    <allowed kind="enum">
      <value>active</value>
      <value>applied</value>
    </allowed>
  </param>

</input>

<example>
Example

1. Save the calibration state.

   h_export_calstate()

2. Save the active calibration state with a custom filename

   h_export_calstate(filename='afterbandpass.calstate')

3. Save the applied calibration state with a custom filename

   h_export_calstate(filename='applied.calstate', state='applied')
</example>
<returns>void</returns></task>
</casaxml>
