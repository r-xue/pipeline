

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pipeline.extern.findContinuum &mdash; Pipeline unknown documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/custom_theme.css?v=678032d9" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=3f1b9271"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Pipeline
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Releases etc.</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Past Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modular.html">Run the Pipeline in a Conda environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies.html">Dependencies of <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Tasks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline_tasks/pipeline_tasks.html">Pipeline Heuristics Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Tasks (autosummary)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pipeline.h.cli.html">pipeline.h.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.hif.cli.html">pipeline.hif.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.hifa.cli.html">pipeline.hifa.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.hifv.cli.html">pipeline.hifv.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.hsd.cli.html">pipeline.hsd.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.hsdn.cli.html">pipeline.hsdn.cli</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Heuristics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../heuristics/field_parameter.html">Field parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../heuristics/FlaggingTasks.html">Pipeline Flagging Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/ways_to_run_the_pipeline.html">Ways to run the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/comparing_pipeline_executions.html">Comparing pipeline executions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/building_the_pipeline.html">Building the pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/ALMA-Imaging-Workflow.html">ALMA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLA-Imaging-Workflow.html">VLA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLASS-SE-CONT-Imaging-Workflow.html">VLASS-SE-CONT imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLASS-SE-CUBE-Imaging-Workflow.html">VLASS-SE-CUBE imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/selfcal_workflow.html">VLASS Selfcal &amp; Restore workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/pipeline_tests.html">Pipeline testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/DataType_Testing.html">DataType Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/QA_scores.html">Pipeline Quality Assurance (QA) Score Class Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/DeveloperDocumentation.html">Pipeline developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/python3_conversion_notes.html">Python 3 conversion notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/recipes.html">Pipeline Recipes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Domain/Context (automodapi)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics.html"><code class="docutils literal notranslate"><span class="pre">pipeline.domain</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html#module-pipeline.infrastructure.launcher"><code class="docutils literal notranslate"><span class="pre">pipeline.infrastructure.launcher</span></code> module</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Domain/Context (autosummary)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pipeline.domain.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.infrastructure.launcher.html">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Task/Inputs/Results Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../classes.html">Classes in <code class="docutils literal notranslate"><span class="pre">pipeline.h*.tasks</span></code> modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes.html#inheritance-diagrams">Inheritance Diagrams</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples Notes (from Jupyter Notebooks)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/test1.html">test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Notes (from .rst)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/test2.html">Example 1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pipeline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">pipeline.extern.findContinuum</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/pipeline.extern.findContinuum.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pipeline.extern.findContinuum">
<span id="pipeline-extern-findcontinuum"></span><h1>pipeline.extern.findContinuum<a class="headerlink" href="#module-pipeline.extern.findContinuum" title="Link to this heading"></a></h1>
<p>This file implements the algorithm to determine continuum channel ranges to
use from an ALMA image cube (dirty or clean) in CASA format.  All dependencies
on what were originally analysisUtils functions have been pasted into this
file for convenience.  This function is meant to be run inside CASA.
Simple usage:</p>
<blockquote>
<div><p>import findContinuum as fc
fc.findContinuum(‘my_dirty_cube.image’)</p>
</div></blockquote>
<p>This file can be found in a typical pipeline distribution directory, e.g.:
/lustre/naasc/sciops/comm/rindebet/pipeline/branches/trunk/pipeline/extern
As of March 7, 2019 (version 3.36), it is compatible with both python 2 and 3.</p>
<p>Code changes for Pipeline2025 (as of July 24, 2024)
0) Fix crash in recalcMomDiffSNR (not used by pipeline)
1) Prevent crash due to no pyfits module available in CASA 6.6.6.
2) Change <a href="#id63"><span class="problematic" id="id64">np.string_</span></a> to <a href="#id65"><span class="problematic" id="id66">np.bytes_</span></a></p>
<p>Code changes for Pipeline2024 (as of July 30, 2024)
0) No longer disable onlyExtraMask when returnBluePoints==True
1) No longer search for vis in cube dir if not specified, only if vis==’auto’
2) Remove two print statements at import
3) Restore PL2022 behavior of allowing autoLower if returnBluePoints==True
4) add tooManyPixels parameter to control amendMaskDecision
5) widen selections narrower than 4 to make them visible but with thinner linewidth
6) add useBaseline option (default to ‘auto’)
7) force use of middleChannels in extraMask/onlyExtraMask/autoLower/autoLower2
8) import copy
9) change algorithm in robustMADofContinuumRanges to avoid problems with</p>
<blockquote>
<div><p>taking median of the MADs of lots of narrow ranges; fit slope to medians
to remove impact of slope on the global MAD of all findcont channels,
and use peakSNR&gt;7 instead of 15.   2023-08-08</p>
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>Allow transition names of “Continuum(ID=X)” for X&gt;0 to also be considered
continuum if there is only (at most) one appearance of “ID=”  2023-08-08</p></li>
<li><p>Add chans parameter to imageSNR.   2024-04-29</p></li>
<li><p>Fix for PIPE-2034 (incorrect AllCont display)  2024-04-29</p></li>
<li><p>Fix for PIPE-2158 (warningStrings is now always a list of length 2, but see 15) 2024-04-29</p></li>
<li><p>Fix for PIPE-1644 (reverted plot now shows the difSNR value)  2024-04-30</p></li>
<li><p>Fix for PIPE-1629 (pb mask is applied to joint.mask and joint.mask2) and
further fix PIPE-2158     2024-04-30</p></li>
<li><p>New code for PIPE-2171 (write dirtyCubeStats.txt file)   2024-05-09</p></li>
<li><p>Fix for PIPE-1579 (annulus fully inscribed)   2024-05-09</p></li>
<li><p>Fix for PIPE-1657 (speed up pbmom calculation)  2024-05-09</p></li>
<li><p>Add CASA version to end of name of dirtyCubeStats_CASAx.y.z.txt file. 2024-05-23</p></li>
<li><p>Reduce the length of cyan line for single channel case    2024-06-01</p></li>
<li><p>Fix for PIPE-2188 (try harder to avoid LowSpread)  2024-06-03</p></li>
<li><p>Fix for PIPE-1992: if dynamic range of mom0 is high (&gt;90), raise the mom0minsnr mask threshold to 8</p></li>
<li><p>Add spectralDynamicRangeString to first line of legend</p></li>
<li><p>Final fix for PIPE-1629 (pb mask is applied to jointMask when it is pb-based)</p></li>
</ol>
<p>Code changes for Pipeline2023 (as of June 12, 2023)
0) Enable amendMaskIterations=4: .autoLower2 will run if LowBW not yet reached
1) Set amendMaskIterations=’auto’ to invoked amendMaskIterations=4
2) Set madRatioCheck to False instead of True when middle channels used as baseline
3) Add parameter for momDiffLevelForProceeding with default of 8.0
4) Use scalingFactor = 6/7 in extraMask and .onlyExtraMask if groups &gt; 32
5) Add minGroupsForSFCAdjustment as a control parameter, with default of 7
6) Add maxGroups as a control parameter, with a default of 15
7) When entering autoLower, use 6/7 instead of 5/7 if momDiffSNR&lt;momDiffApproachLevel
8) Add myia option to imageChannelFrequencies (to support recalcMomDiffSNR)
9) Compute mom0 and mom8 at the same time in findContinuum, plotPickleFile,</p>
<blockquote>
<div><p>recalcMomDiffSNR, and meanSpectrumFromMom0Mom8JointMask()</p>
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>Fix plotPickleFile crash for single channel ranges</p></li>
<li><p>Support a list of intersectRanges in recalcMomDiffSNR</p></li>
<li><p>Add useUncorrectedMedian as a manual usage option</p></li>
</ol>
<p>13) Add dotted cyan line marking the median of the selected continuum channels
and display its value in the second line of the legend
14) Elevate storeExtraMask as a main control parameter
15) Add returnBluePoints, enableInitialQuadratic and removeOutlierBaselineChannels
as main control parameters.
16) Add skipCubeNoise option
17) Add returnMomDiffSNR option (for hif_findcont to set to True)
18) import astropy.io.fits as pyfits, if possible
19) fix for PIPE-1636 (set nbin=1 if ‘cont’ found in transition name), incl. search for vis in cube dir
20) Add ‘auto’ option to enableInitialQuadratic (but keep True as the default)
21) import gaussian_filter from scipy.ndimage (instead of scipy.ndimage.filters)
22) Fix onlyExtraMaskYesOrNo to allow YesMom when skipCubeNoise is set to True by the user
23) Raise momDiffLevel by 3.5 (from 8 to 11.5) for 7m SingleContinuum to get more AllCont
24) Avoid fix for CAS-13894 in casa &gt;= 6.5.3
25) Add amendMaskIterations as parameter to compute4LetterCodeAndUpdateLegend
26) Add spectralDynamicRangeBandWidth parameter for PIPE-1566 with default=None</p>
<p>Code changes for Pipeline2022 from PIPE-1221: (as of August 21, 2022)
0) fix for PIPE-1227 (look for .virtspw first)
1) Do not remove pbmom if it already exists (for speeding up manual use case)
2) import pickle and add useJointMaskPrior control parameter for mom0mom8jointMask
3) PIPE-1433: set definition for TDM for VLA data, add telescope parameter
4) add optional img parameter to plotPickleFile (for manual use case)
5) add optional window parameter and automatic smooth when nbin&gt;1 (PIPE-848)
6) add optional intersectRanges parameter to plotPickleFile (for manual use case)
7) fix for PIPE-1518 and PIPE-1498
8) abbreviate Frequency to Freq. in the upper x-axis label to make room for nbin
9) add removal of median in calculation of initialPeakOverMad (PIPE-848)
10) Show horizontal cyan line even for ranges that are only one channel wide
11) add control parameter for peakOverMadCriterion, set to 65
12) add control parameter for minPeakOverMadForSFCAdjustment, set to 25
13) add additional clause for momDiffSNR&lt;15 in order to adjust sFC in .autoLower
14) prevent undefined var if returnSFC=True
15) in autoLower, change scalingFactor for sFC from 5/7 to 6/7
16) in [‘.extraMask’,’.onlyExtraMask’,’.autoLower’], set finalSigmaFindContinuum
17) skyThresholds adjusted to 5.0, 0.40
18) change maxMadRatioForSFCAdjustmentInLaterIterations from 1.20 to 1.18
19) in .extraMask, reset sigmaFindContinuum to sigmaFindContinuumForExtraMask=2.5
20) fix crash in representativeSpw, remove call to isSingleContinuum
21) do not revert if momDiffSNR &lt; momDiffLevel
22) cast spw list intersection to int (since msmd produces inconsistent types)
23) fix crash in cubeFrameToTopo when vis not specified</p>
<p>Code changes for Pipeline2021 from PIPE-824: (as of July 20, 2021)
0) fix for PRTSPR-50321
1) change .rstrip(‘.image’)+’.mask’ to .replace(‘.image’,’.mask’)
2) fix for PIPE-1181 (protection for all joint mask pixels between pb=0.20-21)
3) add nbin=1 parameter in preparation for PIPE-849
4) fix for PIPE-1211 (does not revert to first range in Result6)
5) add separate ALL_CONTINUUM fraction threshold of 0.91 for nchan&lt;75 (PIPE-825)
6) fix for PIPE-1213 (and correction to roundFigures, unused by current PL)</p>
<p>Code changes for Pipeline2020:
0) fix for PIPE-554 (bug found in cube imaging of calibrators by ARI-L project)
1) fix for PIPE-525 (divide by zero in a 130-target MOUS)
2) new feature PIPE-702 (expand mask if mom8fc image has emission outside it)
3) Add warning messages for too little bandwidth or too little spread.
4) if outdir is specified and does not exist, stop and print error message.
5) Modified the is_binary() function to work in both python 2 and 3.
6) Add LSRK frequency ranges in a new final line of the .dat file
7) Increase to 2 significant digits on sigmaFC in the png name
8) Allow manually specified narrow value to be used everywhere instead of ‘auto’
9) Print Final selection message to casa log
10) fix bug in convertSelectionIntoChannelList (only relevant if avoidance used)
11) allow single value in convertSelection
12) fix bug in avoidance range when gaps were trimmed (not relevant to PL)
13) remove warning about no beam in cube header
14) Add totalChannels &amp; medianWidthOfRanges parameters+logic to pickAutoTrimChannels()
15) Insure that channel ranges are in increasing order if a second range is added to a solo range
16) add imstatListit=False to all imstat calls
17) add minor ticks to lower x-axis (channel number) of the plot
18) added 21 new control parameters to findContinuum (default values listed) for a total of 98:</p>
<blockquote>
<div><ul class="simple">
<li><p>returnWarnings=False (PL 2020 might set this to True if Dirk has time)</p></li>
<li><p>sigmaFindContinuumMode=’auto’ (split from sigmaFindContinuum)</p></li>
<li><p>returnSigmaFindContinuum=False</p></li>
<li><p>enableRejectNarrowInnerWindows=True (to be able to disable it manually)</p></li>
<li><p>avoidExtremaInNoiseCalcForJointMask=False</p></li>
<li><p>buildMom8fc=True</p></li>
<li><p>momentdir=’’</p></li>
<li><p>amendMaskIterations=’auto’</p></li>
<li><p>skipchan=1</p></li>
<li><p>checkIfMaskWouldHaveBeenAmended=False</p></li>
<li><p>fontsize=10</p></li>
<li><p>thresholdForSame=0.01 (to control the new 4-letter codes)</p></li>
<li><p>keepIntermediatePngs=True</p></li>
<li><p>enableOnlyExtraMask=True</p></li>
<li><p>useMomentDiff=True</p></li>
<li><p>smallBandwidthFraction=0.05</p></li>
<li><p>smallSpreadFraction=0.33</p></li>
<li><p>skipAmendMask=False (for manual usage)</p></li>
<li><p>useAnnulus=True</p></li>
<li><p>cubeSigmaThreshold=7.5</p></li>
<li><p>npixThreshold=7 (for onlyExtraMask)</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>Added 27 new functions:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>round_half_up (to support the same rounding in python 3 as 2)</p></li>
<li><p>byteDecode (to convert bytes to string for python 3)</p></li>
<li><p>imageSNR</p></li>
<li><p>imageSNRAnnulus</p></li>
<li><p>plotChannelSelections</p></li>
<li><p>compute4LetterCodeAndUpdateLegend</p></li>
<li><p>compute4LetterCode</p></li>
<li><p>cubeNoiseLevel</p></li>
<li><p>updateChannelRangesOnPlot</p></li>
<li><p>computeNpixCubeMedian</p></li>
<li><p>computeNpixMom8Median</p></li>
<li><p>computeNpixMom8MedianBadAtm</p></li>
<li><p>replaceLineFullRangesWithNoise</p></li>
<li><p>gatherWarnings</p></li>
<li><p>tooLittleBandwidth</p></li>
<li><p>tooLittleSpread</p></li>
<li><p>computeSpread</p></li>
<li><p>amendMaskYesOrNo</p></li>
<li><p>extraMaskYesOrNo</p></li>
<li><p>onlyExtraMaskYesOrNo</p></li>
<li><p>invertChannelRanges</p></li>
<li><p>robustMADofContinuumRanges</p></li>
<li><p>findWidestContiguousListInChannelRange</p></li>
<li><p>imagePercentileNoMask (not used by PL because avoidExtremaInNoiseCalcForJointMask=False)</p></li>
<li><p>combineContDat (not used by pipeline)</p></li>
<li><p>getSpwFromPipelineImageName (not used by pipeline)</p></li>
<li><p>getFieldnameFromPipelineImageName (not used by pipeline)</p></li>
</ul>
</div></blockquote>
<p>-Todd Hunter</p>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.CalcAtmTransmissionForImage" title="pipeline.extern.findContinuum.CalcAtmTransmissionForImage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CalcAtmTransmissionForImage</span></code></a>(img, imageInfo)</p></td>
<td><p>This function is called by atmosphereVariation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.ExpandYLimitsForLegend" title="pipeline.extern.findContinuum.ExpandYLimitsForLegend"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExpandYLimitsForLegend</span></code></a>()</p></td>
<td><p>Called by runFindContinuum.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.MAD" title="pipeline.extern.findContinuum.MAD"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MAD</span></code></a>(a[, c, axis])</p></td>
<td><p>This function is called by removeInitialQuadraticIfNeeded, findContinuumChannels, meanSpectrum, computeStatisticalSpectrumFromMask, plotStatisticalSpectrumFromMask and runFindContinuum. Median Absolute Deviation along given axis of an array:      median(abs(a - median(a))) / c c = 0.6745 is the constant to convert from MAD to std.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.aboveBelow" title="pipeline.extern.findContinuum.aboveBelow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aboveBelow</span></code></a>(avgSpectrumNansReplaced, threshold)</p></td>
<td><p>This function is called by runFindContinuum. Given an array of values (i.e. a spectrum) and a threshold value, this function computes and returns 6 items: * the number of channels above that threshold (group 1) * the number of channels below that threshold (group 2) * the ratio of these numbers (i.e., #ChanAboveThreshold / #ChanBelowThreshold)) * sum of the intensities in group (1) * sum of the intensities in group (2) * the ratio of these sums  (i.e., FluxAboveThreshold / FluxBelowThreshold)   (This value is not currently used by the calling function.)   Example with 24 channels where 3 have positive spikes, and rest are zero:                    3      2      3        channelsAbove = 3  +threshold=+1 ........................ sumAbove = (3-1) + (2-1) + (3-1) = 5        zero ---------------------------   channelsBelow = 21  -threshold=-1 ........................ sumBelow = 21*(1-0) = 21.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.allContinuumSelected" title="pipeline.extern.findContinuum.allContinuumSelected"><code class="xref py py-obj docutils literal notranslate"><span class="pre">allContinuumSelected</span></code></a>(selection, nchan[, ...])</p></td>
<td><p>Returns True if only one range is selected and that range covers sufficient bandwidth (default fraction = 92.5%) nchan: number of channels in the spectrum fraction: for nchan &gt;= 75 (default = 0.925 which is 92.5%) fraction2: for nchan &lt; 75 (default = 0.91)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.amendMaskYesOrNo" title="pipeline.extern.findContinuum.amendMaskYesOrNo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">amendMaskYesOrNo</span></code></a>(badAtmosphere, median, ...)</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.atmosphereVariation" title="pipeline.extern.findContinuum.atmosphereVariation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">atmosphereVariation</span></code></a>(img, imageInfo, chanInfo)</p></td>
<td><p>This function is called by findContinuum. Computes the absolute and percentage variation in atmospheric transmission and sky temperature across an image cube. Returns 5 values: max(Trans)-min(Trans), and as percentage of mean,                   Max(Tsky)-min(Tsky), and as percentage of mean,                   standard devation of Tsky.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.avgOverCube" title="pipeline.extern.findContinuum.avgOverCube"><code class="xref py py-obj docutils literal notranslate"><span class="pre">avgOverCube</span></code></a>(pixels[, useAbsoluteValue, ...])</p></td>
<td><p>This function was used by Cycle 4 and 5 pipeline from meanSpectrum(), but will not be used in the Cycle 6 default heuristic of 'mom0mom8jointMask'. Computes the average spectrum across a multi-dimensional array read from an image cube, ignoring any NaN values. Inputs: pixels: a 3D array (with degenerate Stokes axis dropped) threshold: value in Jy median: if True, compute the median instead of the mean mask: use pixels inside this spatial mask (i.e. with value==1 or True) to compute       the average (the spectral mask is taken as the union of all channels)       This is the mask located inside the image cube specified in findContinuum(img='') usermask: this array results from the mask specified in findContinuum(mask='') parameter If threshold is specified, then it only includes pixels with an intensity above that value. Returns: * average spectrum * percentage of pixels not masked Note: This function assumes that the spectral axis is the final axis. If it is not, there is no single setting of the axis parameter that     can make it work.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.buildMeanSpectrumFilename" title="pipeline.extern.findContinuum.buildMeanSpectrumFilename"><code class="xref py py-obj docutils literal notranslate"><span class="pre">buildMeanSpectrumFilename</span></code></a>(img, ...[, ...])</p></td>
<td><p>This function is called by findContinuum and runFindContinuum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.byteDecode" title="pipeline.extern.findContinuum.byteDecode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">byteDecode</span></code></a>(buffer)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.casaRestToTopo" title="pipeline.extern.findContinuum.casaRestToTopo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">casaRestToTopo</span></code></a>(restFrequency, ...)</p></td>
<td><p>Converts a range of SOURCE frame frequencies to TOPO channels in a specified measurement set.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.casaVersionCompare" title="pipeline.extern.findContinuum.casaVersionCompare"><code class="xref py py-obj docutils literal notranslate"><span class="pre">casaVersionCompare</span></code></a>(comparitor, versionString)</p></td>
<td><p>This function is called by meanSpectrum. Uses cu.compare_version in CASA5, uses string comparison in CASA4 and 6. (but is not used by meanSpectrumMethod='mom0mom8jointMask' which is  the Pipeline default).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.casalogPost" title="pipeline.extern.findContinuum.casalogPost"><code class="xref py py-obj docutils literal notranslate"><span class="pre">casalogPost</span></code></a>(mystring[, debug, priority])</p></td>
<td><p>Generates an INFO message prepended with the version number of findContinuum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.centralArcsecArgumentMismatch" title="pipeline.extern.findContinuum.centralArcsecArgumentMismatch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">centralArcsecArgumentMismatch</span></code></a>(centralArcsec, ...)</p></td>
<td><p>This function is called by checkForMismatch.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.channelSelectionRangesToIndexArray" title="pipeline.extern.findContinuum.channelSelectionRangesToIndexArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">channelSelectionRangesToIndexArray</span></code></a>(selection)</p></td>
<td><p>This function is called by runFindContinuum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.channelsInLargestGroup" title="pipeline.extern.findContinuum.channelsInLargestGroup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">channelsInLargestGroup</span></code></a>(selection)</p></td>
<td><p>This function is called by runFindContinuum.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.checkForMismatch" title="pipeline.extern.findContinuum.checkForMismatch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">checkForMismatch</span></code></a>(meanSpectrumFile, img, ...)</p></td>
<td><p>This function is called by runFindContinuum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.checkForTriangularWavePattern" title="pipeline.extern.findContinuum.checkForTriangularWavePattern"><code class="xref py py-obj docutils literal notranslate"><span class="pre">checkForTriangularWavePattern</span></code></a>(img[, ...])</p></td>
<td><p>+++++++ This function is not used for meanSpectrumMethod == 'mom0mom8jointMask'.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.combineContDat" title="pipeline.extern.findContinuum.combineContDat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">combineContDat</span></code></a>(contdatlist[, outputfile, ...])</p></td>
<td><p>Takes a list of <a href="#id1"><span class="problematic" id="id2">*</span></a>.dat files created by findContinuum for a single field/spw and pulls the line that contains LSRK frequency ranges from each one, and writes it to a new cont.dat file suitable for the pipeline that contains an entry for each spw of that field. contdatlist: a list or comma-delimited string of the .dat files, or of       the cube names (to which '_findContinuum.dat' will be appended) fieldname: use this value if specified, otherwise parse from filename spw: integer or string integer, use this value if specified, otherwise parse      from the filename Note: It assumes that none of the files originate from an ALLcont spw, so it will never write the &quot;ALL&quot; line that the pipeline triggers on. But this feature could be added by calling the following function if there is only one range of channels read:    allContinuumSelected(selection, nchan, fraction=ALL_CONTINUUM_CRITERION) We would only need to know nchan.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.compute4LetterCode" title="pipeline.extern.findContinuum.compute4LetterCode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute4LetterCode</span></code></a>(mom8fcPeak, mom8fcPeak0, ...)</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.compute4LetterCodeAndUpdateLegend" title="pipeline.extern.findContinuum.compute4LetterCodeAndUpdateLegend"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute4LetterCodeAndUpdateLegend</span></code></a>(...[, ...])</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.computeBandwidth" title="pipeline.extern.findContinuum.computeBandwidth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">computeBandwidth</span></code></a>(selection, channelWidth[, loc])</p></td>
<td><p>This function is called by runFindContinuum and findContinuum.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.computeMadSpectrum" title="pipeline.extern.findContinuum.computeMadSpectrum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">computeMadSpectrum</span></code></a>(img[, box])</p></td>
<td><p>+++++++ This function is not used for meanSpectrumMethod == 'mom0mom8jointMask'.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.computeMedianCorrectionFactor" title="pipeline.extern.findContinuum.computeMedianCorrectionFactor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">computeMedianCorrectionFactor</span></code></a>(baselineMode, ...)</p></td>
<td><p>This function is called by findContinuumChannels and medianCorrected.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.computeNpixCubeMedian" title="pipeline.extern.findContinuum.computeNpixCubeMedian"><code class="xref py py-obj docutils literal notranslate"><span class="pre">computeNpixCubeMedian</span></code></a>(mom8fcMedian, ...)</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.computeNpixMom8Median" title="pipeline.extern.findContinuum.computeNpixMom8Median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">computeNpixMom8Median</span></code></a>(mom8fcMedian, ...[, ...])</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.computeNpixMom8MedianBadAtm" title="pipeline.extern.findContinuum.computeNpixMom8MedianBadAtm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">computeNpixMom8MedianBadAtm</span></code></a>(mom8fcMedian, ...)</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.computeSpread" title="pipeline.extern.findContinuum.computeSpread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">computeSpread</span></code></a>(selection, channelWidth)</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.computeStatisticalSpectrumFromMask" title="pipeline.extern.findContinuum.computeStatisticalSpectrumFromMask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">computeStatisticalSpectrumFromMask</span></code></a>(cube, ...)</p></td>
<td><p>New heuristic for Cycle 6 pipeline. It is called by meanSpectrumFromMom0Mom8JointMask Uses ia.getprofile to compute the mean spectrum of a cube within a masked area. jointmask: a 2D or 3D mask image indicating which pixels shall be used            or an expression with &lt; or &gt; along with a 2D or 3D mask image jointMaskForNormalize: a 2D or 3D mask image to be used when normalizeByMAD==True pbimg: the path to the primary beam of this cube, or a 2D primary beam with an expression statistic: passed to ia.getprofile via the 'function' parameter normalizeByMAD: if True, then create the inverse of the jointmask and   normalize the spectrum by the spectrum of 'xmadm' (scaled MAD)   computed on the inverse mask subimage: if True, then raise the pb level annulus by 0.2 Returns: three arrays: channels, freqs(Hz), intensities, and a Boolean    which says if normalization was applied.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.convertChannelListIntoSelection" title="pipeline.extern.findContinuum.convertChannelListIntoSelection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">convertChannelListIntoSelection</span></code></a>(channels[, ...])</p></td>
<td><p>This function is called by findContinuumChannels.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.convertColonDelimitersToHMSDMS" title="pipeline.extern.findContinuum.convertColonDelimitersToHMSDMS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">convertColonDelimitersToHMSDMS</span></code></a>(mystring[, ...])</p></td>
<td><p>This function is called by rad2radec. Converts HH:MM:SS.SSS, +DD:MM:SS.SSS  to  HHhMMmSS.SSSs, +DDdMMmSS.SSSs       or HH:MM:SS.SSS +DD:MM:SS.SSS   to  HHhMMmSS.SSSs +DDdMMmSS.SSSs       or HH:MM:SS.SSS, +DD:MM:SS.SSS  to  HHhMMmSS.SSSs, +DD.MM.SS.SSS       or HH:MM:SS.SSS +DD:MM:SS.SSS   to  HHhMMmSS.SSSs +DD.MM.SS.SSS s: whether or not to include the trailing 's' in both axes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.convertSelectionIntoChannelList" title="pipeline.extern.findContinuum.convertSelectionIntoChannelList"><code class="xref py py-obj docutils literal notranslate"><span class="pre">convertSelectionIntoChannelList</span></code></a>(selection)</p></td>
<td><p>Converts an arbitrary CASA selection string into an array of channel numbers '0~1;4~6' --&gt; np.array([0,4,5]) Ignores any initial spw number that preceeds a colon.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.cornersEmptyEdgesNotEmpty" title="pipeline.extern.findContinuum.cornersEmptyEdgesNotEmpty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cornersEmptyEdgesNotEmpty</span></code></a>(pbcube[, ...])</p></td>
<td><p>Checks if the four corner pixels of an image are masked while the four middle edge pixels are not masked --&gt; True, otherwise False</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.countChannels" title="pipeline.extern.findContinuum.countChannels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">countChannels</span></code></a>(channels)</p></td>
<td><p>This function is called by runFindContinuum. Counts the number of channels in a CASA channel selection string. If multiple spws are found, then it returns a dictionary of counts: e.g. &quot;1:5~20;30~40&quot;  yields 27; or  '6~30' yields 25      &quot;1:5~20;30~40,2:6~30&quot; yields {1:27, 2:25}.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.countChannelsInRanges" title="pipeline.extern.findContinuum.countChannelsInRanges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">countChannelsInRanges</span></code></a>(channels[, separator])</p></td>
<td><p>This function is called by runFindContinuum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.countMaskedPixels" title="pipeline.extern.findContinuum.countMaskedPixels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">countMaskedPixels</span></code></a>(img)</p></td>
<td><p>The mask internal to an image will have a value of False where masked, and True where not masked.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.countPixelsAboveZero" title="pipeline.extern.findContinuum.countPixelsAboveZero"><code class="xref py py-obj docutils literal notranslate"><span class="pre">countPixelsAboveZero</span></code></a>(img[, pbmom, ...])</p></td>
<td><p>This function is called by meanSpectrumFromMom0Mom8JointMask.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.countUnmaskedPixels" title="pipeline.extern.findContinuum.countUnmaskedPixels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">countUnmaskedPixels</span></code></a>(img[, useImstat, outdir])</p></td>
<td><p>This function is called by meanSpectrumFromMom0Mom8JointMask.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.createNoisyQuadratic" title="pipeline.extern.findContinuum.createNoisyQuadratic"><code class="xref py py-obj docutils literal notranslate"><span class="pre">createNoisyQuadratic</span></code></a>([n, nsigma])</p></td>
<td><p>Function meant simply to test removeStatContQuadratic.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.create_casa_quantity" title="pipeline.extern.findContinuum.create_casa_quantity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_casa_quantity</span></code></a>(myqatool, value, unit)</p></td>
<td><p>This function is called by CalcAtmTransmissionForImage, frames, and lsrkToRest.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.cubeFrameToTopo" title="pipeline.extern.findContinuum.cubeFrameToTopo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cubeFrameToTopo</span></code></a>(img, imageInfo[, freqrange, ...])</p></td>
<td><p>This function is called by CalcAtmTransmissionForImage and writeContDat. Reads the date of observation, central RA and Dec, and observatory from an image cube and then calls lsrkToTopo to return the specified frequency range in TOPO, and the name of the original frame that was converted (which will not be a REST-frame cube's frame if vis not specified). If the cube is in REST frame, it calls casaRestToTopo(), and if the cube is in LSRK frame, it calls lsrkToTopo(). freqrange: desired range of frequencies (empty string or list = whole cube)       floating point list of two frequencies, or a delimited string       (delimiter = ',', '~' or space) prec: in fractions of Hz (only used to display the value when verbose=True) chanwidth: unused vis: read date of observation from the specified measurement set (instead of from img).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.cubeNoiseLevel" title="pipeline.extern.findContinuum.cubeNoiseLevel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cubeNoiseLevel</span></code></a>(cube[, pbcube, mask, ...])</p></td>
<td><p>Used in Pipeline2020 going forward. Computes median of the per-channel scaled MAD within the standard noise annulus and outside the specified mask chans: channel selection string (passed to imstat) mask: either mask image to use (e.g. the string passed to imstat will be '&quot;mask&quot; == 0')       or a proper mask string containing &gt;, &lt; or == percentile: compute this percentile value of the per-channel scaled MAD       (examples: 50 = median,  90 = close to the highest value)       if it is a list, then a list of values is returned Returns: median of MAD, median       or [list of MADs], median.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.cutSomeNarrowRanges" title="pipeline.extern.findContinuum.cutSomeNarrowRanges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cutSomeNarrowRanges</span></code></a>(selection[, nkeep, ...])</p></td>
<td><p>Remove the N narrowest ranges from a channel selection string to avoid CAS-13894 crash of immoments. selection: e.g. '14~18;50~60' nkeep: number of ranges to keep (failures of imstat have been seen at 244     and 245).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.drawYlabel" title="pipeline.extern.findContinuum.drawYlabel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">drawYlabel</span></code></a>(img, typeOfMeanSpectrum, ...[, ...])</p></td>
<td><p>This function is called by runFindContinuum.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.extraMaskYesOrNo" title="pipeline.extern.findContinuum.extraMaskYesOrNo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extraMaskYesOrNo</span></code></a>(badAtmosphere, median, ...)</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.fieldIDForName" title="pipeline.extern.findContinuum.fieldIDForName"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fieldIDForName</span></code></a>(mymsmd, source)</p></td>
<td><p>Returns field ID for source name, ignoring those fields which are not used to observe the main target and calibrator intents (when those intents are also observed).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.findChannelsInChannelRangeWithComparableIntensity" title="pipeline.extern.findContinuum.findChannelsInChannelRangeWithComparableIntensity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findChannelsInChannelRangeWithComparableIntensity</span></code></a>(...)</p></td>
<td><p>Finds channels in a portion of the spectrum (intensity) whose intensity is within the range of intensities of the blue points (channels) by some sigma beyond the min and max.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.findContinuum" title="pipeline.extern.findContinuum.findContinuum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findContinuum</span></code></a>([img, pbcube, psfcube, ...])</p></td>
<td><p>This function calls functions to: 1) compute a representative 'mean' spectrum of a dirty cube 2) find the continuum channels 3) plot the results and writes a text file with channel ranges and frequency ranges It calls runFindContinuum up to 2 times.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.findContinuumChannels" title="pipeline.extern.findContinuum.findContinuumChannels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findContinuumChannels</span></code></a>(spectrum[, ...])</p></td>
<td><p>This function is called by runFindContinuum. Trys to find continuum channels in a spectrum, based on a threshold or some number of edge channels and their median and standard deviation. Inputs: spectrum: a one-dimensional array of intensity values nBaselineChannels: number of channels over which to compute standard deviation/MAD sigmaFindContinuum: value to multiply the standard deviation by then add   to median to get threshold. Default = 3. narrow: the minimum number of channels in a contiguous block to accept         if 0&lt;narrow&lt;1, then it is interpreted as the fraction of all                        channels within identified blocks nanmin: the value that NaNs were replaced by in previous steps baselineMode: 'min' or 'edge',  'edge' will use nBaselineChannels/2 from each edge trimChannels: if integer, use that number of channels. If float between   0 and 1, then use that fraction of channels in each contiguous list   (rounding up). If 'auto', then use 0.1 but not more than maxTrim channels. The 'auto' mode can also cause trimChannels to be set to 13 or 6 in certain   circumstances (when moderately strong lines are present). maxTrim: if trimChannels='auto', this is the max channels to trim per group for TDM spws; it is automatically scaled upward for FDM spws. maxTrimFraction: in trimChannels='auto', the max fraction of channels to trim per group separator: the character to use to separate groups of channels in the string returned negativeThresholdFactor: scale the nominal negative threshold by this factor (to adjust     sensitivity to absorption features: smaller values=more sensitive) dropBaselineChannels: percentage of extreme values to drop in baseline mode 'min' madRatioUpperLimit, madRatioLowerLimit: if ratio of MADs (MAD of all baseline channels /     MAD of baseline channels with extreme channels dropped) is between these values, then     apply dropBaselineChannels when defining the MAD of the baseline range fitResult: coefficients from linear or quadratic fit, only relevant when meanSpectrumMethod is          not 'mom0mom8jointMask' signalRatioTier1: threshold for signalRatio, above which we desensitize the level to     consider line emission in order to avoid small differences in noise levels from     affecting the result (e.g. that occur between serial and parallel tclean cubes)     signalRatio=1 means: no lines seen, while closer to zero: more lines seen signalRatioTier2: second threshold for signalRatio, used for FDM spws (nchan&gt;192) and     for cases of peakOverMad &lt; 5. Should be &lt; signalRatioTier1. sigmaFindContinuumMode: if 'auto', then do not desensitize with signalRatioTier1 removeOutlierBaselineChannels: after dropBaselineChannels, remove &gt;4*scMAD     outliers;  options: 'high', 'low', 'both'/True, or '' which means none/False returnBluePoints: if True, then simply set the continuum ranges to the baseline points      (i.e. the blue points) instead of what the other heuristics might have found useBaseline: 'low', 'middle', 'high' or 'auto'; auto tries to automatically pick 'low' for    spectra that are emission-line dominated, 'high' if absorption line dominated, or 'both' if    both types of lines are present.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.findOuterAnnulusForPBCube" title="pipeline.extern.findContinuum.findOuterAnnulusForPBCube"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findOuterAnnulusForPBCube</span></code></a>(pbcube[, ...])</p></td>
<td><p>Given a PB cube, finds the minimum sensitivity value, then computes the corresponding higher value to form an annulus.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.findSpectralAxis" title="pipeline.extern.findContinuum.findSpectralAxis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findSpectralAxis</span></code></a>(img)</p></td>
<td><p>This function is called by computeStatisticalSpectrumFromMask, getImageInfo, findContinuum and numberOfChannelsInCube.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.findWidestContiguousListInChannelRange" title="pipeline.extern.findContinuum.findWidestContiguousListInChannelRange"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findWidestContiguousListInChannelRange</span></code></a>(...)</p></td>
<td><p>Given a list of channels, find the longest contiguous list in the first half or second half example: CASA &lt;43&gt;: fc.findWidestContiguousListInChannelRange([2,3,7,8,9,12,13,14,15], [10,20], [7,8,9]) Out[43]: [12, 13, 14, 15] channels: list of blue points channel numbers channelRange: range of channels to look for widest set of blue points continuumChannels: current selection of continuuum channels Returns: a list of contiguous channels</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.findWidestContiguousListInOtherHalf" title="pipeline.extern.findContinuum.findWidestContiguousListInOtherHalf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">findWidestContiguousListInOtherHalf</span></code></a>(...)</p></td>
<td><p>Given a list of channels, find the longest contiguous list in the first half or second half example: CASA &lt;43&gt;: fc.findWidestContiguousListInOtherHalf([2,3,7,8,9,12,13,14,15], True, 20) Out[43]: [12, 13, 14, 15] channels: list of blue points channel numbers lowerHalf: a Boolean (True for lower half, False for upper half) nchan: total channels in spectrum</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.flattenMask" title="pipeline.extern.findContinuum.flattenMask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flattenMask</span></code></a>(mask[, outfile, overwrite])</p></td>
<td><p>Takes a multi-channel CASA image mask and propagates all pixels to a new single plane image mask outfile: default name = &lt;mask&gt;.flattened - Todd Hunter</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.frames" title="pipeline.extern.findContinuum.frames"><code class="xref py py-obj docutils literal notranslate"><span class="pre">frames</span></code></a>([velocity, datestring, ra, dec, ...])</p></td>
<td><p>This function is called by restToTopo.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.gatherWarnings" title="pipeline.extern.findContinuum.gatherWarnings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gatherWarnings</span></code></a>(selection, chanInfo, ...)</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.gauss_kern" title="pipeline.extern.findContinuum.gauss_kern"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gauss_kern</span></code></a>(size)</p></td>
<td><p>Returns a normalized 2D gauss kernel array for convolutions.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.gaussianBeamOffset" title="pipeline.extern.findContinuum.gaussianBeamOffset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gaussianBeamOffset</span></code></a>([response, fwhm])</p></td>
<td><p>++++ This function is used by pipeline in computeStatisticalSpectrumFromMask().</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.gaussianBeamResponse" title="pipeline.extern.findContinuum.gaussianBeamResponse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gaussianBeamResponse</span></code></a>(radius, fwhm)</p></td>
<td><p>++++ This function is used by pipeline in computeStatisticalSpectrumFromMask().</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">gaussian_filter</span></code>(input, sigma[, order, ...])</p></td>
<td><p>Multidimensional Gaussian filter.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getDateObs" title="pipeline.extern.findContinuum.getDateObs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDateObs</span></code></a>(img[, myia])</p></td>
<td><p>This function is called by cubeFrameToTopo.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getEquinox" title="pipeline.extern.findContinuum.getEquinox"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getEquinox</span></code></a>(img[, myia])</p></td>
<td><p>This function is called by cubeFrameToTopo.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getFieldnameFromPipelineImageName" title="pipeline.extern.findContinuum.getFieldnameFromPipelineImageName"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getFieldnameFromPipelineImageName</span></code></a>(img[, verbose])</p></td>
<td><p>Extracts the field name from the pipeline image file name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getFreqType" title="pipeline.extern.findContinuum.getFreqType"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getFreqType</span></code></a>(img)</p></td>
<td><p>This function is called by runFindContinuum and cubeFrameToTopo.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getImageInfo" title="pipeline.extern.findContinuum.getImageInfo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getImageInfo</span></code></a>(img[, returnBeamAreaPerChannel])</p></td>
<td><p>This function is called by findContinuum and meanSpectrum. Extract the beam and pixel information from a CASA image. This was copied from getFitsBeam in analysisUtils.py. Returns: A list of 12 things: bmaj, bmin, bpa, cdelt1, cdelt2,              naxis1, naxis2, frequency, shape, crval1, crval2, maxBaseline,              telescope name    Beam angles are in arcseconds (bpa in degrees), crvals are in radians    Frequency is in GHz and is the central frequency    MaxBaseline is in meters, inferred from freq and beamsize (will be zero for .residual images).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getMaxpixpos" title="pipeline.extern.findContinuum.getMaxpixpos"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getMaxpixpos</span></code></a>(img)</p></td>
<td><p>This function is called by findContinuum, but only in Cycle 4+5 heuristic.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getMemorySize" title="pipeline.extern.findContinuum.getMemorySize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getMemorySize</span></code></a>()</p></td>
<td><p>This function is called by findContinuum and runFindContinuum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getObservationStart" title="pipeline.extern.findContinuum.getObservationStart"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getObservationStart</span></code></a>(vis[, obsid, verbose])</p></td>
<td><p>Reads the start time of the observation from the OBSERVATION table (using tb tool) and reports it in MJD seconds.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getObservationStartDate" title="pipeline.extern.findContinuum.getObservationStartDate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getObservationStartDate</span></code></a>(vis[, obsid, ...])</p></td>
<td><p>Uses the tb tool to read the start time of the observation and reports the date.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getObservatoryName" title="pipeline.extern.findContinuum.getObservatoryName"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getObservatoryName</span></code></a>(vis)</p></td>
<td><p>+++++++ This function is not used by pipeline, because it is only used by getScienceSpws.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getScienceSpwBandwidths" title="pipeline.extern.findContinuum.getScienceSpwBandwidths"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getScienceSpwBandwidths</span></code></a>(vis[, intent, tdm, ...])</p></td>
<td><p>Returns: an array of bandwidths (in Hz) in order sorted by spw ID returnDict: if True, then return a dictionary keyed by spw ID -Todd Hunter</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getScienceSpws" title="pipeline.extern.findContinuum.getScienceSpws"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getScienceSpws</span></code></a>(vis[, intent, returnString, ...])</p></td>
<td><p>Return a list of spws with the specified intent. For ALMA data, it ignores channel-averaged and SQLD spws. intent: either full intent name including #subIntent, or an abbreviated key, like 'PHASE' returnString: if True, return '1,2,3'               if False, return [1,2,3] returnListOfStrings: if True, return ['1','2','3']  (amenable to tclean spw parameter)                      if False, return [1,2,3] returnFreqRanges: if True, returns a dictionary keyed by spw ID, with values       equal to the frequency of the middle of the min and max channel (Hz) -- Todd Hunter.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getScienceSpwsForFrequency" title="pipeline.extern.findContinuum.getScienceSpwsForFrequency"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getScienceSpwsForFrequency</span></code></a>(vis, frequency[, ...])</p></td>
<td><p>Returns a list of science spws that cover a given frequency.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getSpwFromPipelineImageName" title="pipeline.extern.findContinuum.getSpwFromPipelineImageName"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getSpwFromPipelineImageName</span></code></a>(img[, verbose])</p></td>
<td><p>Extracts the spw ID from the pipeline image file name.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getTelescope" title="pipeline.extern.findContinuum.getTelescope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getTelescope</span></code></a>(img[, myia])</p></td>
<td><p>This function is called by CalcAtmTransmissionForImage and cubeFrameToTopo.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.getcube" title="pipeline.extern.findContinuum.getcube"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getcube</span></code></a>(i[, filename])</p></td>
<td><p>++++ This function is not used by pipeline.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.grep" title="pipeline.extern.findContinuum.grep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">grep</span></code></a>(filename, arg)</p></td>
<td><p>This function is called only by maskArgumentMismatch and centralArcsecArgumentMismatch.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.help" title="pipeline.extern.findContinuum.help"><code class="xref py py-obj docutils literal notranslate"><span class="pre">help</span></code></a>([match, debug])</p></td>
<td><p>Print an alphabetized list of all the defined functions at the top level in this python file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.imageChannelFrequency" title="pipeline.extern.findContinuum.imageChannelFrequency"><code class="xref py py-obj docutils literal notranslate"><span class="pre">imageChannelFrequency</span></code></a>(img[, channel, myia])</p></td>
<td><p>Returns the frequency (in GHz) of the specified channel of any CASA or FITS image cube with a spectral axis. channel: can be a scalar or a list/vector, if None then return list for all channels,          if -1 then return the final channel Returns: value in GHz; scalar (if one channel) or array (if more than 1 channel) -Todd Hunter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.imagePercentileNoMask" title="pipeline.extern.findContinuum.imagePercentileNoMask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">imagePercentileNoMask</span></code></a>(img, percentiles)</p></td>
<td><p>percentiles: a single value or a list Returns: a single value or a list</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.imageSNR" title="pipeline.extern.findContinuum.imageSNR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">imageSNR</span></code></a>(img[, axes, mask, maskWithAnnulus, ...])</p></td>
<td><p>Uses imstat (which automatically applies the internal mask, i.e avoids the black edges of the image) to compute (max-median)/scaledMAD axes: passed to imstat (use [0,1,2] to get a vector SNR per channel) img: a 2D image or a cube mask: additional mask image (or expression) to apply when computing everything but max maskWithAnnulus: additional mask image (or expression) to use for median and MAD         if useAnnulus==True (but always take the smaller of the 2 possible MADs) applyMaskToAll: also apply the provided mask when computing the max (default=False=anywhere) returnAllStats: if True, then also return the peak, median and scaledMAD where the       peak has <em>not</em> had the median subtracted (in contrast to the SNR) usepb: (optional) name of a single-plane pb image to include in the mask (at &gt;0.23 level) -ToddHunter</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.imageSNRAnnulus" title="pipeline.extern.findContinuum.imageSNRAnnulus"><code class="xref py py-obj docutils literal notranslate"><span class="pre">imageSNRAnnulus</span></code></a>(mymomDiff, jointMaskTest, ...)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.intersectChannelSelections" title="pipeline.extern.findContinuum.intersectChannelSelections"><code class="xref py py-obj docutils literal notranslate"><span class="pre">intersectChannelSelections</span></code></a>(selection1, ...)</p></td>
<td><p>Take the intersection of two ranges.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.invertChannelRanges" title="pipeline.extern.findContinuum.invertChannelRanges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">invertChannelRanges</span></code></a>(invertstring[, nchan, ...])</p></td>
<td><p>Takes a CASA channel selection string and inverts it.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.isSingleContinuum" title="pipeline.extern.findContinuum.isSingleContinuum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isSingleContinuum</span></code></a>(vis[, spw, source, ...])</p></td>
<td><p>+++++++ This function is not used by pipeline, rather it is an expected input parameter. Checks whether an spw was defined as single continuum in the OT by looking at the transition name in the SOURCE table of a measurement set. vis: a single measurement set, a comma-delimited list, or a python list      (only the first one will be used) Optional parameters: spw: can be integer ID or string integer ID; if not specified, then it      will use the first science spw source: passed to transitions(); if not specified, it will use the first one intent: if source is blank then use first one with matching intent and spw mymsmd: an existing instance of the msmd tool.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.is_binary" title="pipeline.extern.findContinuum.is_binary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_binary</span></code></a>(filename)</p></td>
<td><p>This function is called by runFindContinuum.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.linfit" title="pipeline.extern.findContinuum.linfit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">linfit</span></code></a>(x, y, yerror[, pinit])</p></td>
<td><p>This function is called by atmosphereVariation in Cycle 4+5+6 and by runFindContinuum in Cycle 4+5.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.locatePBCube" title="pipeline.extern.findContinuum.locatePBCube"><code class="xref py py-obj docutils literal notranslate"><span class="pre">locatePBCube</span></code></a>(cube)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.lsrkToRest" title="pipeline.extern.findContinuum.lsrkToRest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lsrkToRest</span></code></a>(lsrkFrequency, velocityLSRK, ...)</p></td>
<td><p>This function is called by lsrkToTopo.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.lsrkToTopo" title="pipeline.extern.findContinuum.lsrkToTopo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lsrkToTopo</span></code></a>(lsrkFrequency, datestring, ra, dec)</p></td>
<td><p>This function is called by cubeFrameToTopo.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.makeUvcontsub" title="pipeline.extern.findContinuum.makeUvcontsub"><code class="xref py py-obj docutils literal notranslate"><span class="pre">makeUvcontsub</span></code></a>([files, fitorder, useFrequency])</p></td>
<td><p>+++++++ This function is not used anywhere else in this file. Takes a list of output files from findContinuum and builds an spw selection for uvcontsub, then prints the resulting commands to the screen. files: a list of files, either a comma-delimited string, a python list, or a wildcard string fitorder: passed through to the uvcontsub useFrequency: if True, then produce selection string in frequency; otherwise use channels   Note: frequencies in the findContinuum .dat file are topo, which is what uvcontsub wants.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.maskArgumentMismatch" title="pipeline.extern.findContinuum.maskArgumentMismatch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">maskArgumentMismatch</span></code></a>(mask, meanSpectrumFile, ...)</p></td>
<td><p>This function is called by checkForMismatch.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.maxLengthOfLists" title="pipeline.extern.findContinuum.maxLengthOfLists"><code class="xref py py-obj docutils literal notranslate"><span class="pre">maxLengthOfLists</span></code></a>(lists)</p></td>
<td><p>This function is called by findContinuumChannels.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.meanSpectrum" title="pipeline.extern.findContinuum.meanSpectrum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meanSpectrum</span></code></a>(img[, nBaselineChannels, ...])</p></td>
<td><p>This function is not used by Cycle 6 pipeline, but remains as a manual user option. Computes a threshold and then uses it to compute the average spectrum across a CASA image cube, via the specified method. Inputs: nBaselineChannels: number of channels to use as the baseline in                    the 'meanAboveThreshold' methods. baselineMode: how to select the channels to use as the baseline:           'edge': use an equal number of channels on each edge of the spw            'min': use the percentile channels with the lowest absolute intensity sigmaCube: multiply this value by the rms to get the threshold above which a pixel            is included in the mean spectrum nanBufferChannels: when removing or replacing NaNs, do this many extra channels                    beyond their actual extent useAbsoluteValue: passed to avgOverCube percentile: used with baselineMode='min' continuumThreshold: if specified, only use pixels above this intensity level meanSpectrumFile: name of ASCII file to produce to speed up future runs centralArcsec: default=-1 means whole field, or a floating point value in arcsec mask: a mask image (e.g. from clean); restrict calculations to pixels with mask=1 chanInfo: the list returned by numberOfChannelsInCube meanSpectrumMethod: 'peakOverMad', 'peakOverRms', 'meanAboveThreshold',               'meanAboveThresholdOverRms', or 'meanAboveThresholdOverMad' * 'meanAboveThreshold': uses a selection of baseline channels to compute the     rms to be used as a threshold value (similar to constructing a moment map). * 'meanAboveThresholdOverRms/Mad': scale spectrum by RMS or MAD * 'peakOverRms/Mad' computes the ratio of the peak in a spatially-smoothed     version of cube to the RMS or MAD. Smoothing is set by peakFilterFWHM. peakFilterFWHM: value used by 'peakOverRms' and 'peakOverMad' to presmooth     each plane with a Gaussian kernel of this width (in pixels)     Set to 1 to not do any smoothing. useIAGetProfile: if True, then for peakOverMad, or meanAboveThreshold with     baselineMode='min', then use ia.getprofile instead of ia.getregion     and the subsequent arithmetic (because it should be faster) useThresholdWithMask: if False, then just take mean rather than meanAboveThreshold     when a mask has been specified nbin: this argument is accepted but not used (not yet implemented for this older mode) Returns 8 items:    * avgspectrum (vector)    * avgspectrumAboveThresholdNansRemoved (vector)    * avgspectrumAboveThresholdNansReplaced (vector)    * threshold (scalar)    * edgesUsed: 0=lower, 1=upper, 2=both    * nchan (scalar)    * nanmin (the value used to replace NaNs)    * percentagePixelsNotMasked.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.meanSpectrumFromMom0Mom8JointMask" title="pipeline.extern.findContinuum.meanSpectrumFromMom0Mom8JointMask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meanSpectrumFromMom0Mom8JointMask</span></code></a>(cube, ...)</p></td>
<td><p>This function is called by runFindContinuum when meanSpectrumMethod='mom0mom8jointMask'. This is the new heuristic for Cycle 6 which creates the moment 0 and moment 8 images for a cube, takes their union and determines the mean spectrum by calling computeStatisticalSpectrumFromMask(), which uses ia.getprofile. pbcube: if not specified, then assume '.residual' should be replaced in the name by '.pb' pbmom: if not specified, then assume '.pb' should be replaced in the name by '.pbmom' overwriteMoments: rebuild the mom0 and mom8 images even if they already exist overwriteMasks: rebuild the mom0 and mom8 mask images even if they already exist phase2: if True, then run a second phase if SNR is high minPixelsInJointMask: if fewer than these pixels are found, then use all pixels above pb=0.3 userJointMask: if specified, use this joint mask instead of computing one; if it is a cube mask,    as from tclean, then this function will form a flattened version first, and then use that snrThreshold: if SNR is higher than this, and phase2==True, then run a phase 2 mask calculation mom0minsnr: sets the threshold for the mom0 image (i.e. median + mom0minsnr*scaledMAD of the whole image) mom8minsnr: sets the threshold for the mom8 image (i.e. median + mom8minsnr*scaledMAD of thw whole image) enableInitialQuadratic: if True, assess the need for quadratic removal, and use the     old-style method to remove it rmStatContQuadratic: if True, then do not do the initialQuadratic removal (if enabled    and deemed necessary), but instead always perform the new-style quadratic removal bidirectionalMaskPhase2: True=extend mask to negative values beyond threshold;         False=Cycle6+ behavior (True was tried but gives worse results in some cases) outdir: directory to write the mom0, mom8, masks, .dat and mean spectrum text files avoidExtremaInNoiseCalcForJointMask: experimental Boolean to avoid pixels &lt;5%ile and &gt;95%ile          in the chauvenet imstat of mom0 and mom8 images momentdir: alternate directory to look for existing mom0 and mom8 images mom08simultaneous: if True, set moments=[0,8] in one call to immoments instead of two Returns: 17 things:    * 1) the meanSpectrum    * 2) a Boolean which states whether normalization was applied    * 3) the number of pixels in the mask    * 4) a Boolean for whether the mask reverted to pb-based    * 5) a Boolean for whether a quadratic was removed    * 6) the initialQuadraticImprovementRatio    * 7) the list of 3 mom0snrs    * 8) the list of 3 mom8snrs    * 9) the number of regions pruned    * 10) number of pixels in moment 8 mask    * 11) mom0peak (Jy*km/s)    * 12) mom8peak (Jy)    * 13) name of jointMask file    * 14) nbin    * 15) initialPeakOverMad    * 16) mom0peakOverMad    * 17) mom8peakOverMad.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.medianCorrected" title="pipeline.extern.findContinuum.medianCorrected"><code class="xref py py-obj docutils literal notranslate"><span class="pre">medianCorrected</span></code></a>(baselineMode, percentile, ...)</p></td>
<td><p>This function is called by findContinuumChannels. Computes the true median of a datastream from the observed median and MAD of the lowest Nth percentile points. signalRatio: when there is a lot of signal, we need to reduce the              correction factor because it is less like Gaussian noise              It is 1.0 if no lines are present, 0.25 if half the channels              have signal, etc.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.mjdSecondsToMJDandUT" title="pipeline.extern.findContinuum.mjdSecondsToMJDandUT"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mjdSecondsToMJDandUT</span></code></a>(mjdsec[, debug, prec, ...])</p></td>
<td><p>This function is called by mjdToUT.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.mjdToUT" title="pipeline.extern.findContinuum.mjdToUT"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mjdToUT</span></code></a>(mjd[, use_metool, prec])</p></td>
<td><p>This function is called by getDateObs. Converts an MJD value to a UT date and time string such as '2012-03-14 00:00:00 UT' use_metool: whether or not to use the CASA measures tool if running from CASA. This parameter is simply for testing the non-casa calculation. -Todd Hunter.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.modifyContinuumChannels" title="pipeline.extern.findContinuum.modifyContinuumChannels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">modifyContinuumChannels</span></code></a>(...[, ...])</p></td>
<td><p>Re-assess spectrum using new minlevel and maxlevel verbose: print the list of channel ranges after each stage of processing</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.nanmean" title="pipeline.extern.findContinuum.nanmean"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanmean</span></code></a>(a[, axis])</p></td>
<td><p>This function is called by findContinuumChannels, runFindContinuum, and avgOverCube.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.nanmedian" title="pipeline.extern.findContinuum.nanmedian"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nanmedian</span></code></a>(x[, axis, preop])</p></td>
<td><p>This function is called by MAD, avgOverCube, and meanSpectrum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.numberOfChannelsInCube" title="pipeline.extern.findContinuum.numberOfChannelsInCube"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numberOfChannelsInCube</span></code></a>(img[, returnFreqs, ...])</p></td>
<td><p>This function is called by findContinuum, cubeFrameToTopo, computeStatisticalSpectrumFromMask, and meanSpectrum. Finds the number of channels in a CASA image cube. returnFreqs: if True, then also return the frequency of the center of the        first and last channel (in Hz) returnChannelWidth: if True, then also return the channel width (in Hz) verbose: if True, then print the frequencies of first and last channel -Todd Hunter.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.oneEvent" title="pipeline.extern.findContinuum.oneEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">oneEvent</span></code></a>(npts[, events, positive, verbose])</p></td>
<td><p>This function is called by meanSpectrumFromMom0Mom8JointMask.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.onlyExtraMaskYesOrNo" title="pipeline.extern.findContinuum.onlyExtraMaskYesOrNo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">onlyExtraMaskYesOrNo</span></code></a>(badAtmosphere, median, ...)</p></td>
<td><p>Used in Pipeline2020 going forward. badAtmosphere: either a boolean or a string ('goodAtm' or 'badAtm') momDiffSNR: SNR where peak is measured over whole image (instead of outside mask),                (mom scaledMAD is in denominator) momDiffSNRCube: SNR where peak is measured over whole image (instead of outside mask),                (cube scaledMAD is in denominator) NpixCubeAnywhere: unused now momDiffLevel: for the non-badAtmosphere case, this is passed in from momDiffLevelForProceeding.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.parseFrequencyArgument" title="pipeline.extern.findContinuum.parseFrequencyArgument"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parseFrequencyArgument</span></code></a>(bandwidth)</p></td>
<td><p>This function is called by parseFrequencyArgumentToGHz, topoFreqToChannel and cubeFrameToTopo.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.parseFrequencyArgumentToGHz" title="pipeline.extern.findContinuum.parseFrequencyArgumentToGHz"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parseFrequencyArgumentToGHz</span></code></a>(bandwidth)</p></td>
<td><p>This function is called by frames and lsrkToRest.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.parseFrequencyArgumentToHz" title="pipeline.extern.findContinuum.parseFrequencyArgumentToHz"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parseFrequencyArgumentToHz</span></code></a>(bandwidth)</p></td>
<td><p>Converts a frequency string into floating point in Hz, based on the units.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">percentileofscore</span></code>(a, score[, kind, nan_policy])</p></td>
<td><p>Compute the percentile rank of a score relative to a list of scores.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.pickAutoTrimChannels" title="pipeline.extern.findContinuum.pickAutoTrimChannels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pickAutoTrimChannels</span></code></a>(totalChannels, length, ...)</p></td>
<td><p>This function is called by splitListIntoContiguousListsAndTrim and pickTrimString.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.pickNarrow" title="pipeline.extern.findContinuum.pickNarrow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pickNarrow</span></code></a>(length)</p></td>
<td><p>This function is called by pickNarrowString and findContinuumChannels. Automatically picks a setting for the narrow parameter of findContinuumChannels() based on the number of channels in the spectrum. Returns: an integer Examples: This formula results in the following values: length: 64,128,240,480,960,1920,3840,7680: return:  2,  3,  3,  3,  3,   4,   4,   4  (ceil(log10)) <a href="#id3"><span class="problematic" id="id4">**</span></a>** current function <a href="#id5"><span class="problematic" id="id6">**</span></a>**          2,  2,  2,  3,  3,   3,   4,   4  (round_half_up(log10))          1,  2,  2,  2,  2,   3,   3,   3  (floor(log10))          5,  5,  6,  7,  7,   8,   9,   9  (ceil(log))          4,  5,  5,  6,  7,   8,   8,   9  (round_half_up(log))          4,  4,  5,  6,  6,   7,   8,   8  (floor(log)).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.pickNarrowString" title="pipeline.extern.findContinuum.pickNarrowString"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pickNarrowString</span></code></a>(narrow, length[, ...])</p></td>
<td><p>This function is called by runFindContinuum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.pickRandomError" title="pipeline.extern.findContinuum.pickRandomError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pickRandomError</span></code></a>([seed])</p></td>
<td><p>Picks a random value from a Gaussian distribution with mean 0 and standard deviation = 1.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.pickRandomErrors" title="pipeline.extern.findContinuum.pickRandomErrors"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pickRandomErrors</span></code></a>([nvalues])</p></td>
<td><p>Picks a series of random values from a Gaussian distribution with mean 0 and standard deviation = 1 and returns it as an array.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.pickTrimString" title="pipeline.extern.findContinuum.pickTrimString"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pickTrimString</span></code></a>(totalChannels, trimChannels, ...)</p></td>
<td><p>This function is called by runFindContinuum.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.pick_sFC_TDM" title="pipeline.extern.findContinuum.pick_sFC_TDM"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pick_sFC_TDM</span></code></a>(meanSpectrumMethod, singleContinuum)</p></td>
<td><p>This function is called by runFindContinuum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.plotChannelSelections" title="pipeline.extern.findContinuum.plotChannelSelections"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plotChannelSelections</span></code></a>(ax1, selection, ...[, ...])</p></td>
<td><p>avgspectrumAboveThreshold: computed in runFindContinuum medianTrue, threshold: computed by findContinuumChannels Returns labelDescs: list of plot artists that may be removed and replaced later</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.plotMeanSpectrum" title="pipeline.extern.findContinuum.plotMeanSpectrum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plotMeanSpectrum</span></code></a>(meanSpectrumFile[, ...])</p></td>
<td><p>Not used by pipeline. Reads a <a href="#id7"><span class="problematic" id="id8">*</span></a>.findcont.residual.meanSpectrum.&lt;method&gt; file and plots it as intensity vs. channel. plotfile: set to a string to generate a png selection: channel selection string to draw in cyan horizontal lines,    and its median intensity as a dotted cyan line.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.plotPickleFile" title="pipeline.extern.findContinuum.plotPickleFile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plotPickleFile</span></code></a>(priorValuesFile[, ...])</p></td>
<td><p>Allows rapid feedback from adjusting the cut level of the pickle file spectrum created by a previous run of findContinuum, and produces a new _findContinuum.dat file. priorValuesFile: pickle file from prior run of findContinuum      The following things are used: the spectrum, jointMask. plotfile: if not defined, set it to jointMask+'_adjusted.png'          if it is a directory path, then prepend it contdat: name of file to write; if not defined, set it to     jointMask+'_adjusted_findContinuum.dat';     if it is a directory path, then prepend it to this default filename img: full path to cube, in case it has been moved since creating the pickle intersectRanges: if specified, don't allow selections outside of these ranges,      example: '60~80;200~300' computeMomDiffSNR: if specified, compute and return the momDiffSNR useAnnulus: passed to fc.imageSNR trimChannels: use 0 to avoid re-trimming ranges that were already trimmed      in the initial run of findContinuum subimage: passed to findOuterAnnulusForPBCube() to raise annulus by 0.2 sigmaFindContinuumMode: passed to findContinuumChannels() To invoke alternative method, set: minlevel: level of lower dotted line of prior findContinuum run maxlevel: level of upper dotted line of prior findContinuum run median: level of solid line of prior findContinuum run (only needed to     draw this level on the plot, or if fraction is specified) fraction: scale the median-to-min distance and median-to-max distance by this    fraction prior to running; if &gt;1.0, then also ignore intersectRanges avoidance: passed to modifyContinuumChannels; thus, only used if minlevel/maxlevel/median     are set grid: if True, draw dotted grid lines at the major tick marks Note: only minlevel and maxlevel are ultimately passed to modifyContinuumChannels;       fraction and median are merely a way to adjust them automatically.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.plotSigmaCorrectionFactor" title="pipeline.extern.findContinuum.plotSigmaCorrectionFactor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plotSigmaCorrectionFactor</span></code></a>([percentile])</p></td>
<td><p>Makes a plot of sigmaCorrectionFactor for the principle options for number of channels in an ALMA cube</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.plotStatisticalSpectrumFromMask" title="pipeline.extern.findContinuum.plotStatisticalSpectrumFromMask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plotStatisticalSpectrumFromMask</span></code></a>(cube[, ...])</p></td>
<td><p>Simple wrapper to call computeStatisticalSpectrumFromMask and plot it. jointMask: either a mask image, or an expression with &lt; or &gt; on an mask       image.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.polyfit" title="pipeline.extern.findContinuum.polyfit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">polyfit</span></code></a>(x, y, yerror[, pinit])</p></td>
<td><p>This function is called by removeInitialQuadraticIfNeeded in Cycle 6, and by runFindContinuum in Cycle 4+5. Basic second-order polynomial function fitter with error bars in y-axis data points. Uses scipy.optimize.leastsq(). Accepts either lists or arrays. Input:      x, y: x and y axis values      yerror: uncertainty in the y-axis values (vector or scalar)      pinit contains the initial guess of [slope, intercept]      y = order2coeff*(x-xoffset)**2 + slope*(x-xoffset) + y-intercept Output:    The fit result as: [xoffset, order2coeff, slope, y-intercept].</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.printPickleFile" title="pipeline.extern.findContinuum.printPickleFile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">printPickleFile</span></code></a>(priorValuesFile)</p></td>
<td><p>Prints the contents of the specified pickle file of prior values</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.propagateMaskToAllChannels" title="pipeline.extern.findContinuum.propagateMaskToAllChannels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">propagateMaskToAllChannels</span></code></a>(mask[, axis])</p></td>
<td><p>This function is called by meanSpectrum. Takes a spectral mask array, and propagates every masked spatial pixel to all spectral channels of the array. Returns: a 2D mask (of the same spatial dimension as the input,           but with only 1 channel).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.pruneMask" title="pipeline.extern.findContinuum.pruneMask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pruneMask</span></code></a>(mymask[, psfcube, minbeamfrac, ...])</p></td>
<td><p>available in CASA &gt;= 5.4.0-X  (see CAS-11335) Removes any regions smaller than prunesize contiguous pixels. psfcube: if specified, then use minbeamfrac * pixelsPerBeam, otherwise use prunesize prunesize: value used if psfcube is None; use 6 because pipeline size mitigation could     produce images that have only 3 pixels across the beam, meaning only ~7-8 pts/beam nchan: number of channels to process, will always be 1 in findContinuum's use case overwrite: if True, replaces mymask with pruned mask, putting original in mymask.prepruned            if False, is simply creates: mymask.pruned, but only if it pruned anything If all regions are pruned, it checks if it is ACA7m (maxBaseline &lt; 60m) and if so, tries again with minbeamfrac*0.5.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.rad2radec" title="pipeline.extern.findContinuum.rad2radec"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rad2radec</span></code></a>([ra, dec, prec, verbose, ...])</p></td>
<td><p>This function is called by cubeFrameToTopo.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.readContDat" title="pipeline.extern.findContinuum.readContDat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readContDat</span></code></a>(filename)</p></td>
<td><p>Reads the channel selection for a _findContinuum.dat file</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.readContDatAggregateContinuum" title="pipeline.extern.findContinuum.readContDatAggregateContinuum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readContDatAggregateContinuum</span></code></a>(filename)</p></td>
<td><p>Reads the aggregate continuum from a _findContinuum.dat file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.readContDatChanWidth" title="pipeline.extern.findContinuum.readContDatChanWidth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readContDatChanWidth</span></code></a>(filename)</p></td>
<td><p>Converts aggBW and channel number to chanWidth (in GHz).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.readContDatLSRKRanges" title="pipeline.extern.findContinuum.readContDatLSRKRanges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readContDatLSRKRanges</span></code></a>(filename)</p></td>
<td><p>Reads the LSRK ranges from a _findContinuum.dat file and returns one string of format: 'XXX.YYYYYYYYYGHz~XXX.YYYYYYYYYGHz;...'</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.readContDatPNG" title="pipeline.extern.findContinuum.readContDatPNG"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readContDatPNG</span></code></a>(filename)</p></td>
<td><p>Reads the png name from a _findContinuum.dat file</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.readMeanSpectrumFITSFile" title="pipeline.extern.findContinuum.readMeanSpectrumFITSFile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readMeanSpectrumFITSFile</span></code></a>(meanSpectrumFile[, ...])</p></td>
<td><p>++++++ This function is not used by the pipeline.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.readPreviousMeanSpectrum" title="pipeline.extern.findContinuum.readPreviousMeanSpectrum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readPreviousMeanSpectrum</span></code></a>(meanSpectrumFile[, ...])</p></td>
<td><p>++++++ This function is not used by the pipeline. Read a previous calculated mean spectrum and its parameters, or an ASCII file created by the CASA viewer (or tt.ispec). Note: only the intensity column(s) are returned, not the    channel/frequency columns. This function will not typically be used by the pipeline, only manual users. Returns: 11 things:        avgspectrum, avgSpectrumNansReplaced, threshold,        edgesUsed, nchan, nanmin, firstFreq, lastFreq, centralArcsec,        mask, percentagePixelsNotMasked.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.readViewerOutputFile" title="pipeline.extern.findContinuum.readViewerOutputFile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readViewerOutputFile</span></code></a>(lines[, debug])</p></td>
<td><p>++++++ This function is not used by the pipeline.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.recalcMomDiffSNR" title="pipeline.extern.findContinuum.recalcMomDiffSNR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">recalcMomDiffSNR</span></code></a>(priorValuesFile[, img, ...])</p></td>
<td><p>Allows rapid feedback for adjusting the channel ranges to use for momDiffSNR priorValuesFile: a pickle file generated by findContinuum() img: the cube (in case it has been moved and cannot be found automatically)   1) The pbmom image is required to be present, either in the same directory      as the img, or the current working directory. 2) The joint mask listed in the priorValuesFile must also exist in the      current working directory. intersectRanges: the selection of channels to use;  either a single string,     or a python list of strings to be intersected before using. If you     would like to use LSRK frequency ranges instead, you can first use the     function au.imageFrequencyRangesToChannelRanges() to do the conversion     for your cube. subimage: setting this True will raise the pb levels of the annulus by 0.2 useAnnulus: passed to fc.imageSNR datfile: if present, then generate new datfile with the missing ranges     removed outdir: if blank, then put it where the cube is includeMom10: also compute moment 10 and mom10DiffSNR Returns: new momDiffSNR, new AggBW (GHz), and (if includeMom10=True) the          new mom10DiffSNR.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.rejectNarrowInnerWindowsChannels" title="pipeline.extern.findContinuum.rejectNarrowInnerWindowsChannels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rejectNarrowInnerWindowsChannels</span></code></a>(channels[, ...])</p></td>
<td><p>This function is called by findContinuumChannels.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">reload</span></code>(module)</p></td>
<td><p>Reload the module and return it.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.removeIfNecessary" title="pipeline.extern.findContinuum.removeIfNecessary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">removeIfNecessary</span></code></a>(imgname)</p></td>
<td><p>If an image exists, remote its directory tree.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.removeInitialQuadraticIfNeeded" title="pipeline.extern.findContinuum.removeInitialQuadraticIfNeeded"><code class="xref py py-obj docutils literal notranslate"><span class="pre">removeInitialQuadraticIfNeeded</span></code></a>(avgSpectrum)</p></td>
<td><p>This function is called by runFindContinuum when meanSpectrumMethod='mom0mom8jointMask'.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.removeNaNs" title="pipeline.extern.findContinuum.removeNaNs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">removeNaNs</span></code></a>(a[, replaceWithMin, verbose, ...])</p></td>
<td><p>+++++++ This function is not used for meanSpectrumMethod == 'mom0mom8jointMask' by pipeline,</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.removeStatContQuadratic" title="pipeline.extern.findContinuum.removeStatContQuadratic"><code class="xref py py-obj docutils literal notranslate"><span class="pre">removeStatContQuadratic</span></code></a>(y[, nsigma, ...])</p></td>
<td><p>Iteratively removes outlier points down to nsigma, then fits a quadratic to the remaining points, removes this quadratic from the full initial spectrum, and returns it, along with the list of channels used for the fit and the fit evaluated at all channels.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.removeZeros" title="pipeline.extern.findContinuum.removeZeros"><code class="xref py py-obj docutils literal notranslate"><span class="pre">removeZeros</span></code></a>(a)</p></td>
<td><p>+++++ This function is not used for meanSpectrumMethod='mom0mom8jointMask'.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.replaceLineFullRangesWithNoise" title="pipeline.extern.findContinuum.replaceLineFullRangesWithNoise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">replaceLineFullRangesWithNoise</span></code></a>(intensity, ...)</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.representativeFrequency" title="pipeline.extern.findContinuum.representativeFrequency"><code class="xref py py-obj docutils literal notranslate"><span class="pre">representativeFrequency</span></code></a>(vis[, verbose])</p></td>
<td><p>Get the representative frequency from the ASDM_SBSUMMARY table of a measurement set, if it has been imported with asis.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.representativeSpwBandwidth" title="pipeline.extern.findContinuum.representativeSpwBandwidth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">representativeSpwBandwidth</span></code></a>(vis[, intent, ...])</p></td>
<td><p>Uses updateSBSummary to learn the name of the representativeWindow, then translates that name to a science spw ID using msmd.spwsfornames, and finally a bandwidth. Returns: spw ID, spw bandwidth in Hz (or 0 if no rep spw can be discerned),    minimum science spw bandwidth, maximum science spw bandwidth -Todd Hunter.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.restToTopo" title="pipeline.extern.findContinuum.restToTopo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">restToTopo</span></code></a>(restFrequency, velocityLSRK, ...)</p></td>
<td><p>This function is called by lsrkToTopo.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.robustMADofContinuumRanges" title="pipeline.extern.findContinuum.robustMADofContinuumRanges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">robustMADofContinuumRanges</span></code></a>(myChannelList, ...)</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.roundFigures" title="pipeline.extern.findContinuum.roundFigures"><code class="xref py py-obj docutils literal notranslate"><span class="pre">roundFigures</span></code></a>(value, digits)</p></td>
<td><p>This function is called by runFindContinuum and drawYlabel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.round_half_up" title="pipeline.extern.findContinuum.round_half_up"><code class="xref py py-obj docutils literal notranslate"><span class="pre">round_half_up</span></code></a>(x)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.runFindContinuum" title="pipeline.extern.findContinuum.runFindContinuum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">runFindContinuum</span></code></a>([img, pbcube, psfcube, ...])</p></td>
<td><p>This function is called by findContinuum. It calls functions that: 1) compute the mean spectrum of a dirty cube 2) find the continuum channels 3) plot the results Inputs: channelWidth: in Hz Returns: 23 items <a href="#id9"><span class="problematic" id="id10">*</span></a>1 A channel selection string suitable for the spw parameter of clean. <a href="#id11"><span class="problematic" id="id12">*</span></a>2 The name of the png produced. <a href="#id13"><span class="problematic" id="id14">*</span></a>3 The slope of the linear fit (or None if no fit attempted). <a href="#id15"><span class="problematic" id="id16">*</span></a>4 The channel width in Hz (only necessary for the fitsTable option). <a href="#id17"><span class="problematic" id="id18">*</span></a>5 nchan in the cube (only necessary to return this for the fitsTable option, will be computed otherwise). <a href="#id19"><span class="problematic" id="id20">*</span></a>6 Boolean: True if it used low values as the baseline (as opposed to high values) <a href="#id21"><span class="problematic" id="id22">*</span></a>7 SNRs in the moment0 image (raw, outside mask, outside phase2 mask) <a href="#id23"><span class="problematic" id="id24">*</span></a>8 SNRs in the moment8 image (raw, outside mask, outside phase2 mask) <a href="#id25"><span class="problematic" id="id26">*</span></a>9 Boolean: True if the middle-valued channels were used as the baseline (as opposed to low or high) <a href="#id27"><span class="problematic" id="id28">*</span></a>10 list: selectionPreBluePruning <a href="#id29"><span class="problematic" id="id30">*</span></a>11 float: finalSigmaFindContinuum <a href="#id31"><span class="problematic" id="id32">*</span></a>12 string: name of jointMask <a href="#id33"><span class="problematic" id="id34">*</span></a>13 float array: avgspectrumAboveThreshold <a href="#id35"><span class="problematic" id="id36">*</span></a>14 float: the true median of the spectrum <a href="#id37"><span class="problematic" id="id38">*</span></a>15 list: of plot artist descriptors (things to potentially remove and replot) <a href="#id39"><span class="problematic" id="id40">*</span></a>16 axis instance: ax1 (lower x-axis) <a href="#id41"><span class="problematic" id="id42">*</span></a>17 axis instance: ax2 (upper x-axis) <a href="#id43"><span class="problematic" id="id44">*</span></a>18 float: threshold (the positive threshold for line detection) <a href="#id45"><span class="problematic" id="id46">*</span></a>19 string: final line of upper text legend <a href="#id47"><span class="problematic" id="id48">*</span></a>20 int: number of narrow central groups that were dropped (or would have been dropped        if enableRejectNarrowWindows had been True, but wasn't), summed over all runs        of findContinuumChannels() <a href="#id49"><span class="problematic" id="id50">*</span></a>21 float: effectiveSigma (product of finalSigmaFindContinuum*correctionFactor) <a href="#id51"><span class="problematic" id="id52">*</span></a>22 float: baselineMAD <a href="#id53"><span class="problematic" id="id54">*</span></a>23 string: upper x-axis label <a href="#id55"><span class="problematic" id="id56">*</span></a>24 list of int: allBaselineChannelsXY (channel numbers of baseline) <a href="#id57"><span class="problematic" id="id58">*</span></a>25 int: nbin <a href="#id59"><span class="problematic" id="id60">*</span></a>26 float: initialPeakOverMad <a href="#id61"><span class="problematic" id="id62">*</span></a>27 float or None: negativeThreshold Inputs: img: the image cube to operate upon spw: the spw name or number to put in the x-axis label transition: the name of the spectral transition (for the plot title) baselineModeA: 'min' or 'edge', method to define the baseline in meanSpectrum() sigmaCube: multiply this value by the MAD to get the threshold above which a pixel            is included in the mean spectrum nBaselineChannels: if integer, then the number of channels to use in:   a) computing the mean spectrum with the 'meanAboveThreshold' methods. b) computing the MAD of the lowest/highest channels in findContinuumChannels       if float, then the fraction of channels to use (i.e. the percentile)       default = 0.19, which is 24 channels (i.e. 12 on each side) of a TDM window sigmaFindContinuum: passed to findContinuumChannels, 'auto' starts with 3.5 sigmaFindContinuumMode: 'auto', 'autolower', or 'fixed' verbose: if True, then print additional information during processing png: the name of the png to produce ('' yields default name) pngBasename: if True, then remove the directory from img name before generating png name nanBufferChannels: when removing or replacing NaNs, do this many extra channels                    beyond their extent source: the name of the source, to be shown in the title of the spectrum. if None, then use the filename, up to the first underscore. findContinuum: if True, then find the continuum channels before plotting overwrite: if True, or ASCII file does not exist, then recalculate the mean spectrum                   writing it to &lt;img&gt;.meanSpectrum            if False, then read the mean spectrum from the existing ASCII file trimChannels: after doing best job of finding continuum, remove this many      channels from each edge of each block of channels found (for margin of safety)      If it is a float between 0..1, then trim this fraction of channels in each      group (rounding up). If it is 'auto', use 0.1 but not more than maxTrim channels      and not more than maxTrimFraction percentile: control parameter used with baselineMode='min' continuumThreshold: if specified, only use pixels above this intensity level narrow: the minimum number of channels that a group of channels must have to survive         if 0&lt;narrow&lt;1, then it is interpreted as the fraction of all                        channels within identified blocks         if 'auto', then use int(ceil(log10(nchan))) titleText: default is img name and transition and the control parameter values meanSpectrumFile: an alternative ASCII text file to use for the mean spectrum. Must also set img=''. meanSpectrumMethod: 'peakOverMad', 'peakOverRms', 'meanAboveThreshold',    'meanAboveThresholdOverRms', 'meanAboveThresholdOverMad',     where 'peak' refers to the peak in a spatially-smoothed version of cube peakFilterFWHM: value used by 'peakOverRms' and 'peakOverMad' to presmooth     each plane with a Gaussian kernel of this width (in pixels)     Set to 1 to not do any smoothing. centralArcsec: radius of central box within which to compute the mean spectrum     default='auto' means start with whole field, then reduce to 1/10 if only     one window is found (unless mask is specified); or 'fwhm' for the central square     with the same radius as the PB FWHM; or a floating point value in arcseconds mask: a mask image equal in shape to the parent image that is used to determine the     region to compute the noise (outside the mask) and the mean spectrum (inside the mask)     option 'auto' will look for the &lt;filename&gt;.mask that matches the &lt;filename&gt;.image     and if it finds it, it will use it; otherwise it will use no mask plotAtmosphere: '', 'tsky', or 'transmission' airmass: for plot of atmospheric transmission pwv: in mm (for plot of atmospheric transmission) channelFractionForSlopeRemoval: if at least this many channels are initially selected, or    if there are only 1-2 ranges found and the widest range has &gt; nchan*0.3 channels, then    fit and remove a linear slope and re-identify continuum channels. Set to 1 to turn off. quadraticFit: if True, fit quadratic polynomial to the noise regions when appropriate;      otherwise fit only a linear slope megapixels: simply used to label the plot triangularPatternSeen: if True, then slightly boost sigmaFindContinuum if it is in 'auto' mode maxMemory: only used to name the png if it is set applyMaskToMask: if True, apply the mask inside the user mask image to set its masked pixels to 0 plotBaselinePoints: if True, then plot the baseline-defining points as black dots dropBaselineChannels: percentage of extreme values to drop in baseline mode 'min' useIAGetProfile: if True, then for meanAboveThreshold and baselineMode='min', then     use ia.getprofile instead of ia.getregion and subsequent arithmetic (faster) initialQuadraticImprovementThreshold: if removal of a quadratic from the raw meanSpectrum reduces     the MAD by this factor or more, then proceed with removing this quadratic (new Cycle 6 heuristic) maxMadRatioForSFCAdjustment: madRatio must be below this value (among other things) in order        for automatic lowering of sigmaFindContinuum value to occur in .original iteration maxMadRatioForSFCAdjustmentInLaterIterations: madRatio must be below this value (among other things) in order        for automatic lowering of sigmaFindContinuum value to occur in later iterations avoidance: a CASA channel selection string to avoid selecting for continuum (for      manual use); invoked just before making the plot and returning.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.sanitizeNames" title="pipeline.extern.findContinuum.sanitizeNames"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sanitizeNames</span></code></a>(names[, newchar])</p></td>
<td><p>Replaces various special characters with specified character.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">scipy_nanmean</span></code>(a[, axis, dtype, out, ...])</p></td>
<td><p>Compute the arithmetic mean along the specified axis, ignoring NaNs.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">scoreatpercentile</span></code>(a, per[, limit, ...])</p></td>
<td><p>Calculate the score at a given percentile of the input sequence.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.setYLimitsAvoidingEdgeChannels" title="pipeline.extern.findContinuum.setYLimitsAvoidingEdgeChannels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setYLimitsAvoidingEdgeChannels</span></code></a>(...[, chan])</p></td>
<td><p>Called by runFindContinuum to set the y-axis limits.. 1) Avoid spikes in edge channels from skewing the plot limits, by    setting plot limits on the basis of channels chan..-chan 2) Enforce a maximum dynamic range (peak-median)/mad so that weak features    can be seen, allowing strongest ones to overflow the top.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.sigmaCorrectionFactor" title="pipeline.extern.findContinuum.sigmaCorrectionFactor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sigmaCorrectionFactor</span></code></a>(baselineMode, npts, ...)</p></td>
<td><p>This function is called by findContinuumChannels. Computes the correction factor for the fact that the measured rms (or MAD) on the N%ile lowest points of a datastream will be less than the true rms (or MAD) of all points. npts: nchan in the spw Returns: a value between 0 and 1, which will be used to reduce the          estimate of the population sigma based on the sample sigma.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.smooth" title="pipeline.extern.findContinuum.smooth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">smooth</span></code></a>(x[, window_len, window, verbose, ...])</p></td>
<td><p><a class="reference external" href="https://scipy-cookbook.readthedocs.io/items/SignalSmooth.html">https://scipy-cookbook.readthedocs.io/items/SignalSmooth.html</a> Date: 2017-07-13</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.sortRangesByMax" title="pipeline.extern.findContinuum.sortRangesByMax"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sortRangesByMax</span></code></a>(cube, selection[, box])</p></td>
<td><p>Runs imstat on each individual channel range of a selection string, sorts the result by 'max' and returns a sorted list of tuples: ['maxpos', 'max']</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.splitListIntoContiguousLists" title="pipeline.extern.findContinuum.splitListIntoContiguousLists"><code class="xref py py-obj docutils literal notranslate"><span class="pre">splitListIntoContiguousLists</span></code></a>(mylist)</p></td>
<td><p>This function is called by findContinuumChannels.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.splitListIntoContiguousListsAndRejectNarrow" title="pipeline.extern.findContinuum.splitListIntoContiguousListsAndRejectNarrow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">splitListIntoContiguousListsAndRejectNarrow</span></code></a>(...)</p></td>
<td><p>This function is called by findContinuumChannels. Split a list of channels into contiguous lists, and reject those that have a small number of channels. narrow: if &gt;=1, then interpret it as the minimum number of channels that               a group must have in order to survive         if &lt;1, then interpret it as the minimum fraction of channels that               a group must have relative to the total number of channels Returns: a new single list (as an array) Example:  [1,2,3,4,6,7,9,10,11] --&gt; [ 1,  2,  3,  4,  9, 10, 11].</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.splitListIntoContiguousListsAndRejectZeroStd" title="pipeline.extern.findContinuum.splitListIntoContiguousListsAndRejectZeroStd"><code class="xref py py-obj docutils literal notranslate"><span class="pre">splitListIntoContiguousListsAndRejectZeroStd</span></code></a>(...)</p></td>
<td><p>This function is called by findContinuumChannels.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.splitListIntoContiguousListsAndTrim" title="pipeline.extern.findContinuum.splitListIntoContiguousListsAndTrim"><code class="xref py py-obj docutils literal notranslate"><span class="pre">splitListIntoContiguousListsAndTrim</span></code></a>(...[, ...])</p></td>
<td><p>This function is called by findContinuumChannels. Split a list of channels into contiguous lists, and trim some number of channels from each edge. totalChannels: number of channels in the spectrum channels: a list of channels selected for potential continuum trimChannels: if integer, use that number of channels. If float between     0 and 1, then use that fraction of channels in each contiguous list     (rounding up). If 'auto', then use 0.1 but not more than maxTrim     channels and not more than maxTrimFraction of channels. maxTrim and maxTrimChannels: used in 'auto' mode Returns: a new single list.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.splitListIntoHomogeneousLists" title="pipeline.extern.findContinuum.splitListIntoHomogeneousLists"><code class="xref py py-obj docutils literal notranslate"><span class="pre">splitListIntoHomogeneousLists</span></code></a>(mylist)</p></td>
<td><p>This function is called only by removeNaNs, and hence is not used in Cycle 6-onward pipeline.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.submask" title="pipeline.extern.findContinuum.submask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">submask</span></code></a>(mask, region)</p></td>
<td><p>This function is called by meanSpectrum, but only in Cycle 4+5 heuristic.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.surmiseRepresentativeSpw" title="pipeline.extern.findContinuum.surmiseRepresentativeSpw"><code class="xref py py-obj docutils literal notranslate"><span class="pre">surmiseRepresentativeSpw</span></code></a>(vis[, verbose])</p></td>
<td><p>Reads the representative frequency from the measurement set, then computes which science spw(s) contains it.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.tdmSpectrum" title="pipeline.extern.findContinuum.tdmSpectrum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tdmSpectrum</span></code></a>(channelWidth, nchan[, telescope])</p></td>
<td><p>This function is called by runFindContinuum and findContinuum.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.tooLittleBandwidth" title="pipeline.extern.findContinuum.tooLittleBandwidth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tooLittleBandwidth</span></code></a>(selection, chanInfo[, ...])</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.tooLittleSpread" title="pipeline.extern.findContinuum.tooLittleSpread"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tooLittleSpread</span></code></a>(selection, chanInfo[, fraction])</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.topoFreqRangeListToChannel" title="pipeline.extern.findContinuum.topoFreqRangeListToChannel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">topoFreqRangeListToChannel</span></code></a>([contdatline, ...])</p></td>
<td><p>++++ This function is used by pipeline in writeContDat() Converts a semicolon-delimited string list of topocentric frequency ranges to channel ranges in the specified ms.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.topoFreqToChannel" title="pipeline.extern.findContinuum.topoFreqToChannel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">topoFreqToChannel</span></code></a>(freqlist, vis, spw[, mymsmd])</p></td>
<td><p>++++ This function is used by pipeline in writeContDat() Converts a python floating point list of topocentric frequency ranges to channel ranges in the specified ms.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.transitions" title="pipeline.extern.findContinuum.transitions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">transitions</span></code></a>(vis, spw[, source, intent, ...])</p></td>
<td><p>+++++++ This function is not used by pipeline, because it is only used by isSingleContinuum() and the pipeline passes the Boolean singleContinuum.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.updateChannelRangesOnPlot" title="pipeline.extern.findContinuum.updateChannelRangesOnPlot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">updateChannelRangesOnPlot</span></code></a>(labelDescs, ...[, ...])</p></td>
<td><p>Used in Pipeline2020 going forward.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.updateSBSummary" title="pipeline.extern.findContinuum.updateSBSummary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">updateSBSummary</span></code></a>(vis[, ...])</p></td>
<td><p>Updates the ASDM_SBSUMMARY table of a measurement set with one or more new values. If a value is not present in the existing table and also not specified, then it will remain not present in the updated table. representativeFrequency: float value in typical units (GHz),         or string with units (space before units is optional) minAcceptableAngResolution: float value in typical units (arcsec),         or string with units (space before units is required) maxAcceptableAngResolution: float value in typical units (arcsec),         or string with units (space before units is required) dynamicRange: float value representativeBandwidth: float value in typical units (GHz),         or string with units (space before units is optional) representativeSource: string representativeSPW: string maxAllowedBeamAxialRatio: float spectralDynamicRangeBandWidth: float value in typical units (MHz),         or string with units (space before units is optional) Returns: dictionary keyed by parameter name -Todd Hunter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.version" title="pipeline.extern.findContinuum.version"><code class="xref py py-obj docutils literal notranslate"><span class="pre">version</span></code></a>([showfile])</p></td>
<td><p>Returns the CVS revision number.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.versionStringToArray" title="pipeline.extern.findContinuum.versionStringToArray"><code class="xref py py-obj docutils literal notranslate"><span class="pre">versionStringToArray</span></code></a>(versionString)</p></td>
<td><p>This function is called by casaVersionCompare.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.widenSelection" title="pipeline.extern.findContinuum.widenSelection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">widenSelection</span></code></a>(selection[, eachside, ...])</p></td>
<td><p>Widen each component of a channel selection string on each side.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.widenSelections" title="pipeline.extern.findContinuum.widenSelections"><code class="xref py py-obj docutils literal notranslate"><span class="pre">widenSelections</span></code></a>(datfiles[, eachside, ...])</p></td>
<td><p>Read a list of _findContinuum.dat files, and widen each channel range of the selection string by a number of channels on each side. datfiles: python list of datfiles, or a comma-delimited or wildcard string eachside: how many channels to add on each side minwidth: width of narrowest range to expand verbose: passed to widenSelection to print the new selection strings nchan: if specified, then avoid going past the final channel (nchan-1)      can be an int if single file is passed (or all spws have same nchan);      or a list of ints Returns: if only 1 file passed, it returns the new selection string; if    multiple files are passed, then return the bandwidth increase factor.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.widthOfMaskArcsec" title="pipeline.extern.findContinuum.widthOfMaskArcsec"><code class="xref py py-obj docutils literal notranslate"><span class="pre">widthOfMaskArcsec</span></code></a>(mask, maskInfo)</p></td>
<td><p>++++ This function is not used by pipeline when meanSpectrumMethod='mom0mom8jointMask' or if mask='' Finds width of the smallest central square that circumscribes all masked pixels.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.writeContDat" title="pipeline.extern.findContinuum.writeContDat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">writeContDat</span></code></a>(meanSpectrumFile, selection, ...)</p></td>
<td><p>This function is called by findContinuum. Writes out an ASCII file called &lt;meanSpectrumFile&gt;_findContinuum.dat that contains the selected channels, the png name and the aggregate bandwidth in GHz. Returns: name of file written meanSpectrumFile: only used to generate the name of the .dat file, unless    firstFreq &lt;= 0, in which case the readPreviousMeanSpectrum is called on it    (It splits off name before '.meanSpectrum' and appends _findContinuum.dat) vis: if specified, then also write a line with the topocentric velocity ranges spw: integer or string ID number; if specified (along with vis), then also write      a final line with the topocentric channel ranges for this spw.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_apidoc/pipeline.extern.html#pipeline.extern.findContinuum.writeMeanSpectrum" title="pipeline.extern.findContinuum.writeMeanSpectrum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">writeMeanSpectrum</span></code></a>(meanSpectrumFile, ...[, ...])</p></td>
<td><p>This function is called by meanSpectrum.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">attool</span></code></p></td>
<td><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">atmosphere</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">iatool</span></code></p></td>
<td><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">image</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">metool</span></code></p></td>
<td><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">measures</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">msmdtool</span></code></p></td>
<td><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">msmetadata</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">mstool</span></code></p></td>
<td><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">ms</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">qatool</span></code></p></td>
<td><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">quanta</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">rgtool</span></code></p></td>
<td><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">regionmanager</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">synthesismaskhandler</span></code>(*args, **kwargs)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">tbtool</span></code></p></td>
<td><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">table</span></code></p></td>
</tr>
</tbody>
</table>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2024, Pipeline Dev. Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>