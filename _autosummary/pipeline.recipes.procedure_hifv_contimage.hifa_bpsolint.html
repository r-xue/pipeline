

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pipeline.recipes.procedure_hifv_contimage.hifa_bpsolint &mdash; Pipeline unknown documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_astrorefs.css?v=4d4a2fdb" />
      <link rel="stylesheet" type="text/css" href="../_static/custom_theme.css?v=678032d9" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=3f1b9271"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pipeline.recipes.procedure_hifv_contimage.hifa_diffgaincal" href="pipeline.recipes.procedure_hifv_contimage.hifa_diffgaincal.html" />
    <link rel="prev" title="pipeline.recipes.procedure_hifv_contimage.hifa_bandpassflag" href="pipeline.recipes.procedure_hifv_contimage.hifa_bandpassflag.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Pipeline
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Releases etc.</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Past Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies.html">Dependencies of <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../modular.html">Run the Pipeline in a Conda environment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apisummary.html">Pipeline Tasks (from autosummary)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apisummary.html#full-list">Full List</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TaskRef (create_docs.py)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_taskdocs/taskdocs.html">List of Heuristics Tasks (Pipeline 2023)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Heuristics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../heuristics/field_parameter.html">Field parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../heuristics/FlaggingTasks.html">Pipeline Flagging Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/ways_to_run_the_pipeline.html">Ways to run the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/comparing_pipeline_executions.html">Comparing pipeline executions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/building_the_pipeline.html">Building the pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/ALMA-Imaging-Workflow.html">ALMA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLA-Imaging-Workflow.html">VLA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLASS-SE-CONT-Imaging-Workflow.html">VLASS-SE-CONT imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLASS-SE-CUBE-Imaging-Workflow.html">VLASS-SE-CUBE imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/selfcal_workflow.html">VLASS Selfcal &amp; Restore workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/pipeline_tests.html">Pipeline testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/DataType_Testing.html">DataType Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/QA_scores.html">Pipeline Quality Assurance (QA) Score Class Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/DeveloperDocumentation.html">Pipeline developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/python3_conversion_notes.html">Python 3 conversion notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/recipes.html">Pipeline Recipes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Domain/Context/etc. (automodapi)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics.html"><code class="docutils literal notranslate"><span class="pre">pipeline.domain</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html#module-pipeline.infrastructure.launcher"><code class="docutils literal notranslate"><span class="pre">pipeline.infrastructure.launcher</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html#module-pipeline.infrastructure.callibrary"><code class="docutils literal notranslate"><span class="pre">pipeline.infrastructure.project</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html#pipeline-infrastructure-callibrary-module"><code class="docutils literal notranslate"><span class="pre">pipeline.infrastructure.callibrary</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html#pipeline-infrastructure-imagelibrary-module"><code class="docutils literal notranslate"><span class="pre">pipeline.infrastructure.imagelibrary</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html#module-pipeline.infrastructure.vdp"><code class="docutils literal notranslate"><span class="pre">pipeline.infrastructure.vdp</span></code> module</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Domain/Context (autosummary)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pipeline.domain.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.infrastructure.launcher.html">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Task/Inputs/Results Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../classes.html">Classes in <code class="docutils literal notranslate"><span class="pre">pipeline.h*.tasks</span></code> modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes.html#inheritance-diagrams">Inheritance Diagrams</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Notebooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/context.html">Pipeline Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/tier0dask.html">“Tier0” Parallelization with Dask/Futures</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples Notes (from Jupyter Notebooks)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/test1.html">test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Notes (from .rst)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/test2.html">Example 1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pipeline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../apisummary.html">Pipeline Tasks (from autosummary)</a></li>
          <li class="breadcrumb-item"><a href="pipeline.html">pipeline</a></li>
          <li class="breadcrumb-item"><a href="pipeline.recipes.html">pipeline.recipes</a></li>
          <li class="breadcrumb-item"><a href="pipeline.recipes.procedure_hifv_contimage.html">pipeline.recipes.procedure_hifv_contimage</a></li>
      <li class="breadcrumb-item active">pipeline.recipes.procedure_hifv_contimage.hifa_bpsolint</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_autosummary/pipeline.recipes.procedure_hifv_contimage.hifa_bpsolint.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pipeline-recipes-procedure-hifv-contimage-hifa-bpsolint">
<h1>pipeline.recipes.procedure_hifv_contimage.hifa_bpsolint<a class="headerlink" href="#pipeline-recipes-procedure-hifv-contimage-hifa-bpsolint" title="Link to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.recipes.procedure_hifv_contimage.hifa_bpsolint">
<span class="sig-name descname"><span class="pre">hifa_bpsolint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phaseupsnr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minphaseupints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">evenbpints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bpsnr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minbpsnr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minbpnchan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_nantennas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxfracflagged</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifa/cli/hifa_bpsolint.html#hifa_bpsolint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.recipes.procedure_hifv_contimage.hifa_bpsolint" title="Link to this definition"></a></dt>
<dd><p>hifa_bpsolint —- Compute optimal bandpass calibration solution intervals</p>
<p>The optimal bandpass phaseup time and frequency solution intervals required
to achieve the required signal-to-noise ratio is estimated based on nominal
ALMA array characteristics the metadata associated with the observation.</p>
<p>The phaseup gain time and bandpass frequency intervals are determined as
follows:</p>
<ul class="simple">
<li><p>For each data set the list of source(s) to use for bandpass solution
signal-to-noise estimation is compiled based on the values of the
<code class="docutils literal notranslate"><span class="pre">field</span></code>, <code class="docutils literal notranslate"><span class="pre">intent</span></code>, and <code class="docutils literal notranslate"><span class="pre">spw</span></code> parameters.</p></li>
<li><p>Source fluxes are determined for each spw and source combination.</p></li>
<li><p>Fluxes in Jy are derived from the pipeline context.</p></li>
<li><p>Pipeline context fluxes are derived from the online flux calibrator
catalog, the ASDM, or the user via the flux.csv file.</p></li>
<li><p>If no fluxes are available the task terminates.</p></li>
<li><p>Atmospheric calibration and observations scans are determined for each
spw and source combination.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">intent</span></code> is set to ‘PHASE’ are there are no atmospheric scans
associated with the ‘PHASE’ calibrator, ‘TARGET’ atmospheric scans will be
used instead.</p></li>
<li><p>If atmospheric scans cannot be associated with any of the spw and source
combinations the task terminates.</p></li>
<li><p>Science spws are mapped to atmospheric spws for each science spw and
source combination.</p></li>
<li><p>If mappings cannot be determined for any of the spws the task terminates.</p></li>
<li><p>The median Tsys value for each atmospheric spw and source combination is
determined from the SYSCAL table. Medians are computed first by channel,
then by antenna, in order to reduce sensitivity to deviant values.</p></li>
<li><p>The science spw parameters, exposure time(s), and integration time(s) are
determined.</p></li>
<li><p>The phase-up time interval, in time units and number of integrations
required to meet the <code class="docutils literal notranslate"><span class="pre">phaseupsnr</span></code> are computed, along with the
sensitivity in mJy and the signal-to-noise per integration. Nominal Tsys
and sensitivity values per receiver band provided by the ALMA project are
used for this estimate.</p></li>
<li><p>Warnings are issued if estimated phase-up gain time solution would contain
fewer than <code class="docutils literal notranslate"><span class="pre">minphaseupints</span></code> solutions.</p></li>
<li><p>The frequency interval, in MHz and number of channels required to meet the
<code class="docutils literal notranslate"><span class="pre">bpsnr</span></code> are computed, along with the per channel sensitivity in mJy and
the per channel signal-to-noise. Nominal Tsys and sensitivity values per
receiver band provided by the ALMA project are used for this estimate.</p></li>
<li><p>Warnings are issued if estimated bandpass solution would contain fewer
than <code class="docutils literal notranslate"><span class="pre">minbpnchan</span></code> solutions.</p></li>
<li><p>If strong atmospheric features are detected in the Tsys spectrum for a
given spw, the frequency interval of bandpass solution is recalculated to
meet the lower threshold, <code class="docutils literal notranslate"><span class="pre">minbpsnr</span></code> - i.e. a lower snr is tolerated in
order to preserve enough frequency intervals to capture the atmospheric
line.</p></li>
</ul>
<p>Output:</p>
<blockquote>
<div><p>results – The results object for the pipeline task is returned.</p>
</div></blockquote>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis</dt><dd><p>The list of input MeasurementSets. Defaults to the list of
MeasurementSets specified in the pipeline context.</p>
<p>example: vis=[‘M82A.ms’, ‘M82B.ms’]</p>
</dd>
<dt>field</dt><dd><p>The list of field names of sources to be used for
signal-to-noise estimation. Defaults to all fields with the
standard intent.</p>
<p>example: field=’3C279’</p>
</dd>
<dt>intent</dt><dd><p>A string containing a comma delimited list of intents against
which the selected fields are matched. Defaults to
‘BANDPASS’.</p>
<p>example: intent=’PHASE’</p>
</dd>
<dt>spw</dt><dd><p>The list of spectral windows and channels for which gain
solutions are computed. Defaults to all the science spectral
windows for which there are both ‘intent’ and TARGET intents.</p>
<p>example: spw=’13,15’</p>
</dd>
<dt>phaseupsnr</dt><dd><p>The required phase-up gain time interval solution
signal-to-noise.</p>
<p>example: phaseupsnr=10.0</p>
</dd>
<dt>minphaseupints</dt><dd><p>The minimum number of time intervals in the phase-up gain
solution.</p>
<p>example: minphaseupints=4</p>
</dd>
<dt>evenbpints</dt><dd><p>Use a bandpass frequency solint that is an integer divisor of
the spw bandwidth, to prevent the occurrence of one narrower
fractional frequency interval.</p>
</dd>
<dt>bpsnr</dt><dd><p>The required bandpass frequency interval solution
signal-to-noise.</p>
<p>example: bpsnr=30.0</p>
</dd>
<dt>minbpsnr</dt><dd><p>The minimum required bandpass frequency interval solution
signal-to-noise when strong atmospheric lines exist in Tsys
spectra.</p>
<p>example: minbpsnr=10.0</p>
</dd>
<dt>minbpnchan</dt><dd><p>The minimum number of frequency intervals in the bandpass
solution.</p>
<p>example: minbpnchan=16</p>
</dd>
<dt>hm_nantennas</dt><dd><p>The heuristics for determines the number of antennas to use
in the signal-to-noise estimate. The options are ‘all’ and
‘unflagged’. The ‘unflagged’ options is not currently
supported.</p>
<p>example: hm_nantennas=’unflagged’</p>
</dd>
<dt>maxfracflagged</dt><dd><p>The maximum fraction of an antenna that can be flagged before
it is excluded from the signal-to-noise estimate.</p>
<p>example: maxfracflagged=0.80</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<p>1. Estimate the phaseup gain time interval and the bandpass frequency
interval required to match the desired signal-to-noise for bandpass
solutions:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hifa_bpsolint</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pipeline.recipes.procedure_hifv_contimage.hifa_bandpassflag.html" class="btn btn-neutral float-left" title="pipeline.recipes.procedure_hifv_contimage.hifa_bandpassflag" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pipeline.recipes.procedure_hifv_contimage.hifa_diffgaincal.html" class="btn btn-neutral float-right" title="pipeline.recipes.procedure_hifv_contimage.hifa_diffgaincal" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2024, Pipeline Dev. Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>