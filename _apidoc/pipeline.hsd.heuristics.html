

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pipeline.hsd.heuristics package &mdash; Pipeline unknown documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/custom_theme.css?v=678032d9" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=3f1b9271"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Pipeline
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Releases etc.</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Past Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modular.html">Run the Pipeline in a Conda environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies.html">Dependencies of <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Tasks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline_tasks/pipeline_tasks.html">Pipeline Heuristics Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Tasks (autosummary)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.h.cli.html">pipeline.h.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hif.cli.html">pipeline.hif.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hifa.cli.html">pipeline.hifa.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hifv.cli.html">pipeline.hifv.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hsd.cli.html">pipeline.hsd.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hsdn.cli.html">pipeline.hsdn.cli</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Heuristics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../heuristics/field_parameter.html">Field parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../heuristics/FlaggingTasks.html">Pipeline Flagging Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/ways_to_run_the_pipeline.html">Ways to run the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/comparing_pipeline_executions.html">Comparing pipeline executions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/building_the_pipeline.html">Building the pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/ALMA-Imaging-Workflow.html">ALMA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLA-Imaging-Workflow.html">VLA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLASS-SE-CONT-Imaging-Workflow.html">VLASS-SE-CONT imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLASS-SE-CUBE-Imaging-Workflow.html">VLASS-SE-CUBE imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/selfcal_workflow.html">VLASS Selfcal &amp; Restore workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/pipeline_tests.html">Pipeline testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/DataType_Testing.html">DataType Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/QA_scores.html">Pipeline Quality Assurance (QA) Score Class Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/DeveloperDocumentation.html">Pipeline developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/python3_conversion_notes.html">Python 3 conversion notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/recipes.html">Pipeline Recipes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Domain/Context (automodapi)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics.html"><code class="docutils literal notranslate"><span class="pre">pipeline.domain</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html#module-pipeline.infrastructure.launcher"><code class="docutils literal notranslate"><span class="pre">pipeline.infrastructure.launcher</span></code> module</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Domain/Context (autosummary)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.domain.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.infrastructure.launcher.html">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Task/Inputs/Results Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../classes.html">Classes in <code class="docutils literal notranslate"><span class="pre">pipeline.h*.tasks</span></code> modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes.html#inheritance-diagrams">Inheritance Diagrams</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples Notes (from Jupyter Notebooks)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/test1.html">test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Notes (from .rst)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/test2.html">Example 1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pipeline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">pipeline.hsd.heuristics package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_apidoc/pipeline.hsd.heuristics.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pipeline-hsd-heuristics-package">
<h1>pipeline.hsd.heuristics package<a class="headerlink" href="#pipeline-hsd-heuristics-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-pipeline.hsd.heuristics.MaskDeviation">
<span id="pipeline-hsd-heuristics-maskdeviation-module"></span><h2>pipeline.hsd.heuristics.MaskDeviation module<a class="headerlink" href="#module-pipeline.hsd.heuristics.MaskDeviation" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.MaskDeviation.MaskDeviation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MaskDeviation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/MaskDeviation.html#MaskDeviation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.MaskDeviation.MaskDeviation" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The class is used to detect channels having large variation or deviation. If there’s any
emission lines or atmospheric absorption/emission on some channels, their values largely
change according to the positional and environmental changes. Emission lines and atmospheric
features often degrade the quality of the baseline subtraction. Therefore, channels with
large valiation should be masked before baseline fitting order determination and baseline
subtraction.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.MaskDeviation.MaskDeviation.CalcRange">
<span class="sig-name descname"><span class="pre">CalcRange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iteration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consider_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/MaskDeviation.html#MaskDeviation.CalcRange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.MaskDeviation.MaskDeviation.CalcRange" title="Link to this definition"></a></dt>
<dd><p>Find regions which value is greater than threshold.
‘threshold’ is used for median calculation
‘detection’ is used to detect mask region
‘extension’ is used to extend the mask region
Used data:</p>
<blockquote>
<div><dl class="simple">
<dt>self.stdSp: 1D spectrum with self.nchan channels calculated in CalcStdSpectrum</dt><dd><p>Each channel records standard deviation of the channel in all original spectra</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.MaskDeviation.MaskDeviation.CalcStdSpectrum">
<span class="sig-name descname"><span class="pre">CalcStdSpectrum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">consider_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/MaskDeviation.html#MaskDeviation.CalcStdSpectrum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.MaskDeviation.MaskDeviation.CalcStdSpectrum" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>meanSP, maxSP, minSP, ymax, ymin: used only for plotting and should be</dt><dd><p>commented out when implemented in the pipeline</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.MaskDeviation.MaskDeviation.ExtendMask">
<span class="sig-name descname"><span class="pre">ExtendMask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/MaskDeviation.html#MaskDeviation.ExtendMask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.MaskDeviation.MaskDeviation.ExtendMask" title="Link to this definition"></a></dt>
<dd><p>Extend the mask region as long as Standard Deviation value is higher than the given threshold</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.MaskDeviation.MaskDeviation.ReadData">
<span class="sig-name descname"><span class="pre">ReadData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/MaskDeviation.html#MaskDeviation.ReadData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.MaskDeviation.MaskDeviation.ReadData" title="Link to this definition"></a></dt>
<dd><p>Reads data from input MS.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.MaskDeviation.MaskDeviation.SubtractMedian">
<span class="sig-name descname"><span class="pre">SubtractMedian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consider_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/MaskDeviation.html#MaskDeviation.SubtractMedian"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.MaskDeviation.MaskDeviation.SubtractMedian" title="Link to this definition"></a></dt>
<dd><p>Subtract median value of the spectrum from the spectrum: re-bias the spectrum.</p>
<p>Initial median (MED_0) and standard deviation (STD) are caluculated for each
spectrum. Final median value is determined by using the channels having the value
inside the range: MED_0 - threshold * STD &lt; VALUE &lt; MED_0 + threshold * STD</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.MaskDeviation.MaskDeviationHeuristic">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MaskDeviationHeuristic</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/MaskDeviation.html#MaskDeviationHeuristic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.MaskDeviation.MaskDeviationHeuristic" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.MaskDeviation.MaskDeviationHeuristic.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consider_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/MaskDeviation.html#MaskDeviationHeuristic.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.MaskDeviation.MaskDeviationHeuristic.calculate" title="Link to this definition"></a></dt>
<dd><p>Channel mask heuristics using MaskDeviation algorithm implemented
in MaskDeviation class.</p>
<p>vis – input MS filename
field_id – target field identifier
antenna_id – target antenna identifier
spw – target spw identifier
consider_flag – take into account flag in MS or not</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-pipeline.hsd.heuristics.baselineparamconfig">
<span id="pipeline-hsd-heuristics-baselineparamconfig-module"></span><h2>pipeline.hsd.heuristics.baselineparamconfig module<a class="headerlink" href="#module-pipeline.hsd.heuristics.baselineparamconfig" title="Link to this heading"></a></h2>
<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BLP">
<span class="sig-name descname"><span class="pre">BLP</span></span><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BLP" title="Link to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys" title="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaselineParamKeys</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BaselineFitParamConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fitfunc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'cspline'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">switchpoly</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/baselineparamconfig.html#BaselineFitParamConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Generate/update BLParam file according to the input parameters.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.ApplicableDuration">
<span class="sig-name descname"><span class="pre">ApplicableDuration</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'raster'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.ApplicableDuration" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.ClipCycle">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ClipCycle</span></span><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.ClipCycle" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.MaxPolynomialOrder">
<span class="sig-name descname"><span class="pre">MaxPolynomialOrder</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'none'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.MaxPolynomialOrder" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.PolynomialOrder">
<span class="sig-name descname"><span class="pre">PolynomialOrder</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'automatic'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.PolynomialOrder" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datatable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pipeline.domain.html#pipeline.domain.datatable.DataTableImpl" title="pipeline.domain.datatable.DataTableImpl"><span class="pre">DataTableImpl</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pipeline.domain.html#pipeline.domain.measurementset.MeasurementSet" title="pipeline.domain.measurementset.MeasurementSet"><span class="pre">MeasurementSet</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">rowmap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deviation_mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blparam</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/baselineparamconfig.html#BaselineFitParamConfig.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.calculate" title="Link to this definition"></a></dt>
<dd><p>Generate/update BLParam file according to the input parameters.</p>
<p>BLParam file will be an input to sdbaseline,.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datatable</strong> – DataTable instance</p></li>
<li><p><strong>ms</strong> – MS domain object to calculate fitting parameters</p></li>
<li><p><strong>rowmap</strong> – Row map dictionary between origin_ms and ms</p></li>
<li><p><strong>antenna_id</strong> – Antenna ID to process</p></li>
<li><p><strong>field_id</strong> – Field ID to process</p></li>
<li><p><strong>spw_id</strong> – Spw ID to process</p></li>
<li><p><strong>fit_order</strong> – Fiting order (‘automatic’ or number)</p></li>
<li><p><strong>edge</strong> – Number of edge channels to be excluded from the heuristics
(format: [L, R])</p></li>
<li><p><strong>deviation_mask</strong> – Deviation mask</p></li>
<li><p><strong>blparam</strong> – Name of the BLParam file
File contents will be updated by this heuristics</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this method, the boundaries of channel ranges are indicated by a list [start, end].
Basically, the treatment of pythonic range is [start, end+1], but it is not intuitive for
dealing with channels and masks of MeasurementSet. Therefore these are written as [start, end]
in this source. Pythonic range-lists as boundaries for MS are only used in local processing
scopes like a local function or loop block. Other than these scopes, we should write
the channel/mask range as [start, end].</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Name of the BLParam file</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.is_multi_vis_task">
<span class="sig-name descname"><span class="pre">is_multi_vis_task</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineFitParamConfig.is_multi_vis_task" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BaselineParamKeys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/baselineparamconfig.html#BaselineParamKeys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.AVG_LIMIT">
<span class="sig-name descname"><span class="pre">AVG_LIMIT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'avg_limit'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.AVG_LIMIT" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.CLIPNITER">
<span class="sig-name descname"><span class="pre">CLIPNITER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'clipniter'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.CLIPNITER" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.CLIPTHRESH">
<span class="sig-name descname"><span class="pre">CLIPTHRESH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'clipthresh'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.CLIPTHRESH" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.FUNC">
<span class="sig-name descname"><span class="pre">FUNC</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'blfunc'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.FUNC" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.LEDGE">
<span class="sig-name descname"><span class="pre">LEDGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Ledge'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.LEDGE" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.LFTHRESH">
<span class="sig-name descname"><span class="pre">LFTHRESH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'thresh'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.LFTHRESH" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.MASK">
<span class="sig-name descname"><span class="pre">MASK</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'mask'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.MASK" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.NPIECE">
<span class="sig-name descname"><span class="pre">NPIECE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'npiece'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.NPIECE" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.NWAVE">
<span class="sig-name descname"><span class="pre">NWAVE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'nwave'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.NWAVE" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.ORDER">
<span class="sig-name descname"><span class="pre">ORDER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'order'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.ORDER" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.POL">
<span class="sig-name descname"><span class="pre">POL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'pol'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.POL" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.REDGE">
<span class="sig-name descname"><span class="pre">REDGE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Redge'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.REDGE" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.ROW">
<span class="sig-name descname"><span class="pre">ROW</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'row'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.ROW" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.USELF">
<span class="sig-name descname"><span class="pre">USELF</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'use_linefinder'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.BaselineParamKeys.USELF" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.DEBUG">
<span class="sig-name descname"><span class="pre">DEBUG</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/baselineparamconfig.html#DEBUG"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.DEBUG" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.TRACE">
<span class="sig-name descname"><span class="pre">TRACE</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/baselineparamconfig.html#TRACE"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.TRACE" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.as_maskstring">
<span class="sig-name descname"><span class="pre">as_maskstring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">masklist</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/baselineparamconfig.html#as_maskstring"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.as_maskstring" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.do_switching">
<span class="sig-name descname"><span class="pre">do_switching</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nchan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_pieces</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masklist</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/baselineparamconfig.html#do_switching"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.do_switching" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.no_switching">
<span class="sig-name descname"><span class="pre">no_switching</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">engine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nchan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_pieces</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masklist</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/baselineparamconfig.html#no_switching"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.no_switching" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.baselineparamconfig.write_blparam">
<span class="sig-name descname"><span class="pre">write_blparam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileobj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/baselineparamconfig.html#write_blparam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.baselineparamconfig.write_blparam" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-pipeline.hsd.heuristics.fitorder">
<span id="pipeline-hsd-heuristics-fitorder-module"></span><h2>pipeline.hsd.heuristics.fitorder module<a class="headerlink" href="#module-pipeline.hsd.heuristics.fitorder" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.EdgeChannels">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">EdgeChannels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.EdgeChannels" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.EdgeChannels.left">
<span class="sig-name descname"><span class="pre">left</span></span><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.EdgeChannels.left" title="Link to this definition"></a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.EdgeChannels.right">
<span class="sig-name descname"><span class="pre">right</span></span><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.EdgeChannels.right" title="Link to this definition"></a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.FitOrderHeuristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FitOrderHeuristics</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#FitOrderHeuristics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.FitOrderHeuristics" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Determine fitting order from a set of spectral data.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.FitOrderHeuristics.MaxDominantFreq">
<span class="sig-name descname"><span class="pre">MaxDominantFreq</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">15</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.FitOrderHeuristics.MaxDominantFreq" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.FitOrderHeuristics.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pipeline.hsd.heuristics.fitorder.EdgeChannels" title="pipeline.hsd.heuristics.fitorder.EdgeChannels"><span class="pre">EdgeChannels</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#FitOrderHeuristics.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.FitOrderHeuristics.calculate" title="Link to this definition"></a></dt>
<dd><p>Determine fitting order from a set of spectral data, data,
with masks for each spectral data, mask, and number of edge
channels to be excluded, edge.</p>
<p>First, manipulate each spectral data by the following procedure:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>mask regions specified by mask and edge,</p></li>
<li><p>subtract average from spectral data,</p></li>
<li><p>compute one-dimensional discrete Fourier Transform.</p></li>
</ol>
</div></blockquote>
<p>Then, Fourier power spectrum is averaged and averaged power
spectrum is analyzed to determine optimal polynomial order
for input data array. The heuristics returns one representative
polynomial order per input data array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – two-dimensional data array with shape (nrow, nchan).</p></li>
<li><p><strong>mask</strong> – list of mask regions. Value should be a list of
[[start0,end0],[start1,end1],…] for each spectrum.
[[-1,-1]] indicates no mask. Default is None.</p></li>
<li><p><strong>edge</strong> – number of edge channels to be dropped. Default is (0,0).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Representative polynomial order, None if all data are masked</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.FittingFunction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FittingFunction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#FittingFunction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.FittingFunction" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.FittingFunction.CSPLINE">
<span class="sig-name descname"><span class="pre">CSPLINE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'segmented</span> <span class="pre">cubic</span> <span class="pre">spline'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.FittingFunction.CSPLINE" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.FittingFunction.POLY">
<span class="sig-name descname"><span class="pre">POLY</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('polynomial',)</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.FittingFunction.POLY" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.FittingFunction.POLYNOMIAL">
<span class="sig-name descname"><span class="pre">POLYNOMIAL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">('polynomial',)</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.FittingFunction.POLYNOMIAL" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.FittingFunction.SPLINE">
<span class="sig-name descname"><span class="pre">SPLINE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'segmented</span> <span class="pre">cubic</span> <span class="pre">spline'</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.FittingFunction.SPLINE" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.MaskMaker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MaskMaker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nchan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pipeline.hsd.heuristics.fitorder.EdgeChannels" title="pipeline.hsd.heuristics.fitorder.EdgeChannels"><span class="pre">EdgeChannels</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#MaskMaker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.MaskMaker" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#pipeline.hsd.heuristics.fitorder.MaskMakerNoLine" title="pipeline.hsd.heuristics.fitorder.MaskMakerNoLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaskMakerNoLine</span></code></a></p>
<p>Generate mask array. Lines are masked.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.MaskMaker.get_mask">
<span class="sig-name descname"><span class="pre">get_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#MaskMaker.get_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.MaskMaker.get_mask" title="Link to this definition"></a></dt>
<dd><p>Get mask array.</p>
<p>Value in the returned array are either 1 (valid) or 0 (invalid).
Line ranges are masked.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>row</strong> – row number (not used)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>mask array</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.MaskMakerNoLine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MaskMakerNoLine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nchan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pipeline.hsd.heuristics.fitorder.EdgeChannels" title="pipeline.hsd.heuristics.fitorder.EdgeChannels"><span class="pre">EdgeChannels</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#MaskMakerNoLine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.MaskMakerNoLine" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generate mask array.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.MaskMakerNoLine.get_mask">
<span class="sig-name descname"><span class="pre">get_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#MaskMakerNoLine.get_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.MaskMakerNoLine.get_mask" title="Link to this definition"></a></dt>
<dd><p>Get mask array.</p>
<p>Value in the returned array are either 1 (valid) or 0 (invalid).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>row</strong> – row number (not used)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>mask array</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.SwitchPolynomialWhenLargeMaskAtEdgeHeuristic">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SwitchPolynomialWhenLargeMaskAtEdgeHeuristic</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#SwitchPolynomialWhenLargeMaskAtEdgeHeuristic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.SwitchPolynomialWhenLargeMaskAtEdgeHeuristic" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.SwitchPolynomialWhenLargeMaskAtEdgeHeuristic.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nchan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pipeline.hsd.heuristics.fitorder.EdgeChannels" title="pipeline.hsd.heuristics.fitorder.EdgeChannels"><span class="pre">EdgeChannels</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_pieces</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masklist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pipeline.hsd.heuristics.fitorder.FittingFunction" title="pipeline.hsd.heuristics.fitorder.FittingFunction"><span class="pre">FittingFunction</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#SwitchPolynomialWhenLargeMaskAtEdgeHeuristic.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.SwitchPolynomialWhenLargeMaskAtEdgeHeuristic.calculate" title="Link to this definition"></a></dt>
<dd><p>Perform fitting function heuristics.</p>
<p>Logic of the fitting function heuristics is as follows.</p>
<blockquote>
<div><dl class="simple">
<dt>if nchan_edge &gt;= nchan/2:</dt><dd><p>fitfunc=POLY
order=1</p>
</dd>
<dt>elif nchan_edge &gt;= nchan_segment:</dt><dd><p>fitfunc=POLY
order=2</p>
</dd>
<dt>else:</dt><dd><p>fitfunc=CSPLINE</p>
</dd>
</dl>
</div></blockquote>
<p>where nchan_segment is a number of channels in one segment,
and nchan_edge is max number of consecutive masked channels
from edges.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nchan</strong> – total number of channels</p></li>
<li><p><strong>edge</strong> – number of channels from the edges to be excluded from the fit [C0, C1]</p></li>
<li><p><strong>num_pieces</strong> – Number of segments for cspline fitting</p></li>
<li><p><strong>masklist</strong> – List of fit ranges (included in the fit) [[C0, C1], [C2, C3], …]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Result of the heuristics as a two tuple of FittingFunction enum and fitting order</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.get_fitting_function">
<span class="sig-name descname"><span class="pre">get_fitting_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pipeline.hsd.heuristics.fitorder.FittingFunction" title="pipeline.hsd.heuristics.fitorder.FittingFunction"><span class="pre">FittingFunction</span></a></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#get_fitting_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.get_fitting_function" title="Link to this definition"></a></dt>
<dd><p>Get FittingFunction enum from name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – name of the fitting function</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>RuntimeError</strong> – unsupported function name</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>FittingFunction enum</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.is_cubic_spline_fit">
<span class="sig-name descname"><span class="pre">is_cubic_spline_fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pipeline.hsd.heuristics.fitorder.FittingFunction" title="pipeline.hsd.heuristics.fitorder.FittingFunction"><span class="pre">FittingFunction</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#is_cubic_spline_fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.is_cubic_spline_fit" title="Link to this definition"></a></dt>
<dd><p>Determine if fitting function is cubic spline.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if fitting function is cubic spline, False otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fitorder.is_polynomial_fit">
<span class="sig-name descname"><span class="pre">is_polynomial_fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pipeline.hsd.heuristics.fitorder.FittingFunction" title="pipeline.hsd.heuristics.fitorder.FittingFunction"><span class="pre">FittingFunction</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fitorder.html#is_polynomial_fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fitorder.is_polynomial_fit" title="Link to this definition"></a></dt>
<dd><p>Determine if fitting function is polynomial.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if fitting function is polynomial, False otherwise.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pipeline.hsd.heuristics.fragmentation">
<span id="pipeline-hsd-heuristics-fragmentation-module"></span><h2>pipeline.hsd.heuristics.fragmentation module<a class="headerlink" href="#module-pipeline.hsd.heuristics.fragmentation" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fragmentation.FragmentationHeuristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FragmentationHeuristics</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fragmentation.html#FragmentationHeuristics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fragmentation.FragmentationHeuristics" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Determine fragmentation from given total number of channels,
edge channels to be dropped, and polynomial order for baseline
fit.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fragmentation.FragmentationHeuristics.MaxFragmentation">
<span class="sig-name descname"><span class="pre">MaxFragmentation</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">3</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.fragmentation.FragmentationHeuristics.MaxFragmentation" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fragmentation.FragmentationHeuristics.MaxOrder">
<span class="sig-name descname"><span class="pre">MaxOrder</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">9</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.fragmentation.FragmentationHeuristics.MaxOrder" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fragmentation.FragmentationHeuristics.MinChannels">
<span class="sig-name descname"><span class="pre">MinChannels</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">512</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.fragmentation.FragmentationHeuristics.MinChannels" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.fragmentation.FragmentationHeuristics.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">polyorder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nchan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modification</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/fragmentation.html#FragmentationHeuristics.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.fragmentation.FragmentationHeuristics.calculate" title="Link to this definition"></a></dt>
<dd><p>Determine fragmentation from given total number of channels,
edge channels to be dropped, and polynomial order for baseline
fit.</p>
<dl class="simple">
<dt>Inputs:</dt><dd><p>polyorder – polynomial order for baseline fit
nchan – number of channels
edge – edge channels to be dropped given by tuple, (left, right)
modification – modification factor for polyorder</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>fragment – fragmentation parameter
num_segment – number of segments
segment_polyorder – polynomial order for baseline fit of segments</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-pipeline.hsd.heuristics.grouping2">
<span id="pipeline-hsd-heuristics-grouping2-module"></span><h2>pipeline.hsd.heuristics.grouping2 module<a class="headerlink" href="#module-pipeline.hsd.heuristics.grouping2" title="Link to this heading"></a></h2>
<p>Set of heuristics for data grouping.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.grouping2.GroupByPosition2">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">GroupByPosition2</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/grouping2.html#GroupByPosition2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.grouping2.GroupByPosition2" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Grouping by RA/DEC position.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.grouping2.GroupByPosition2.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_combine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Angle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_allowance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Angle</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/grouping2.html#GroupByPosition2.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.grouping2.GroupByPosition2.calculate" title="Link to this definition"></a></dt>
<dd><p>Group data by RA/DEC position.</p>
<p>Divides data into groups by their positions in two
dimensional space which are given by ra and dec.
Groups data within the circle with the radius of
r_combine. Only position difference larger than
r_allowance are regarded as significant.
For r_combine and r_allowance, specified values are
interpreted to be in degree unless their units are
explicitly given.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ra</strong> – List of R.A.</p></li>
<li><p><strong>dec</strong> – List of DEC.</p></li>
<li><p><strong>r_combine</strong> – Data inside r_combine will be grouped together.</p></li>
<li><p><strong>r_allowance</strong> – Data inside r_allowance are assumed to be the same position.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Two-tuple containing information on group membership
(PosDict) and boundaries between groups (PosGap).</p>
<p>PosDict is a dictionary whose keys are indices for
ra and dec. Values of PosDict are the list which
contains different value depending on whether the
position specified by the index is reference data
for the group or not. If k is reference index,
PosDict[k] lists indices for group member
([ID1, ID2,…, IDN]). Otherwise, PosDict[k] is
[-1, m] where m is the index to reference data.</p>
<p>PosGap is a list of gaps in terms of array indices
for ra and dec ([IDX1, IDX2,…,IDXN]). Length of
PosGap is (number of groups) - 1.</p>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.grouping2.GroupByTime2">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">GroupByTime2</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/grouping2.html#GroupByTime2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.grouping2.GroupByTime2" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Grouping by time sequence.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.grouping2.GroupByTime2.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timebase</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Real</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_diff</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Real</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/grouping2.html#GroupByTime2.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.grouping2.GroupByTime2.calculate" title="Link to this definition"></a></dt>
<dd><p>Group data by time sequence.</p>
<p>Divides data into groups by their difference (time_diff).
Two groups are defined based on “small” and “large” gaps,
which are internally computed by ThresholdForGroupByTime
heuristic. The time_diff is generated from timebase in
most of the cases. The timebase contains all time stamps
and time_diff is created from selected time stamps in
other case.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timebase</strong> – base list of time stamps for threshold estimation</p></li>
<li><p><strong>time_diff</strong> – difference from the previous time stamp</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Two-tuple containing information on group membership
(TimeTable) and boundaries between groups (TimeGap).</p>
<p>TimeTable is the “list-of-list” whose items are the set
of indices for each group. TimeTable[0] is the groups
separaged by “small” gap while TimeTable[1] is for
groups separated by “large” gap. They are used for
baseline subtraction (hsd_baseline) and subsequent
flagging (hsd_blflag).</p>
<dl class="simple">
<dt>TimeTable:</dt><dd><dl class="simple">
<dt>[[[ismall00,…,ismall0M],[…],…,[ismallX0,…,ismallXN]],</dt><dd><p>[[ilarge00,…,ilarge0P],[…],…,[ilargeY0,…,ilargeYQ]]]</p>
</dd>
</dl>
</dd>
</dl>
<p>TimeTable[0]: separated by small gaps
TimeTable[1]: separated by large gaps</p>
<p>TimeGap is the list of indices which indicate boundaries
for “small” and “large” gaps. These are used for plotting.</p>
<p>TimeGap: [[rowX1, rowX2,…,rowXN], [rowY1, rowY2,…,rowYN]]
TimeGap[0]: small gap
TimeGap[1]: large gap</p>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.grouping2.MergeGapTables2">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MergeGapTables2</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/grouping2.html#MergeGapTables2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.grouping2.MergeGapTables2" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Merge time gap and position gaps.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.grouping2.MergeGapTables2.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">TimeGap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">TimeTable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">PosGap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tBEAM</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/grouping2.html#MergeGapTables2.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.grouping2.MergeGapTables2.calculate" title="Link to this definition"></a></dt>
<dd><p>Merge time gap and position gaps.</p>
<p>Merge time gap list (TimeGap) and position gap list (PosGap).
TimeTable and TimeGap should be the first and the second
elements of the return value of GroupByTime2 heuristic.
Also, PosGap should be the second element of the return value
of GroupByPosition2 heuristic. PosGap is merged into small
TimeGap (TimeGap[0]).</p>
<p>tBEAM is used to separate the data by beam for multi-beam
data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TimeTable</strong> – the first element of output from GroupByTime2 heuristic</p></li>
<li><p><strong>TimeGap</strong> – the second element of output from GroupByTime2 heuristic</p></li>
<li><p><strong>PosGap</strong> – the second element of output from GroupByPosition2()</p></li>
<li><p><strong>tBEAM</strong> – list of beam identifier.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Two-tuple containing information on group membership
(TimeTable) and boundaries between groups (TimeGap).</p>
<p>TimeTable is the “list-of-list” whose items are the set
of indices for each group. TimeTable[0] is the groups
separaged by “small” gap while TimeTable[1] is for
groups separated by “large” gap. They are used for
baseline subtraction (hsd_baseline) and subsequent
flagging (hsd_blflag).</p>
<dl class="simple">
<dt>TimeTable:</dt><dd><dl class="simple">
<dt>[[[ismall00,…,ismall0M],[…],…,[ismallX0,…,ismallXN]],</dt><dd><p>[[ilarge00,…,ilarge0P],[…],…,[ilargeY0,…,ilargeYQ]]]</p>
</dd>
</dl>
</dd>
</dl>
<p>TimeTable[0]: separated by small gaps
TimeTable[1]: separated by large gaps</p>
<p>TimeGap is the list of indices which indicate boundaries
for “small” and “large” gaps. The “small” gap is a merged
list of gaps for groups separated by small time gaps and
the ones grouped by positions. These are used for plotting.</p>
<p>TimeGap: [[rowX1, rowX2,…,rowXN], [rowY1, rowY2,…,rowYN]]
TimeGap[0]: small gap
TimeGap[1]: large gap</p>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.grouping2.ThresholdForGroupByTime">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ThresholdForGroupByTime</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/grouping2.html#ThresholdForGroupByTime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.grouping2.ThresholdForGroupByTime" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Estimate thresholds for large and small time gaps.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.grouping2.ThresholdForGroupByTime.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timebase</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Real</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/grouping2.html#ThresholdForGroupByTime.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.grouping2.ThresholdForGroupByTime.calculate" title="Link to this definition"></a></dt>
<dd><p>Estimate thresholds for large and small time gaps.</p>
<p>Estimate thresholds for large and small time gaps using
base list of time stamps. Threshold for small time gap,
denoted as Threshold1, is computed from a median value
of nonzero time differences multiplied by five, i.e.,</p>
<blockquote>
<div><p>dt = timebase[1:] - timebase[:-1]
Threhold1 = 5 * np.median(dt[dt != 0])</p>
</div></blockquote>
<p>where timebase is assumed to be np.ndarray. Threshold
for large time gap, denoted as Threshold2, is computed
from a median value of time differences larger than
Threshold1 mutiplied by five, i.e.,</p>
<blockquote>
<div><dl class="simple">
<dt>Threshold2 = 5 * np.median(</dt><dd><p>dt[np.logical_and(dt != 0, dt &gt; Threshold1)]</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timebase</strong> – base list of time stamps for threshold estimation</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Two-tuple of threshold values for small and large
time gaps, respectively.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="pipeline-hsd-heuristics-grouping2-test-module">
<h2>pipeline.hsd.heuristics.grouping2_test module<a class="headerlink" href="#pipeline-hsd-heuristics-grouping2-test-module" title="Link to this heading"></a></h2>
</section>
<section id="module-pipeline.hsd.heuristics.observingpattern2">
<span id="pipeline-hsd-heuristics-observingpattern2-module"></span><h2>pipeline.hsd.heuristics.observingpattern2 module<a class="headerlink" href="#module-pipeline.hsd.heuristics.observingpattern2" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.observingpattern2.ObservingPattern2">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ObservingPattern2</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/observingpattern2.html#ObservingPattern2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.observingpattern2.ObservingPattern2" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Analyze pointing pattern</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.observingpattern2.ObservingPattern2.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/observingpattern2.html#ObservingPattern2.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.observingpattern2.ObservingPattern2.calculate" title="Link to this definition"></a></dt>
<dd><p>Analyze pointing pattern from pos_dict which is calculated by
GroupByPosition2 heuristic.
Return (ret)</p>
<blockquote>
<div><p>ret: ‘RASTER’, ‘SINGLE-POINT’, or ‘MULTI-POINT’</p>
</div></blockquote>
<p># PosDict[row]: index</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-pipeline.hsd.heuristics.rasterscan">
<span id="pipeline-hsd-heuristics-rasterscan-module"></span><h2>pipeline.hsd.heuristics.rasterscan module<a class="headerlink" href="#module-pipeline.hsd.heuristics.rasterscan" title="Link to this heading"></a></h2>
<p>Heuristics to detect raster rows and maps.</p>
<p>Examine spatial observing pattern in celestial coordinate
(R.A./Dec. etc.) to distinguish each raster row and each
raster map, which is a set of raster rows to cover whole
observing region.</p>
<p>Note that it does not check if observing pattern is raster.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.HeuristicsParameter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">HeuristicsParameter</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#HeuristicsParameter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.HeuristicsParameter" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Holds tunable parameters for RasterScanHeuristic.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.AngleHistogramBinWidth">
<span class="sig-name descname"><span class="pre">AngleHistogramBinWidth</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.AngleHistogramBinWidth" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.AngleHistogramSparseness">
<span class="sig-name descname"><span class="pre">AngleHistogramSparseness</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.5</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.AngleHistogramSparseness" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.AngleHistogramThreshold">
<span class="sig-name descname"><span class="pre">AngleHistogramThreshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.3</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.AngleHistogramThreshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.AngleThreshold">
<span class="sig-name descname"><span class="pre">AngleThreshold</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">45</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.AngleThreshold" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.DistanceThresholdFactor">
<span class="sig-name descname"><span class="pre">DistanceThresholdFactor</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">75</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.DistanceThresholdFactor" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.RasterGapThresholdFactor">
<span class="sig-name descname"><span class="pre">RasterGapThresholdFactor</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.05</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.RasterGapThresholdFactor" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.RoundTripRasterScanThresholdFactor">
<span class="sig-name descname"><span class="pre">RoundTripRasterScanThresholdFactor</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.6</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.RoundTripRasterScanThresholdFactor" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.TurnaroundAngleTolerance">
<span class="sig-name descname"><span class="pre">TurnaroundAngleTolerance</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">10</span></em><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.HeuristicsParameter.TurnaroundAngleTolerance" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristic">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RasterScanHeuristic</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#RasterScanHeuristic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristic" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Heuristic to analyze raster scan pattern.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristic.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#RasterScanHeuristic.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristic.calculate" title="Link to this definition"></a></dt>
<dd><p>Detect gaps that separate individual raster rows and raster maps.</p>
<p>Detected gaps are transrated into TimeTable and TimeGap described below.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ra</strong> – horizontal position list</p></li>
<li><p><strong>dec</strong> – vertical position list</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsFailure" title="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsFailure"><strong>RasterScanHeuristicsFailure</strong></a><strong> (</strong><strong>raised from find_raster_row</strong><strong>(</strong><strong>) or </strong><strong>find_raster_gap</strong><strong>(</strong><strong>)</strong><strong>)</strong> – scan pattern is not likely to be raster scan or
    irregular row input, or unsupported raster mapping</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Two-tuple containing information on group membership
(TimeTable) and boundaries between groups (TimeGap).</p>
<p>TimeTable is the “list-of-list” whose items are the set
of indices for each group. TimeTable[0] is the groups
separaged by “small” gap while TimeTable[1] is for
groups separated by “large” gap. They are used for
baseline subtraction (hsd_baseline) and subsequent
flagging (hsd_blflag).</p>
<dl class="simple">
<dt>TimeTable:</dt><dd><dl class="simple">
<dt>[[[ismall00,…,ismall0M],[…],…,[ismallX0,…,ismallXN]],</dt><dd><p>[[ilarge00,…,ilarge0P],[…],…,[ilargeY0,…,ilargeYQ]]]</p>
</dd>
</dl>
</dd>
</dl>
<p>TimeTable[0]: separated by small gaps
TimeTable[1]: separated by large gaps</p>
<p>TimeGap is the list of indices which indicate boundaries
for “small” and “large” gaps. The “small” gap is a merged
list of gaps for groups separated by small time gaps and
the ones grouped by positions. These are used for plotting.</p>
<p>TimeGap: [[rowX1, rowX2,…,rowXN], [rowY1, rowY2,…,rowYN]]
TimeGap[0]: small gap
TimeGap[1]: large gap</p>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsFailure">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RasterScanHeuristicsFailure</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#RasterScanHeuristicsFailure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsFailure" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Indicates failure of RasterScanHeuristics.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RasterScanHeuristicsResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="pipeline.domain.html#pipeline.domain.measurementset.MeasurementSet" title="pipeline.domain.measurementset.MeasurementSet"><span class="pre">MeasurementSet</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#RasterScanHeuristicsResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsResult" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Result class of raster scan analysis.</p>
<dl class="py property">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsResult.antenna">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">antenna</span></span><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsResult.antenna" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsResult.get_antennas_rasterscan_failed">
<span class="sig-name descname"><span class="pre">get_antennas_rasterscan_failed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#RasterScanHeuristicsResult.get_antennas_rasterscan_failed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsResult.get_antennas_rasterscan_failed" title="Link to this definition"></a></dt>
<dd><p>Get antennas which have had some error in raster scan analysis of the self.ms.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of antenna names</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsResult.ms">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ms</span></span><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsResult.ms" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsResult.set_result_fail">
<span class="sig-name descname"><span class="pre">set_result_fail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">antid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spwid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fieldid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#RasterScanHeuristicsResult.set_result_fail"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsResult.set_result_fail" title="Link to this definition"></a></dt>
<dd><p>Set False means raster analysis failure to self.antenna dictionary that is used for getting fail antennas.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>antid</strong> (<em>int</em>) – An Antenna ID of the result</p></li>
<li><p><strong>spwid</strong> (<em>int</em>) – An SpW ID of the result</p></li>
<li><p><strong>fieldid</strong> (<em>int</em>) – A field ID of the result</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.create_range">
<span class="sig-name descname"><span class="pre">create_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">peak_values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_deviation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_min</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#create_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.create_range" title="Link to this definition"></a></dt>
<dd><p>Create angle ranges (in degree) from peak values and width of the ranges.</p>
<p>It takes into account periodic property of the angle so that
ranges exceeding the range [angle_min, angle_max] are wrapped
around.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>peak_values</strong> – List of peak values in degree that become
the center of the ranges</p></li>
<li><p><strong>acceptable_deviation</strong> – (half-)width of the range in degree</p></li>
<li><p><strong>angle_min</strong> – minimum angle in degree</p></li>
<li><p><strong>angle_max</strong> – maximum angle in degree</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>RuntimeError</strong> – inconsistent angle setup</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of angle ranges in degree</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.detect_peak">
<span class="sig-name descname"><span class="pre">detect_peak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#detect_peak"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.detect_peak" title="Link to this definition"></a></dt>
<dd><p>Detect peak in the given histogram.</p>
<p>Detects single peak and find its range. Also compute the
number of data included in the range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hist</strong> – histogram to be examined</p></li>
<li><p><strong>mask</strong> – boolean mask array. setting True excludes the corresponding
array element in hist from the examination. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Four ints, total numlber of data included in the range, and
indices of the peak, left edge, and right edge.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.distance">
<span class="sig-name descname"><span class="pre">distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#distance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.distance" title="Link to this definition"></a></dt>
<dd><p>Compute distance between two points (x0, y0) and (x1, y1).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x0</strong> – x-coordinate value for point 0</p></li>
<li><p><strong>y0</strong> – y-coordinate value for point 0</p></li>
<li><p><strong>x1</strong> – x-coordinate value for point 1</p></li>
<li><p><strong>y1</strong> – y-coordinate value for point 1</p></li>
</ul>
</dd>
</dl>
<p>Returns: distance between two points</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.find_angle_gap">
<span class="sig-name descname"><span class="pre">find_angle_gap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle_deg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#find_angle_gap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.find_angle_gap" title="Link to this definition"></a></dt>
<dd><p>Find angle gap.</p>
<p>Find angle gap by using angle histogram. For raster scan,
there should be one (one-way raster) or two (round-trip raster)
angle peaks in the histogram. When deviation from the peaks exceeds
45deg, it is regarded as angle gap. Currently the algorithm doesn’t
support one-way raster scan that all the raster rows are the same.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>angle_deg</strong> – angle array in degree</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsFailure" title="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsFailure"><strong>RasterScanHeuristicsFailure</strong></a> – scan pattern is not likely to be raster scan</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of indices of angle gaps</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.find_angle_gap_by_range">
<span class="sig-name descname"><span class="pre">find_angle_gap_by_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle_deg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_ranges</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#find_angle_gap_by_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.find_angle_gap_by_range" title="Link to this definition"></a></dt>
<dd><p>Find angle gap using the range.</p>
<p>Given the angle array in degree, angle_deg, find angle using the
range specified by acceptable_ranges. When a certan angle is out of
ranges in acceptable_ranges, it is regarded as a gap.</p>
<blockquote>
<div><p>ASCII illustration for angle gap index</p>
<blockquote>
<div><blockquote>
<div><div class="line-block">
<div class="line"><a href="#id1"><span class="problematic" id="id2">*</span></a></div>
</div>
</div></blockquote>
<dl>
<dt>gap idx|   0   1   2   3 | 4 (gap)</dt><dd><div class="line-block">
<div class="line"><em>—</em>—<em>—</em>—*</div>
</div>
</dd>
</dl>
</div></blockquote>
<p>data idx| 0   1   2   3   4</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>angle_deg</strong> – angle array in degree</p></li>
<li><p><strong>acceptable_ranges</strong> – angle ranges to detect gaps.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of indices of angle gaps</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.find_distance_gap">
<span class="sig-name descname"><span class="pre">find_distance_gap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta_ra</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_dec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#find_distance_gap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.find_distance_gap" title="Link to this definition"></a></dt>
<dd><p>Find distance gap.</p>
<p>Distance gap is detected by the condition below:</p>
<blockquote>
<div><p>abs(distance - median(distance)) &gt; X * MAD(distance)</p>
</div></blockquote>
<p>where X is HeuristicsParameter.DistanceThresholdFactor.
Detection process is performed three times with clipping.</p>
<blockquote>
<div><p>ASCII illustration for distance gap</p>
<blockquote>
<div><blockquote>
<div><p>(gap)</p>
</div></blockquote>
<dl>
<dt>gap idx |   0   1     2     3</dt><dd><div class="line-block">
<div class="line"><em>—</em>—<em>——-</em>—*</div>
</div>
</dd>
</dl>
</div></blockquote>
<p>data idx | 0   1   2       3   4</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>delta_ra</strong> – horisontal position separation</p></li>
<li><p><strong>delta_dec</strong> – vertical position separation</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of indices of distance gaps</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.find_histogram_peak">
<span class="sig-name descname"><span class="pre">find_histogram_peak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hist</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#find_histogram_peak"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.find_histogram_peak" title="Link to this definition"></a></dt>
<dd><p>Find histogram peaks.</p>
<p>Repeatedly calls detect_peak until fraction of data included in
the peak region reaches HeuristicsParameter.AngleHistogramThreshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hist</strong> – histogram data.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsFailure" title="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsFailure"><strong>RasterScanHeuristicsFailure</strong></a> – fraction of detected peak region exceeded the threshold
    specified by HeuristicsParameter.AngleHistogramSparseness</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of peak indices.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.find_most_frequent">
<span class="sig-name descname"><span class="pre">find_most_frequent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#find_most_frequent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.find_most_frequent" title="Link to this definition"></a></dt>
<dd><p>Return the most frequent value in an input array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>v</strong> – data</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>most frequent value</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.find_raster_gap">
<span class="sig-name descname"><span class="pre">find_raster_gap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtrow_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#find_raster_gap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.find_raster_gap" title="Link to this definition"></a></dt>
<dd><p>Find gaps between individual raster map.</p>
<p>Returned list should be used in combination with timetable.
Here is an example to plot RA/DEC data per raster map:</p>
<p>Example:
&gt;&gt;&gt; import maplotlib.pyplot as plt
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; gap = find_raster_gap(ra, dec, dtrow_list)
&gt;&gt;&gt; for s, e in zip(gap[:-1], gap[1:]):
&gt;&gt;&gt;     idx = np.concatenate(dtrow_list[s:e])
&gt;&gt;&gt;     plt.plot(ra[idx], dec[idx], ‘.’)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ra</strong> – np.ndarray of RA</p></li>
<li><p><strong>dec</strong> – np.ndarray of Dec</p></li>
<li><p><strong>dtrow_list</strong> – List of np.ndarray holding array indices for ra and dec.
Each index array is supposed to represent single raster row.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsFailure" title="pipeline.hsd.heuristics.rasterscan.RasterScanHeuristicsFailure"><strong>RasterScanHeuristicsFailure</strong></a> – irregular row input or unsupported raster mapping</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray of index for dtrow_list indicating boundary between raster maps</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.find_raster_row">
<span class="sig-name descname"><span class="pre">find_raster_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#find_raster_row"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.find_raster_row" title="Link to this definition"></a></dt>
<dd><p>Find raster rows using angle gap as primary and distance gap as secondary.</p>
<p>The function tries to find angle gap with tight condition and distance
gap with loose condition. Then, these gaps are combined by taking union.
Finally, gap list is refined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ra</strong> – horizontal position sequence</p></li>
<li><p><strong>dec</strong> – vertical position sequence</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of indices that separate individual raster rows</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.generate_histogram">
<span class="sig-name descname"><span class="pre">generate_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_edge</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#generate_histogram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.generate_histogram" title="Link to this definition"></a></dt>
<dd><p>Generate histogram for given array.</p>
<p>Generates histogram for given array, arr, with the configuration specified by
the parameters, bin_width, left_edge, and right_edge.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> – data for histogram</p></li>
<li><p><strong>bin_width</strong> – width of the bin</p></li>
<li><p><strong>left_edge</strong> – lower limit of the histogram bin</p></li>
<li><p><strong>right_edge</strong> – upper limit of the histogram bin</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>histogram and bin configuration as two tuples</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.get_raster_distance">
<span class="sig-name descname"><span class="pre">get_raster_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtrow_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#get_raster_distance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.get_raster_distance" title="Link to this definition"></a></dt>
<dd><p>Compute distances between raster rows and the first row.</p>
<p>Compute distances between representative positions of raster rows and that of the first raster row.
Origin of the distance is the first raster row.
The representative position of each raster row is the mid point (mean position) of R.A. and Dec.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ra</strong> – np.ndarray of RA</p></li>
<li><p><strong>dec</strong> – np.ndarray of Dec</p></li>
<li><p><strong>dtrow_list</strong> – list of row ids for datatable rows per data chunk indicating
single raster row.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray of the distances.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.refine_gaps">
<span class="sig-name descname"><span class="pre">refine_gaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gap_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#refine_gaps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.refine_gaps" title="Link to this definition"></a></dt>
<dd><p>Refine gap list by eliminating unreasonable gaps.</p>
<p>When there is relatively large pointing error right before
the turnaround of raster row, turnaround effectively spread
two data points so that individual angles become shallow.
As a result, additional gap is introduced at the end of raster
row and edge point is isolated by the additional gap.
Such isolation can be compensated by refine_gaps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gap_list</strong> – original gap list</p></li>
<li><p><strong>num_data</strong> – total number of data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>refined gap list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.rasterscan.shift_angle">
<span class="sig-name descname"><span class="pre">shift_angle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/rasterscan.html#shift_angle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.rasterscan.shift_angle" title="Link to this definition"></a></dt>
<dd><p>Shift angle or angle array by the value, delta.</p>
<p>All angles must be the value in degree.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>angle</strong> – angle value or angle array in degree.</p></li>
<li><p><strong>delta</strong> – angle shift in degree.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>shifted angle in degree</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="pipeline-hsd-heuristics-rasterscan-test-module">
<h2>pipeline.hsd.heuristics.rasterscan_test module<a class="headerlink" href="#pipeline-hsd-heuristics-rasterscan-test-module" title="Link to this heading"></a></h2>
</section>
<section id="module-pipeline.hsd.heuristics.sdbeamsize">
<span id="pipeline-hsd-heuristics-sdbeamsize-module"></span><h2>pipeline.hsd.heuristics.sdbeamsize module<a class="headerlink" href="#module-pipeline.hsd.heuristics.sdbeamsize" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdbeamsize.AntennaDiameter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">AntennaDiameter</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdbeamsize.html#AntennaDiameter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdbeamsize.AntennaDiameter" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>get antenna diameter in metre from its name.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdbeamsize.AntennaDiameter.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdbeamsize.html#AntennaDiameter.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdbeamsize.AntennaDiameter.calculate" title="Link to this definition"></a></dt>
<dd><p>get antenna diameter in metre from its name.</p>
<p>name: antenna name</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdbeamsize.SingleDishBeamSize">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SingleDishBeamSize</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdbeamsize.html#SingleDishBeamSize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdbeamsize.SingleDishBeamSize" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>calculate beam size in arcsec.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdbeamsize.SingleDishBeamSize.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">diameter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdbeamsize.html#SingleDishBeamSize.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdbeamsize.SingleDishBeamSize.calculate" title="Link to this definition"></a></dt>
<dd><p>calculate beam size in arcsec.
returned value is rounded, like 33.0 for 32.199992 or
9.8 for 9.783333331.
NOTE: CURRENTLY the rounding is DISABLED to match manual reduction</p>
<p>diameter: antenna diameter in metre
frequency: observing frequency in GHz</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdbeamsize.SingleDishBeamSizeFromName">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SingleDishBeamSizeFromName</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdbeamsize.html#SingleDishBeamSizeFromName"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdbeamsize.SingleDishBeamSizeFromName" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#pipeline.hsd.heuristics.sdbeamsize.SingleDishBeamSize" title="pipeline.hsd.heuristics.sdbeamsize.SingleDishBeamSize"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingleDishBeamSize</span></code></a></p>
<p>calculate beam size in arcsec.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdbeamsize.SingleDishBeamSizeFromName.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdbeamsize.html#SingleDishBeamSizeFromName.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdbeamsize.SingleDishBeamSizeFromName.calculate" title="Link to this definition"></a></dt>
<dd><p>calculate beam size in arcsec.
antenna diameter is taken from its name.</p>
<p>name: antenna name
frequency: observing frequency in GHz</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-pipeline.hsd.heuristics.sdcaltype">
<span id="pipeline-hsd-heuristics-sdcaltype-module"></span><h2>pipeline.hsd.heuristics.sdcaltype module<a class="headerlink" href="#module-pipeline.hsd.heuristics.sdcaltype" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdcaltype.AsdmCalibrationTypeHeuristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">AsdmCalibrationTypeHeuristics</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdcaltype.html#AsdmCalibrationTypeHeuristics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdcaltype.AsdmCalibrationTypeHeuristics" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdcaltype.AsdmCalibrationTypeHeuristics.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdcaltype.html#AsdmCalibrationTypeHeuristics.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdcaltype.AsdmCalibrationTypeHeuristics.calculate" title="Link to this definition"></a></dt>
<dd><p>Make a calculation based on the given parameters.</p>
<p>This is an abstract method and must be implemented by all Heuristic
subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The signature and return types of <code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate()</span></code>
are intended to be implementation specific. Refer to the
documentation of the implementing class for the appropriate
signature.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdcaltype.CalibrationTypeHeuristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CalibrationTypeHeuristics</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdcaltype.html#CalibrationTypeHeuristics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdcaltype.CalibrationTypeHeuristics" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdcaltype.CalibrationTypeHeuristics.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdcaltype.html#CalibrationTypeHeuristics.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdcaltype.CalibrationTypeHeuristics.calculate" title="Link to this definition"></a></dt>
<dd><p>Make a calculation based on the given parameters.</p>
<p>This is an abstract method and must be implemented by all Heuristic
subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The signature and return types of <code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate()</span></code>
are intended to be implementation specific. Refer to the
documentation of the implementing class for the appropriate
signature.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdcaltype.DefaultCalibrationTypeHeuristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DefaultCalibrationTypeHeuristics</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdcaltype.html#DefaultCalibrationTypeHeuristics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdcaltype.DefaultCalibrationTypeHeuristics" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Always return calibration mode ‘none’.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdcaltype.DefaultCalibrationTypeHeuristics.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdcaltype.html#DefaultCalibrationTypeHeuristics.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdcaltype.DefaultCalibrationTypeHeuristics.calculate" title="Link to this definition"></a></dt>
<dd><p>Return calibration type. Always return ‘none’.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdcaltype.MsCalibrationTypeHeuristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MsCalibrationTypeHeuristics</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdcaltype.html#MsCalibrationTypeHeuristics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdcaltype.MsCalibrationTypeHeuristics" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Return appropriate calibration type by examining
STATE subtable.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sdcaltype.MsCalibrationTypeHeuristics.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sdcaltype.html#MsCalibrationTypeHeuristics.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sdcaltype.MsCalibrationTypeHeuristics.calculate" title="Link to this definition"></a></dt>
<dd><p>Return calibration type, which is determined
by examining STATE subtable.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-pipeline.hsd.heuristics.sddatatype">
<span id="pipeline-hsd-heuristics-sddatatype-module"></span><h2>pipeline.hsd.heuristics.sddatatype module<a class="headerlink" href="#module-pipeline.hsd.heuristics.sddatatype" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sddatatype.DataTypeHeuristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DataTypeHeuristics</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sddatatype.html#DataTypeHeuristics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sddatatype.DataTypeHeuristics" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Examine type of the input data. Data types that are recognizable
by this heuristics are:</p>
<blockquote>
<div><p>‘MS2’  – Measurement Set
‘ASDM’ – ASDM
‘FITS’ – ATNF SDFITS
‘NRO’  – NRO data format (both NEWSTAR and NOSTAR)</p>
</div></blockquote>
<p>Otherwise, the heuristics will return ‘UNKNOWN’.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sddatatype.DataTypeHeuristics.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sddatatype.html#DataTypeHeuristics.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sddatatype.DataTypeHeuristics.calculate" title="Link to this definition"></a></dt>
<dd><p>Return data type of the file.</p>
<p>filename – name of the file on disk</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.sddatatype.is_ms">
<span class="sig-name descname"><span class="pre">is_ms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/sddatatype.html#is_ms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.sddatatype.is_ms" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-pipeline.hsd.heuristics.tsysspwmap">
<span id="pipeline-hsd-heuristics-tsysspwmap-module"></span><h2>pipeline.hsd.heuristics.tsysspwmap module<a class="headerlink" href="#module-pipeline.hsd.heuristics.tsysspwmap" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.tsysspwmap.TsysSpwMapHeuristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TsysSpwMapHeuristics</span></span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/tsysspwmap.html#TsysSpwMapHeuristics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.tsysspwmap.TsysSpwMapHeuristics" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Heuristics for Tsys spw mapping
Examine frequency coverage and choose one Tsys spw for each science spw.
Score for frequency coverage is calculated by the following formula:</p>
<blockquote>
<div><dl class="simple">
<dt>score = (min(fmax_tsys,fmax_science) - max(fmin_tsys,fmin_science))</dt><dd><p>/ (fmax_science - fmin_science)</p>
</dd>
</dl>
</div></blockquote>
<p>The score 1.0 is the best (whole science frequency range is covered by Tsys
spw) while score &lt;= 0.0 is the worst (no overlap between Tsys spw and science
spw).</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.tsysspwmap.TsysSpwMapHeuristics.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spwmap_pairs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/tsysspwmap.html#TsysSpwMapHeuristics.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.tsysspwmap.TsysSpwMapHeuristics.calculate" title="Link to this definition"></a></dt>
<dd><p>Make a calculation based on the given parameters.</p>
<p>This is an abstract method and must be implemented by all Heuristic
subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The signature and return types of <code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate()</span></code>
are intended to be implementation specific. Refer to the
documentation of the implementing class for the appropriate
signature.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hsd.heuristics.tsysspwmap.best_spwmap">
<span class="sig-name descname"><span class="pre">best_spwmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scores</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hsd/heuristics/tsysspwmap.html#best_spwmap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hsd.heuristics.tsysspwmap.best_spwmap" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-pipeline.hsd.heuristics">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pipeline.hsd.heuristics" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2024, Pipeline Dev. Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>