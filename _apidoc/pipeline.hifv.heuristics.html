

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pipeline.hifv.heuristics package &mdash; Pipeline unknown documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/custom_theme.css?v=678032d9" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=3f1b9271"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Pipeline
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Releases etc.</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Past Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modular.html">Run the Pipeline in a Conda environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies.html">Dependencies of <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Tasks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline_tasks/pipeline_tasks.html">Pipeline Heuristics Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Tasks (autosummary)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.h.cli.html">pipeline.h.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hif.cli.html">pipeline.hif.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hifa.cli.html">pipeline.hifa.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hifv.cli.html">pipeline.hifv.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hsd.cli.html">pipeline.hsd.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hsdn.cli.html">pipeline.hsdn.cli</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Heuristics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../heuristics/field_parameter.html">Field parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../heuristics/FlaggingTasks.html">Pipeline Flagging Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/ways_to_run_the_pipeline.html">Ways to run the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/comparing_pipeline_executions.html">Comparing pipeline executions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/building_the_pipeline.html">Building the pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/ALMA-Imaging-Workflow.html">ALMA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLA-Imaging-Workflow.html">VLA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLASS-SE-CONT-Imaging-Workflow.html">VLASS-SE-CONT imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLASS-SE-CUBE-Imaging-Workflow.html">VLASS-SE-CUBE imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/selfcal_workflow.html">VLASS Selfcal &amp; Restore workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/pipeline_tests.html">Pipeline testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/DataType_Testing.html">DataType Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/QA_scores.html">Pipeline Quality Assurance (QA) Score Class Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/DeveloperDocumentation.html">Pipeline developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/python3_conversion_notes.html">Python 3 conversion notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/recipes.html">Pipeline Recipes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Domain/Context (automodapi)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics.html"><code class="docutils literal notranslate"><span class="pre">pipeline.domain</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html#module-pipeline.infrastructure.launcher"><code class="docutils literal notranslate"><span class="pre">pipeline.infrastructure.launcher</span></code> module</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Domain/Context (autosummary)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.domain.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.infrastructure.launcher.html">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Task/Inputs/Results Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../classes.html">Classes in <code class="docutils literal notranslate"><span class="pre">pipeline.h*.tasks</span></code> modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../classes.html#inheritance-diagrams">Inheritance Diagrams</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples Notes (from Jupyter Notebooks)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/test1.html">test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Notes (from .rst)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/test2.html">Example 1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pipeline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">pipeline.hifv.heuristics package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_apidoc/pipeline.hifv.heuristics.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pipeline-hifv-heuristics-package">
<h1>pipeline.hifv.heuristics package<a class="headerlink" href="#pipeline-hifv-heuristics-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-pipeline.hifv.heuristics.bandpass">
<span id="pipeline-hifv-heuristics-bandpass-module"></span><h2>pipeline.hifv.heuristics.bandpass module<a class="headerlink" href="#module-pipeline.hifv.heuristics.bandpass" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.bandpass.computeChanFlag">
<span class="sig-name descname"><span class="pre">computeChanFlag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/bandpass.html#computeChanFlag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.bandpass.computeChanFlag" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.bandpass.do_bandpass">
<span class="sig-name descname"><span class="pre">do_bandpass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RefAntOutput</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ktypecaltable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bpdgain_touse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/bandpass.html#do_bandpass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.bandpass.do_bandpass" title="Link to this definition"></a></dt>
<dd><p>Run CASA task bandpass</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.bandpass.do_bandpassweakbp">
<span class="sig-name descname"><span class="pre">do_bandpassweakbp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RefAntOutput</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ktypecaltable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bpdgain_touse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/bandpass.html#do_bandpassweakbp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.bandpass.do_bandpassweakbp" title="Link to this definition"></a></dt>
<dd><p>Run CASA task bandpass</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.bandpass.removeRows">
<span class="sig-name descname"><span class="pre">removeRows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">caltable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spwids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/bandpass.html#removeRows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.bandpass.removeRows" title="Link to this definition"></a></dt>
<dd><p>Remove rows from specified spwid from a CASA caltable.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.bandpass.weakbp">
<span class="sig-name descname"><span class="pre">weakbp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RefAntOutput</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ktypecaltable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bpdgain_touse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/bandpass.html#weakbp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.bandpass.weakbp" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-pipeline.hifv.heuristics.lib_EVLApipeutils">
<span id="pipeline-hifv-heuristics-lib-evlapipeutils-module"></span><h2>pipeline.hifv.heuristics.lib_EVLApipeutils module<a class="headerlink" href="#module-pipeline.hifv.heuristics.lib_EVLApipeutils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.lib_EVLApipeutils.getBCalStatistics">
<span class="sig-name descname"><span class="pre">getBCalStatistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calTable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">innerbuff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/lib_EVLApipeutils.html#getBCalStatistics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.lib_EVLApipeutils.getBCalStatistics" title="Link to this definition"></a></dt>
<dd><p>Version 2012-11-20 v1.0 STM casa 4.0 version
Version 2012-12-17 v1.0 STM casa 4.1 version, phase, real, imag stats</p>
<p>This method will look at the specified B calibration table and return the
statistics of unflagged solutions for each Antenna, SPW, Poln.  This assumes
that the specified cal table will not have any channel dependent flagging.</p>
<p>return structure is a dictionary with AntennaID and Spectral Window ID
as the keys and returns a list of statistics per polarization in
the order specified in the Cal Table.</p>
<p>Input:</p>
<blockquote>
<div><p>calTable  -  name of MS
innerbuff -  fraction of spw bandwidth to ignore at each edge</p>
<blockquote>
<div><p>(&lt;0.5, default=0.1 use inner 80% of channels each spw)</p>
</div></blockquote>
</div></blockquote>
<p>Output: OutDict (return value)</p>
<p>STM 2012-11-19 dictionary structure:
key: ‘antspw’ indexed by antenna and spectral window id per poln</p>
<blockquote>
<div><blockquote>
<div><p>[‘antspw’][&lt;antid&gt;][&lt;spwid&gt;][&lt;polid&gt;]</p>
</div></blockquote>
<dl>
<dt>‘antband’ indexed by antenna and rx/baseband summed over subbands and poln</dt><dd><p>[‘ant’][&lt;antid&gt;][&lt;rxband&gt;][&lt;baseband&gt;]
Note: this requires that the spectral window NAME follow JVLA convention of</p>
<blockquote>
<div><p>rxband#baseband#spw (e.g. ‘EVLA_K#A0C0#48’)</p>
</div></blockquote>
</dd>
</dl>
</div></blockquote>
<p>For each of these there is a data structure for [‘all’] and [‘inner’]
that contains the fields: [‘total’], [‘number’], [‘mean’], [‘min’], [‘max’]</p>
<dl class="simple">
<dt>Some useful indexing dictionaries are also output:</dt><dd><p>[‘antDict’][ant] the name of antenna with index ant
[‘spwDict’][spw] {‘RX’:rx, ‘Baseband’:bb, ‘Subband’:sb} correspoding to a given spw
[‘rxBasebandDict’][rx][bb] list of spws corresponding to a given rx and bb</p>
</dd>
</dl>
<p>Example:</p>
<p>!cp /home/sandrock2/smyers/casa/pipeline/pipeline4.1/lib_EVLApipeutils.py .
from lib_EVLApipeutils import getBCalStatistics
result = getBCalStatistics(‘testBPcal.b’)</p>
<p>This is a B Jones table, proceeding
Found 1 Rx bands
Rx band EVLA_K has basebands: [‘A0C0’, ‘B0D0’]
Within all channels:
Found 864 total solutions with 47824 good (unflagged)
Within inner 0.8 of channels:
Found 0 total solutions with 42619 good (unflagged)</p>
<blockquote>
<div><dl>
<dt>AntID      AntName      Rx-band      Baseband    min/max(all)  min/max(inner) ALERT?</dt><dd><blockquote>
<div><p>0         ea01       EVLA_K         A0C0        0.3541        0.3575
0         ea01       EVLA_K         B0D0        0.4585        0.4591
1         ea02       EVLA_K         A0C0        0.3239        0.3298
1         ea02       EVLA_K         B0D0        0.2130        0.2179
2         ea03       EVLA_K         A0C0        0.3097        0.3124
2         ea03       EVLA_K         B0D0        0.3247        0.3282
3         ea04       EVLA_K         A0C0        0.3029        0.3055
3         ea04       EVLA_K         B0D0        0.2543        0.2543
4         ea05       EVLA_K         A0C0        0.2657        0.2715
4         ea05       EVLA_K         B0D0        0.2336        0.2357
5         ea06       EVLA_K         A0C0        0.3474        0.3501
5         ea06       EVLA_K         B0D0        0.2371        0.2398
6         ea07       EVLA_K         A0C0        0.2294        0.2322
6         ea07       EVLA_K         B0D0        0.3684        0.3690
7         ea08       EVLA_K         A0C0        0.2756        0.2809
7         ea08       EVLA_K         B0D0        0.5269        0.5269
8         ea10       EVLA_K         A0C0        0.2617        0.2686
8         ea10       EVLA_K         B0D0        0.2362        0.2407
9         ea11       EVLA_K         A0C0        0.2594        0.2607
9         ea11       EVLA_K         B0D0        0.3015        0.3111</p>
</div></blockquote>
<p>10         ea12       EVLA_K         A0C0        0.2418        0.2491
10         ea12       EVLA_K         B0D0        0.3839        0.3849
11         ea13       EVLA_K         A0C0        0.3017        0.3156
11         ea13       EVLA_K         B0D0        0.3299        0.3299
12         ea14       EVLA_K         A0C0        0.2385        0.2415
12         ea14       EVLA_K         B0D0        0.2081        0.2101
13         ea15       EVLA_K         A0C0        0.3118        0.3151
13         ea15       EVLA_K         B0D0        0.1749        0.1844 *
14         ea16       EVLA_K         A0C0        0.2050        0.2051
14         ea16       EVLA_K         B0D0        0.4386        0.4537
15         ea17       EVLA_K         A0C0        0.4084        0.4107
15         ea17       EVLA_K         B0D0        0.2151        0.2189
16         ea18       EVLA_K         A0C0        0.3124        0.3147
16         ea18       EVLA_K         B0D0        0.3712        0.3730
17         ea19       EVLA_K         A0C0        0.3084        0.3132
17         ea19       EVLA_K         B0D0        0.2453        0.2522
18         ea20       EVLA_K         A0C0        0.4618        0.4672
18         ea20       EVLA_K         B0D0        0.2772        0.2790
19         ea21       EVLA_K         A0C0        0.3971        0.4032
19         ea21       EVLA_K         B0D0        0.2812        0.2818
20         ea22       EVLA_K         A0C0        0.2495        0.2549
20         ea22       EVLA_K         B0D0        0.3777        0.3833
21         ea23       EVLA_K         A0C0        0.3213        0.3371
21         ea23       EVLA_K         B0D0        0.2702        0.2787
22         ea24       EVLA_K         A0C0        0.2470        0.2525
22         ea24       EVLA_K         B0D0        0.0127        0.0127 <strong>*
23         ea25       EVLA_K         A0C0        0.3173        0.3205
23         ea25       EVLA_K         B0D0        0.0056        0.0066 *</strong>
24         ea26       EVLA_K         A0C0        0.3505        0.3550
24         ea26       EVLA_K         B0D0        0.4028        0.4071
25         ea27       EVLA_K         A0C0        0.3165        0.3244
25         ea27       EVLA_K         B0D0        0.2644        0.2683
26         ea28       EVLA_K         A0C0        0.1695        0.1712 *
26         ea28       EVLA_K         B0D0        0.3213        0.3318</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>result[‘antband’][22][‘EVLA_K’][‘B0D0’]</dt><dd><dl>
<dt>Out:</dt><dd><dl>
<dt>{‘all’: {‘amp’: {‘max’: 3.3507643208628997,</dt><dd><blockquote>
<div><blockquote>
<div><p>‘mean’: 1.2839660621605888,
‘min’: 0.042473547230042749,
‘var’: 0.42764307104292559},</p>
</div></blockquote>
<dl class="simple">
<dt>‘imag’: {‘max’: array(1.712250828742981),</dt><dd><p>‘mean’: -0.0042696134968516824,
‘min’: array(-2.2086853981018066),
‘var’: 0.43859873853192027},</p>
</dd>
</dl>
<p>‘number’: 900,
‘phase’: {‘max’: 112.32456525225054,</p>
<blockquote>
<div><p>‘mean’: -0.70066399447640126,
‘min’: -108.23612296337477,
‘var’: 1445.9499062237583},</p>
</div></blockquote>
<dl class="simple">
<dt>‘real’: {‘max’: array(3.3105719089508057),</dt><dd><p>‘mean’: 1.0975328904785548,
‘min’: array(-0.13342639803886414),
‘var’: 0.433613996950728},</p>
</dd>
</dl>
<p>‘total’: 1024},</p>
</div></blockquote>
<dl>
<dt>‘inner’: {‘amp’: {‘max’: 3.3507643208628997,</dt><dd><blockquote>
<div><p>‘mean’: 1.2913493102726084,
‘min’: 0.042473547230042749,
‘var’: 0.45731194085061877},</p>
</div></blockquote>
<dl class="simple">
<dt>‘imag’: {‘max’: array(1.712250828742981),</dt><dd><p>‘mean’: -0.0019235184823728287,
‘min’: array(-2.2086853981018066),
‘var’: 0.43650578363669668},</p>
</dd>
</dl>
<p>‘number’: 802,
‘phase’: {‘max’: 112.32456525225054,</p>
<blockquote>
<div><p>‘mean’: -0.74464737957566107,
‘min’: -108.23612296337477,
‘var’: 1496.4536912732597},</p>
</div></blockquote>
<dl class="simple">
<dt>‘real’: {‘max’: array(3.3105719089508057),</dt><dd><p>‘mean’: 1.1054519462910002,
‘min’: array(-0.13342639803886414),
‘var’: 0.4665390728630604},</p>
</dd>
</dl>
<p>‘total’: 816}}</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>result[‘rxBasebandDict’][‘EVLA_K’][‘B0D0’]</dt><dd><p>Out: [8, 9, 10, 11, 12, 13, 14, 15]</p>
</dd>
<dt>result[‘antspw’][22][10]</dt><dd><dl>
<dt>Out:</dt><dd><dl>
<dt>{0: {‘all’: {‘amp’: {‘max’: 3.3507643208628997,</dt><dd><blockquote>
<div><blockquote>
<div><p>‘mean’: 1.6887832659451747,
‘min’: 0.054888048286296932,
‘var’: 0.84305637195708472},</p>
</div></blockquote>
<dl class="simple">
<dt>‘imag’: {‘max’: array(1.4643619060516357),</dt><dd><p>‘mean’: -0.13419617990315968,
‘min’: array(-2.2086853981018066),
‘var’: 0.97892254522390565},</p>
</dd>
</dl>
<p>‘number’: 59,
‘phase’: {‘max’: 112.32456525225054,</p>
<blockquote>
<div><p>‘mean’: -1.0111711887628112,
‘min’: -102.4143890204484,
‘var’: 2885.5110793438112},</p>
</div></blockquote>
<dl class="simple">
<dt>‘real’: {‘max’: array(3.3105719089508057),</dt><dd><p>‘mean’: 1.2845739619253926,
‘min’: array(-0.13342639803886414),
‘var’: 1.0099576839663802},</p>
</dd>
</dl>
<p>‘total’: 64},</p>
</div></blockquote>
<dl>
<dt>‘inner’: {‘amp’: {‘max’: 3.3507643208628997,</dt><dd><blockquote>
<div><p>‘mean’: 1.1064667538670538,
‘min’: 0.054888048286296932,
‘var’: 0.94882587512210448},</p>
</div></blockquote>
<dl class="simple">
<dt>‘imag’: {‘max’: array(1.4643619060516357),</dt><dd><p>‘mean’: 0.056129313275038409,
‘min’: array(-2.2086853981018066),
‘var’: 0.55401604820332395},</p>
</dd>
</dl>
<p>‘number’: 201,
‘phase’: {‘max’: 112.32456525225054,</p>
<blockquote>
<div><p>‘mean’: 17.99353823044413,
‘min’: -102.4143890204484,
‘var’: 5065.0038289850836},</p>
</div></blockquote>
<dl class="simple">
<dt>‘real’: {‘max’: array(3.3105719089508057),</dt><dd><p>‘mean’: 0.75592079894228781,
‘min’: array(-0.13342639803886414),
‘var’: 0.89091406078797231},</p>
</dd>
</dl>
<p>‘total’: 51}},</p>
</dd>
</dl>
</dd>
<dt>1: {‘all’: {‘amp’: {‘max’: 1.0603890232940267,</dt><dd><blockquote>
<div><blockquote>
<div><p>‘mean’: 0.9966154059201201,
‘min’: 0.92736792814263314,
‘var’: 0.032951023002670755},</p>
</div></blockquote>
<dl class="simple">
<dt>‘imag’: {‘max’: array(0.28490364551544189),</dt><dd><p>‘mean’: 0.10552169008859259,
‘min’: array(-0.08266795426607132),
‘var’: 0.017548692059680165},</p>
</dd>
</dl>
<p>‘number’: 59,
‘phase’: {‘max’: 17.237656150196859,</p>
<blockquote>
<div><p>‘mean’: 6.0660176622725466,
‘min’: -4.9577763029789832,
‘var’: 40.224751029787001},</p>
</div></blockquote>
<dl class="simple">
<dt>‘real’: {‘max’: array(1.047441840171814),</dt><dd><p>‘mean’: 0.98505325640662234,
‘min’: array(0.90479201078414917),
‘var’: 0.032541082320460629},</p>
</dd>
</dl>
<p>‘total’: 64},</p>
</div></blockquote>
<dl>
<dt>‘inner’: {‘amp’: {‘max’: 1.0603890232940267,</dt><dd><blockquote>
<div><p>‘mean’: 1.0327309832106102,
‘min’: 0.92837663017787742,
‘var’: 0.19543922221719845},</p>
</div></blockquote>
<dl class="simple">
<dt>‘imag’: {‘max’: array(0.26414120197296143),</dt><dd><p>‘mean’: 0.13256895535348001,
‘min’: array(-0.08266795426607132),
‘var’: 0.036957882304178208},</p>
</dd>
</dl>
<p>‘number’: 201,
‘phase’: {‘max’: 15.395755389451365,</p>
<blockquote>
<div><p>‘mean’: 7.3133434743802201,
‘min’: -4.9577763029789832,
‘var’: 18.607793373980815},</p>
</div></blockquote>
<dl class="simple">
<dt>‘real’: {‘max’: array(1.047441840171814),</dt><dd><p>‘mean’: 1.0216352563400155,
‘min’: array(0.92740714550018311),
‘var’: 0.19275019403126262},</p>
</dd>
</dl>
<p>‘total’: 51}}}</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p>NOTE: You can see the problem is in poln 0 of this spw from the amp range and phase.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.lib_EVLApipeutils.getCalFlaggedSoln">
<span class="sig-name descname"><span class="pre">getCalFlaggedSoln</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calTable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/lib_EVLApipeutils.html#getCalFlaggedSoln"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.lib_EVLApipeutils.getCalFlaggedSoln" title="Link to this definition"></a></dt>
<dd><p>Version 2012-05-03 v1.0 STM to 3.4 from original 3.3 version, new dictionary
Version 2012-05-03 v1.1 STM indexed by ant, spw also
Version 2012-09-11 v1.1 STM correct doc of &lt;polid&gt; indexing, bug fix, median over ant
Version 2012-09-12 v1.2 STM median over ant revised
Version 2012-11-13 v2.0 STM casa 4.0 version with new call mechanism
Version 2013-01-11 v2.1 STM use getvarcol</p>
<p>This method will look at the specified calibration table and return the
fraction of flagged solutions for each Antenna, SPW, Poln.  This assumes
that the specified cal table will not have any channel dependent flagging.</p>
<p>return structure is a dictionary with AntennaID and Spectral Window ID
as the keys and returns a list of fractional flagging per polarization in
the order specified in the Cal Table.</p>
<p>STM 2012-05-03 revised dictionary structure:
key: ‘all’ all solutions</p>
<blockquote>
<div><blockquote>
<div><p>[‘all’][‘total’] = &lt;number&gt;
[‘all’][‘flagged’] = &lt;number&gt;
[‘all’][‘fraction’] = &lt;fraction&gt;</p>
</div></blockquote>
<dl class="simple">
<dt>‘antspw’ indexed by antenna and spectral window id per poln</dt><dd><p>[‘antspw’][&lt;antid&gt;][&lt;spwid&gt;][&lt;polid&gt;][‘total’] = &lt;total number sols per poln&gt;
[‘antspw’][&lt;antid&gt;][&lt;spwid&gt;][&lt;polid&gt;][‘flagged’] = &lt;flagged number sols per poln&gt;
[‘antspw’][&lt;antid&gt;][&lt;spwid&gt;][&lt;polid&gt;][‘fraction’] = &lt;flagged fraction per poln&gt;</p>
</dd>
<dt>‘ant’ indexed by antenna summed over spectral window per poln</dt><dd><p>[‘ant’][&lt;antid&gt;][&lt;polid&gt;][‘total’] = &lt;total number sols per poln&gt;
[‘ant’][&lt;antid&gt;][&lt;polid&gt;][‘flagged’] = &lt;flagged number sols per poln&gt;
[‘ant’][&lt;antid&gt;][&lt;polid&gt;][‘fraction’] = &lt;flagged fraction per poln&gt;</p>
</dd>
<dt>‘spw’ indexed by spectral window summed over antenna per poln</dt><dd><p>[‘spw’][&lt;spwid&gt;][&lt;polid&gt;][‘total’] = &lt;total number sols per poln&gt;
[‘spw’][&lt;spwid&gt;][&lt;polid&gt;][‘flagged’] = &lt;flagged number sols per poln&gt;
[‘spw’][&lt;spwid&gt;][&lt;polid&gt;][‘fraction’] = &lt;flagged fraction per poln&gt;</p>
</dd>
<dt>‘antmedian’ median fractions over antenna summed over spw and polarization</dt><dd><p>[‘total’] = median &lt;total number sols per ant&gt;
[‘flagged’] = median &lt;flagged number sols per ant&gt;
[‘fraction’] = median &lt;flagged fraction of sols per ant&gt;
[‘number’] = number of antennas that went into the median</p>
</dd>
</dl>
</div></blockquote>
<p>Note that fractional numbers flagged per poln are computed as a fraction of channels
(thus a full set of channels for a given ant/spw/poln count as 1.0)</p>
<p>Example:</p>
<p>!cp /home/sandrock2/smyers/casa/pipeline/lib_EVLApipeutils.py .
from lib_EVLApipeutils import getCalFlaggedSoln
result = getCalFlaggedSoln(‘calSN2010FZ.G0’)
result[‘all’]</p>
<blockquote>
<div><p>Out: {‘flagged’: 1212, ‘fraction’: 0.16031746031746033, ‘total’: 7560}</p>
</div></blockquote>
<dl class="simple">
<dt>result[‘antspw’][21][7]</dt><dd><dl class="simple">
<dt>Out: {0: {‘flagged’: 3.0, ‘fraction’: 0.29999999999999999, ‘total’: 10},</dt><dd><p>1: {‘flagged’: 3.0, ‘fraction’: 0.29999999999999999, ‘total’: 10}}</p>
</dd>
</dl>
</dd>
<dt>result[‘ant’][15]</dt><dd><dl class="simple">
<dt>Out: {0: {‘flagged’: 60.0, ‘fraction’: 0.42857142857142855, ‘total’: 140},</dt><dd><p>1: {‘flagged’: 60.0, ‘fraction’: 0.42857142857142855, ‘total’: 140}}</p>
</dd>
</dl>
</dd>
<dt>result[‘spw’][3]</dt><dd><dl class="simple">
<dt>Out: {0: {‘flagged’: 39.0, ‘fraction’: 0.14444444444444443, ‘total’: 270},</dt><dd><p>1: {‘flagged’: 39.0, ‘fraction’: 0.14444444444444443, ‘total’: 270}}</p>
</dd>
</dl>
</dd>
</dl>
<p>Bresult = getCalFlaggedSoln(‘calSN2010FZ.B0’)
Bresult[‘all’]</p>
<blockquote>
<div><p>Out: {‘flagged’: 69.171875, ‘fraction’: 0.091497189153439157, ‘total’: 756}</p>
</div></blockquote>
<dl class="simple">
<dt>Bresult[‘ant’][15]</dt><dd><dl class="simple">
<dt>Out: {0: {‘flagged’: 6.03125, ‘fraction’: 0.43080357142857145, ‘total’: 14},</dt><dd><p>1: {‘flagged’: 6.03125, ‘fraction’: 0.43080357142857145, ‘total’: 14}}</p>
</dd>
</dl>
</dd>
<dt>Bresult[‘antmedian’]</dt><dd><p>Out: {‘flagged’: 0.0625, ‘fraction’: 0.002232142857142857, ‘number’: 27, ‘total’: 28.0}</p>
</dd>
</dl>
<p>Another example, to make a list of spws in the caltable that have any
unflagged solutions in them:</p>
<p>G2result = getCalFlaggedSoln(‘calSN2010FZ.G2.2’)
goodspw = []
for ispw in G2result[‘spw’].keys():</p>
<blockquote>
<div><p>tot = 0
flagd = 0
for ipol in G2result[‘spw’][ispw].keys():</p>
<blockquote>
<div><p>tot += G2result[‘spw’][ispw][ipol][‘total’]
flagd += G2result[‘spw’][ispw][ipol][‘flagged’]</p>
</div></blockquote>
<dl>
<dt>if tot&gt;0:</dt><dd><p>fract = flagd/tot
if fract&lt;1.0:</p>
<blockquote>
<div><p>goodspw.append(ispw)</p>
</div></blockquote>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>goodspw</dt><dd><p>Out: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.lib_EVLApipeutils.set_add_model_column_parameters">
<span class="sig-name descname"><span class="pre">set_add_model_column_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/lib_EVLApipeutils.html#set_add_model_column_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.lib_EVLApipeutils.set_add_model_column_parameters" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-pipeline.hifv.heuristics.rfi">
<span id="pipeline-hifv-heuristics-rfi-module"></span><h2>pipeline.hifv.heuristics.rfi module<a class="headerlink" href="#module-pipeline.hifv.heuristics.rfi" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.rfi.RflagDevHeuristic">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RflagDevHeuristic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_sefd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/rfi.html#RflagDevHeuristic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.rfi.RflagDevHeuristic" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<p>Heuristics for Rflag thresholds.
see PIPE-685/987</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.rfi.RflagDevHeuristic.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rflag_report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/rfi.html#RflagDevHeuristic.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.rfi.RflagDevHeuristic.calculate" title="Link to this definition"></a></dt>
<dd><p>Make a calculation based on the given parameters.</p>
<p>This is an abstract method and must be implemented by all Heuristic
subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The signature and return types of <code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate()</span></code>
are intended to be implementation specific. Refer to the
documentation of the implementing class for the appropriate
signature.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.rfi.RflagDevHeuristic.get_vla_sefd">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_vla_sefd</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/rfi.html#RflagDevHeuristic.get_vla_sefd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.rfi.RflagDevHeuristic.get_vla_sefd" title="Link to this definition"></a></dt>
<dd><p>Load the VLA SEFD profile.</p>
<p>PIPE-987: See the ticket attachement for the description of SEFD data files
Note: The band names here are capitalized, but the labels from SPW names are all caps.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.rfi.get_amp_range">
<span class="sig-name descname"><span class="pre">get_amp_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datacolumn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'corrected'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uvrange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useflags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeaverage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timebin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'1e8s'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timespan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vis_averaged</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/rfi.html#get_amp_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.rfi.get_amp_range" title="Link to this definition"></a></dt>
<dd><p>Get amplitude min/max from a MS after applying data selection and time-averging.</p>
<p>note: currently not used.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.rfi.mssel_valid">
<span class="sig-name descname"><span class="pre">mssel_valid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uvdist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/rfi.html#mssel_valid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.rfi.mssel_valid" title="Link to this definition"></a></dt>
<dd><p>Check if the data selection is valid (i.e. not a null selection).</p>
<p>This method is used as a secondary “null” selection check for flagdata() calls.
Ideally, the primary “corr_type_string” check should be sufficient.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.rfi.plotms_get_autorange">
<span class="sig-name descname"><span class="pre">plotms_get_autorange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xyrange</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/rfi.html#plotms_get_autorange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.rfi.plotms_get_autorange" title="Link to this definition"></a></dt>
<dd><p>Estimate the autoscale plotrange from CASAplotms based on data range.</p>
<p>The algorithm is translated from casa6/casa5/code/display/QtPlotter:QtDrawSettings::adjustAxis
note: currently not used.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.rfi.plotms_get_xyrange">
<span class="sig-name descname"><span class="pre">plotms_get_xyrange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plotms_log</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/rfi.html#plotms_get_xyrange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.rfi.plotms_get_xyrange" title="Link to this definition"></a></dt>
<dd><p>Parse the CASAplotms log to obatin the range of plotted data points.</p>
<p>note: currently not used.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.rfi.test_checkflag_dataselect">
<span class="sig-name descname"><span class="pre">test_checkflag_dataselect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/rfi.html#test_checkflag_dataselect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.rfi.test_checkflag_dataselect" title="Link to this definition"></a></dt>
<dd><p>Test rfi flagging field/scan selection.</p>
<dl class="simple">
<dt>exemple:</dt><dd><p>from pipeline.hifv.heuristics.rfi import test_checkflag_dataselect
test_checkflag_dataselect(‘13A-398.sb17165245.eb19476558.56374.213876608796.ms’)
test_checkflag_dataselect(‘16A-197.sb32730185.eb32962865.57682.3425903125.ms’)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pipeline.hifv.heuristics.specline_detect">
<span id="pipeline-hifv-heuristics-specline-detect-module"></span><h2>pipeline.hifv.heuristics.specline_detect module<a class="headerlink" href="#module-pipeline.hifv.heuristics.specline_detect" title="Link to this heading"></a></h2>
<p>Heuristic for identifying and/or defining the SPW designation, either as a continuum window or for spectral line analysis</p>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.specline_detect.detect_spectral_lines">
<span class="sig-name descname"><span class="pre">detect_spectral_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="pipeline.domain.html#pipeline.domain.measurementset.MeasurementSet" title="pipeline.domain.measurementset.MeasurementSet"><span class="pre">MeasurementSet</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">specline_spws</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/specline_detect.html#detect_spectral_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.specline_detect.detect_spectral_lines" title="Link to this definition"></a></dt>
<dd><p>Handles assignment of spectral windows</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mset</strong> (<em>object</em>) – MeasurementSet object containing MS information</p></li>
<li><p><strong>specline_spws</strong> (<em>str</em>) – tells pipeline how to handle spectral line assignment; ‘auto’, ‘none’, or
user-defined spectral line spws in CASA format (e.g. ‘2,3,4~9,23’)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pipeline.hifv.heuristics.standard">
<span id="pipeline-hifv-heuristics-standard-module"></span><h2>pipeline.hifv.heuristics.standard module<a class="headerlink" href="#module-pipeline.hifv.heuristics.standard" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.standard.Standard">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Standard</span></span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/standard.html#Standard"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.standard.Standard" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="pipeline.infrastructure.html#pipeline.infrastructure.api.Heuristic" title="pipeline.infrastructure.api.Heuristic"><code class="xref py py-class docutils literal notranslate"><span class="pre">Heuristic</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.standard.Standard.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/standard.html#Standard.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.standard.Standard.calculate" title="Link to this definition"></a></dt>
<dd><p>Make a calculation based on the given parameters.</p>
<p>This is an abstract method and must be implemented by all Heuristic
subclasses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The signature and return types of <code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate()</span></code>
are intended to be implementation specific. Refer to the
documentation of the implementing class for the appropriate
signature.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.standard.Standard.ephemeris_fields">
<span class="sig-name descname"><span class="pre">ephemeris_fields</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'Callisto',</span> <span class="pre">'Ceres',</span> <span class="pre">'Davida',</span> <span class="pre">'Europa',</span> <span class="pre">'Ganymede',</span> <span class="pre">'Io',</span> <span class="pre">'Juno',</span> <span class="pre">'Jupiter',</span> <span class="pre">'Mars',</span> <span class="pre">'Neptune',</span> <span class="pre">'Pallas',</span> <span class="pre">'Pluto',</span> <span class="pre">'Titan',</span> <span class="pre">'Triton',</span> <span class="pre">'Uranus',</span> <span class="pre">'Vesta',</span> <span class="pre">'Victoria'}</span></em><a class="headerlink" href="#pipeline.hifv.heuristics.standard.Standard.ephemeris_fields" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="pipeline-hifv-heuristics-standard-test-module">
<h2>pipeline.hifv.heuristics.standard_test module<a class="headerlink" href="#pipeline-hifv-heuristics-standard-test-module" title="Link to this heading"></a></h2>
</section>
<section id="module-pipeline.hifv.heuristics.uvrange">
<span id="pipeline-hifv-heuristics-uvrange-module"></span><h2>pipeline.hifv.heuristics.uvrange module<a class="headerlink" href="#module-pipeline.hifv.heuristics.uvrange" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.uvrange.uvrange">
<span class="sig-name descname"><span class="pre">uvrange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">setjy_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/uvrange.html#uvrange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.uvrange.uvrange" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>setjy_results</strong> – Flux domain object read in from the import stage</p></li>
<li><p><strong>field_id</strong> – integer field id</p></li>
<li><p><strong>spw_id</strong> – integer spw id, default is spw_id=2 for VLASS</p></li>
<li><p><strong>** However, currently it just picks the first index of zero</strong></p></li>
</ul>
</dd>
</dl>
<p>uvmin and uvmax are of type Decimal</p>
<p>Units are always assumed to be lambda</p>
<p>Returns: uvrange string</p>
</dd></dl>

</section>
<section id="pipeline-hifv-heuristics-uvrange-test-module">
<h2>pipeline.hifv.heuristics.uvrange_test module<a class="headerlink" href="#pipeline-hifv-heuristics-uvrange-test-module" title="Link to this heading"></a></h2>
</section>
<section id="module-pipeline.hifv.heuristics.vip_helper_functions">
<span id="pipeline-hifv-heuristics-vip-helper-functions-module"></span><h2>pipeline.hifv.heuristics.vip_helper_functions module<a class="headerlink" href="#module-pipeline.hifv.heuristics.vip_helper_functions" title="Link to this heading"></a></h2>
<p>VLASS-SE VIP script helper functions.</p>
<p>Unchanged functions can be found on the New Mexico nmpost cluster:
/home/vlass/packages/vip/mask-from-catalog/mask_from_catalog.py
/users/jmarvil/scripts/edit_pybdsf_islands.py
/users/jmarvil/scripts/run_bdsf.py</p>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vip_helper_functions.Timer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Timer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message='Run</span> <span class="pre">for</span> <span class="pre">{:.4f}</span> <span class="pre">seconds'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger=&lt;built-in</span> <span class="pre">function</span> <span class="pre">print&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vip_helper_functions.html#Timer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vip_helper_functions.Timer" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Contextualisable class for simple runtime measurement.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vip_helper_functions.Timer.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vip_helper_functions.html#Timer.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vip_helper_functions.Timer.start" title="Link to this definition"></a></dt>
<dd><p>Start timer.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vip_helper_functions.Timer.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vip_helper_functions.html#Timer.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vip_helper_functions.Timer.stop" title="Link to this definition"></a></dt>
<dd><p>Stop timer and return elapsed time.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vip_helper_functions.cat_to_ds9_rgn">
<span class="sig-name descname"><span class="pre">cat_to_ds9_rgn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">catalog_fits_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ds9.reg'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vip_helper_functions.html#cat_to_ds9_rgn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vip_helper_functions.cat_to_ds9_rgn" title="Link to this definition"></a></dt>
<dd><p>Write each component to a ds9 region</p>
<p>Copy of script located at:
/users/jmarvil/scripts/edit_pybdsf_islands.py</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vip_helper_functions.edit_pybdsf_islands">
<span class="sig-name descname"><span class="pre">edit_pybdsf_islands</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">catalog_fits_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r_squared_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.99</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_gauss_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gauss_size_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phasecenter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vip_helper_functions.html#edit_pybdsf_islands"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vip_helper_functions.edit_pybdsf_islands" title="Link to this definition"></a></dt>
<dd><p>Reject islands from a sky catalog based on simple heuristics.
Writes out a new catalog ending in ‘.edited.fits’
Also creates ds9 region files for accepted and rejected components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>catalog_fits_file</strong> – Path to a PyBDSF sky catalog in FITS format.</p></li>
<li><p><strong>r_squared_threshold</strong> – Upper limit of correlation coefficient.
Islands having components along a line are rejected.</p></li>
<li><p><strong>n_gauss_threshold</strong> – Maximum number of components per island.
Islands with more than this many components are rejected.</p></li>
<li><p><strong>gauss_size_threshold</strong> – Maximum component size in arcsec.
Islands with one or more component larger than this size are rejected.</p></li>
<li><p><strong>phasecenter</strong> – Phase center string of format: ‘J2000 13:33:35.814 +16.44.04.255’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>returns edited_catalog_fits_file, num_rejected_islands, num_rejected_islands_onedeg</p>
</dd>
</dl>
<p>Example 1:
sys.path.append(‘&lt;path-to-folder-containing-this-file&gt;’)
from edit_pybdsf_islands import edit_pybdsf_islands
edit_pybdsf_islands(…)</p>
<p>Example 2:
execfile(‘&lt;path-to-folder-containing-this-file&gt;/edit_pybdsf_islands.py’)
edit_pybdsf_islands(…)</p>
<p>Copy of script located at:
/users/jmarvil/scripts/edit_pybdsf_islands.py</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vip_helper_functions.mask_from_catalog">
<span class="sig-name descname"><span class="pre">mask_from_catalog</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'iter0.model.tt0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mask_from_cat.mask'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">catalog_fits_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/vlass/packages/VLASS1Q.fits'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">catalog_search_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cell</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phasecenter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">csys_rec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vip_helper_functions.html#mask_from_catalog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vip_helper_functions.mask_from_catalog" title="Link to this definition"></a></dt>
<dd><p>Construct a clean mask from a sky catalog and reference image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inext</strong> – A string to select the input image.  <a href="#id1"><span class="problematic" id="id2">*</span></a>inext should return a single CASA image.</p></li>
<li><p><strong>outext</strong> – A string to replace inext that will determine the filename of the output mask image.</p></li>
<li><p><strong>catalog_fits_file</strong> – Path to a PyBDSF sky catalog in FITS format.</p></li>
<li><p><strong>catalog_search_size</strong> – The half-width (in degrees) of the catalog search centered on the
image’s reference pixel.</p></li>
<li><p><strong>mask_shape</strong> – two element list of the image (mask) size</p></li>
<li><p><strong>frequency</strong> – string element and units ‘3.0GHz’</p></li>
<li><p><strong>cell</strong> – string cell size ‘2.0arcsec’</p></li>
<li><p><strong>phasecenter</strong> – Epoch leading string ‘J2000 13:33:35.814 +16.44.04.255’</p></li>
<li><p><strong>mask_name</strong> – string name of the mask to write out</p></li>
<li><p><strong>csys_rec</strong> – coordinate system record dictionary (optional)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>returns nothing</p>
</dd>
</dl>
<p>Example 1:
sys.path.append(‘&lt;path-to-folder-containing-this-file&gt;’)
from mask_from_catalog import mask_from_catalog
mask_from_catalog(…)</p>
<p>Example 2:
execfile(‘&lt;path-to-folder-containing-this-file&gt;/mask_from_catalog.py’)
mask_from_catalog(…)</p>
<p>Unchanged, CASA 5 compatible file is located at
/home/vlass/packages/vip/mask-from-catalog/mask_from_catalog.py</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vip_helper_functions.run_bdsf">
<span class="sig-name descname"><span class="pre">run_bdsf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vip_helper_functions.html#run_bdsf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vip_helper_functions.run_bdsf" title="Link to this definition"></a></dt>
<dd><p>Detect bright point sources and blobs on map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>infile</strong></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pipeline.hifv.heuristics.vlascanheuristics">
<span id="pipeline-hifv-heuristics-vlascanheuristics-module"></span><h2>pipeline.hifv.heuristics.vlascanheuristics module<a class="headerlink" href="#module-pipeline.hifv.heuristics.vlascanheuristics" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">VLAScanHeuristics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vlascanheuristics.html#VLAScanHeuristics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics.calibratorIntents">
<span class="sig-name descname"><span class="pre">calibratorIntents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vlascanheuristics.html#VLAScanHeuristics.calibratorIntents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics.calibratorIntents" title="Link to this definition"></a></dt>
<dd><p># Identify scans and fields associated with different calibrator intents</p>
<p># NB: the scan intent definitions changed in the OPT on Feb 21,
# 2012.  So test on date:
# Test Implementation: JSK April 11, 2016</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics.calibratorIntentsOld">
<span class="sig-name descname"><span class="pre">calibratorIntentsOld</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vlascanheuristics.html#VLAScanHeuristics.calibratorIntentsOld"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics.calibratorIntentsOld" title="Link to this definition"></a></dt>
<dd><p># Identify scans and fields associated with different calibrator intents</p>
<p># NB: the scan intent definitions changed in the OPT on Feb 21,
# 2012.  So test on date:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics.determine3C84">
<span class="sig-name descname"><span class="pre">determine3C84</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vlascanheuristics.html#VLAScanHeuristics.determine3C84"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics.determine3C84" title="Link to this definition"></a></dt>
<dd><p>#Determine if 3C84 was used as a bandpass or delay calibrator</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics.find_3C84">
<span class="sig-name descname"><span class="pre">find_3C84</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">positions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vlascanheuristics.html#VLAScanHeuristics.find_3C84"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics.find_3C84" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics.makescandict">
<span class="sig-name descname"><span class="pre">makescandict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vlascanheuristics.html#VLAScanHeuristics.makescandict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vlascanheuristics.VLAScanHeuristics.makescandict" title="Link to this definition"></a></dt>
<dd><p>Run Steve’s buildscans</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vlascanheuristics.buildscans">
<span class="sig-name descname"><span class="pre">buildscans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vlascanheuristics.html#buildscans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vlascanheuristics.buildscans" title="Link to this definition"></a></dt>
<dd><p>buildscans:  compile scan information for msfile</p>
<p>Created S.T. Myers 2012-05-07  v1.0
Updated S.T. Myers 2012-05-14  v1.1 add corrtype
Updated S.T. Myers 2012-06-27  v1.2 add corrdesc lookup
Updated S.T. Myers 2012-11-13  v2.0 STM casa 4.0 new calls</p>
<dl class="simple">
<dt>Usage:</dt><dd><p>from lib_EVLApipeutils import buildscans</p>
</dd>
</dl>
<p>Input:</p>
<blockquote>
<div><p>msfile   -   name of MS</p>
</div></blockquote>
<p>Output: scandict (return value)</p>
<p>Examples:</p>
<p>CASA &lt;2&gt;: from lib_EVLApipeutils import buildscans</p>
<p>CASA &lt;3&gt;: msfile = ‘TRSR0045_sb600507.55900.ms’</p>
<p>CASA &lt;4&gt;: myscans = buildscans(msfile)
Getting scansummary from MS
Found 16 DataDescription IDs
Found 4 StateIds
Found 3422 times in DD=0
Found 3422 times in DD=1
Found 3422 times in DD=2
Found 3422 times in DD=3
Found 3422 times in DD=4
Found 3422 times in DD=5
Found 3422 times in DD=6
Found 3422 times in DD=7
Found 3422 times in DD=8
Found 3422 times in DD=9
Found 3422 times in DD=10
Found 3422 times in DD=11
Found 3422 times in DD=12
Found 3422 times in DD=13
Found 3422 times in DD=14
Found 3422 times in DD=15
Found total 54752 times
Found 175 scans min=1 max=180
Size of scandict in memory is 248 bytes</p>
<dl class="simple">
<dt>CASA &lt;5&gt;: myscans[‘Scans’][1][‘intents’]</dt><dd><p>Out[5]: ‘CALIBRATE_AMPLI#UNSPECIFIED,UNSPECIFIED#UNSPECIFIED’</p>
</dd>
<dt>CASA &lt;6&gt;: myscans[‘Scans’][1][‘dd’]</dt><dd><p>Out[6]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]</p>
</dd>
<dt>CASA &lt;7&gt;: myscans[‘DataDescription’][0]</dt><dd><p>Out[7]:</p>
</dd>
</dl>
<p>{‘corrdesc’: [‘RR’, ‘RL’, ‘LR’’, ‘LL’],
‘corrtype’: [5, 6, 7, 8],
‘ipol’: 0,
‘nchan’: 64,
‘npol’: 4,
‘reffreq’: 994000000.0,
‘spw’: 0,
‘spwname’: ‘Subband:0’}</p>
<dl class="simple">
<dt>CASA &lt;8&gt;: myscans[‘Scans’][1][‘times’][0]</dt><dd><p>Out[8]:</p>
</dd>
</dl>
<p>[4829843281.500001,
4829843282.5,
4829843283.5,
4829843284.5,
…
4829843336.5]</p>
<p>The last of these returns the integration midpoints for scan 1 DD 0.</p>
<p>Note that to get spw and pol info you use the DD indexes from [‘dd’]
in the ‘Scans’ part to index into the ‘DataDescription’ info.</p>
<p>You can also list the keys available in the Scans sub-dictionary:</p>
<dl class="simple">
<dt>CASA &lt;9&gt;: myscans[‘Scans’][1].keys()</dt><dd><p>Out[9]:</p>
</dd>
</dl>
<p>[‘scan_mid’,
‘intents’,
‘field’,
‘dd’,
‘npol’,
‘rra’,
‘spw’,
‘scan_int’,
‘scan_start’,
‘times’,
‘scan_end’,
‘rdec’]</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hifv.heuristics.vlascanheuristics.testCalibratorIntents">
<span class="sig-name descname"><span class="pre">testCalibratorIntents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hifv/heuristics/vlascanheuristics.html#testCalibratorIntents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hifv.heuristics.vlascanheuristics.testCalibratorIntents" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-pipeline.hifv.heuristics">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pipeline.hifv.heuristics" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2024, Pipeline Dev. Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>