

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pipeline.hif.cli package &mdash; Pipeline unknown documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/custom_theme.css?v=678032d9" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=3f1b9271"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Pipeline
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Pipeline Tasks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline_tasks/pipeline_tasks.html">Pipeline Heuristics Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Task (sphinx-autosummary)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.h.cli.html">pipeline.h.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hif.cli.html">pipeline.hif.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hifa.cli.html">pipeline.hifa.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hifv.cli.html">pipeline.hifv.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hsd.cli.html">pipeline.hsd.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.hsdn.cli.html">pipeline.hsdn.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.domain.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.infrastructure.launcher.html">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.domain.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_autosummary/pipeline.infrastructure.launcher.html">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Heuristics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../heuristics/field_parameter.html">Field parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../heuristics/FlaggingTasks.html">Pipeline Flagging Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Releases etc.</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Pipeline Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modular.html">Run the Pipeline in a Conda environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dependencies.html">Dependencies of <cite>Pipeline</cite></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html#module-pipeline.infrastructure.launcher">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Task Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../task_classes.html">pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../task_classes.html#module-pipeline.hif.tasks">pipeline-l2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../task_classes.html#module-pipeline.hif">pipeline-l3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../task_classes.html#pipeline-diagram">pipeline-diagram</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/ways_to_run_the_pipeline.html">Ways to run the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/comparing_pipeline_executions.html">Comparing pipeline executions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/building_the_pipeline.html">Building the pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/ALMA-Imaging-Workflow.html">ALMA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLA-Imaging-Workflow.html">VLA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLASS-SE-CONT-Imaging-Workflow.html">VLASS-SE-CONT imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/VLASS-SE-CUBE-Imaging-Workflow.html">VLASS-SE-CUBE imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/selfcal_workflow.html">VLASS Selfcal &amp; Restore workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/pipeline_tests.html">Pipeline testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/DataType_Testing.html">DataType Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/QA_scores.html">Pipeline Quality Assurance (QA) Score Class Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/DeveloperDocumentation.html">Pipeline developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/python3_conversion_notes.html">Python 3 conversion notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/releases.html">Pipeline Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develdocmd/recipes.html">Pipeline Recipes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples Notes (from Jupyter Notebooks)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/test1.html">test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Notes (from .rst)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/test2.html">Example 1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pipeline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">pipeline.hif.cli package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_apidoc/pipeline.hif.cli.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pipeline-hif-cli-package">
<h1>pipeline.hif.cli package<a class="headerlink" href="#pipeline-hif-cli-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-pipeline.hif.cli.hif_analyzealpha">
<span id="pipeline-hif-cli-hif-analyzealpha-module"></span><h2>pipeline.hif.cli.hif_analyzealpha module<a class="headerlink" href="#module-pipeline.hif.cli.hif_analyzealpha" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_analyzealpha.hif_analyzealpha">
<span class="sig-name descname"><span class="pre">hif_analyzealpha</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alphafile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alphaerrorfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_analyzealpha.html#hif_analyzealpha"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_analyzealpha.hif_analyzealpha" title="Link to this definition"></a></dt>
<dd><p>hif_analyzealpha —- Extract spectral index from intensity peak in VLA/VLASS images</p>
<p>Extract spectral index from intensity peak in VLA/VLASS images</p>
<p>The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl class="simple">
<dt>vis            List of visisbility  data files. These may be ASDMs, tar files of ASDMs,</dt><dd><p>MSs, or tar files of MSs, If ASDM files are specified, they will be
converted  to MS format.
example: vis=[‘X227.ms’, ‘asdms.tar.gz’]</p>
</dd>
</dl>
<p>image          Restored subimage
alphafile      Input spectral index map
alphaerrorfile Input spectral index error map</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Basic analyzealpha task</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_analyzealpha</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_antpos">
<span id="pipeline-hif-cli-hif-antpos-module"></span><h2>pipeline.hif.cli.hif_antpos module<a class="headerlink" href="#module-pipeline.hif.cli.hif_antpos" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_antpos.hif_antpos">
<span class="sig-name descname"><span class="pre">hif_antpos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_antpos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antposfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_antpos.html#hif_antpos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_antpos.hif_antpos" title="Link to this definition"></a></dt>
<dd><p>hif_antpos —- Derive an antenna position calibration table</p>
<p>Derive the antenna position calibration for list of MeasurementSets.</p>
<p>The hif_antpos task corrects the antenna positions recorded in the ASDMs using
updated antenna position calibration information determined after the
observation was taken.</p>
<p>Corrections can be input by hand, read from a file on disk, or in the future
by querying an ALMA database service.</p>
<p>The antenna positions file is in ‘csv’ format containing 6 comma-delimited
columns as shown below. The default name of this file is ‘antennapos.csv’.</p>
<p>Contents of example ‘antennapos.csv’ file:</p>
<p>ms,antenna,xoffset,yoffset,zoffset,comment
uid___A002_X30a93d_X43e.ms,DV11,0.000,0.010,0.000,”No comment”
uid___A002_X30a93d_X43e.dup.ms,DV11,0.000,-0.010,0.000,”No comment”</p>
<p>The corrections are used to generate a calibration table which is recorded
in the pipeline context and applied to the raw visibility data, on the fly to
generate other calibration tables, or permanently to generate calibrated
visibilities for imaging.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl class="simple">
<dt>vis           List of input visibility files.</dt><dd><p>example: [‘ngc5921.ms’]</p>
</dd>
<dt>caltable      Name of output gain calibration tables.</dt><dd><p>example: [‘ngc5921.gcal’]</p>
</dd>
<dt>hm_antpos     Heuristics method for retrieving the antenna position</dt><dd><p>corrections. The options are ‘online’ (not yet implemented), ‘manual’,
and ‘file’.</p>
</dd>
<dt>antenna       The list of antennas for which the positions are to be corrected.</dt><dd><p>Available when hm_antpos=’manual’.
example: antenna=’DV05,DV07’</p>
</dd>
<dt>offsets       The list of antenna offsets for each antenna in ‘antennas’. Each</dt><dd><p>offset is a set of 3 floating point numbers separated by commas, specified
in the ITRF frame. Available when hm_antpos=’manual’.
example: offsets=[0.01, 0.02, 0.03, 0.03, 0.02, 0.01]</p>
</dd>
<dt>antposfile    The file(s) containing the antenna offsets. Used if hm_antpos</dt><dd><p>is ‘file’.
example: ‘antennapos.csv’</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<p>1. Correct the position of antenna 5 for all the visibility files in a single
pipeline run:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_antpos</span><span class="p">(</span><span class="n">antenna</span><span class="o">=</span><span class="s1">&#39;DV05&#39;</span><span class="p">,</span> <span class="n">offsets</span><span class="o">=</span><span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">])</span>
</pre></div>
</div>
<p>2. Correct the position of antennas for all the visibility files in a single
pipeline run using antenna positions files on disk. These files are assumed
to conform to a default naming scheme if <code class="docutils literal notranslate"><span class="pre">antposfile</span></code> is unspecified by the
user:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_antpos</span><span class="p">(</span><span class="n">hm_antpos</span><span class="o">=</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">antposfile</span><span class="o">=</span><span class="s1">&#39;myantposfile.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>——— issues ———————————————————–</p>
<p>The hm_antpos ‘online’ option will be implemented when the observing system
provides an antenna position determination service.</p>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_applycal">
<span id="pipeline-hif-cli-hif-applycal-module"></span><h2>pipeline.hif.cli.hif_applycal module<a class="headerlink" href="#module-pipeline.hif.cli.hif_applycal" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_applycal.hif_applycal">
<span class="sig-name descname"><span class="pre">hif_applycal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">applymode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calwt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagbackup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagsum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagdetailedsum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_applycal.html#hif_applycal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_applycal.hif_applycal" title="Link to this definition"></a></dt>
<dd><p>hif_applycal —- Apply the calibration(s) to the data</p>
<p>Apply precomputed calibrations to the data.</p>
<p>hif_applycal applies the precomputed calibration tables stored in the pipeline
context to the set of visibility files using predetermined field and
spectral window maps and default values for the interpolation schemes.</p>
<p>Users can interact with the pipeline calibration state using the tasks
h_export_calstate and h_import_calstate.</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned</p>
<p>——— parameter descriptions ———————————————</p>
<dl class="simple">
<dt>vis             The list of input MeasurementSets. Defaults to the list of MeasurementSets</dt><dd><p>in the pipeline context.
example: [‘X227.ms’]</p>
</dd>
<dt>field           A string containing the list of field names or field ids to which</dt><dd><p>the calibration will be applied. Defaults to all fields in the pipeline
context.
example: ‘3C279’, ‘3C279, M82’</p>
</dd>
<dt>intent          A string containing the list of intents against which the</dt><dd><p>selected fields will be matched. Defaults to all supported intents
in the pipeline context.
example: <cite>‘*TARGET*’</cite></p>
</dd>
<dt>spw             The list of spectral windows and channels to which the calibration</dt><dd><p>will be applied. Defaults to all science windows in the pipeline
context.
example: ‘17’, ‘11, 15’</p>
</dd>
<dt>antenna         The selection of antennas to which the calibration will be applied.</dt><dd><p>Defaults to all antennas. Not currently supported.</p>
</dd>
</dl>
<p>parang          Apply parallactic angle correction
applymode       Calibration apply mode</p>
<blockquote>
<div><p>‘calflag’: calibrate data and apply flags from solutions
‘calflagstrict’: (default) same as above except flag spws for which calibration is</p>
<blockquote>
<div><p>unavailable in one or more tables (instead of allowing them to pass
uncalibrated and unflagged)</p>
</div></blockquote>
<p>‘trial’: report on flags from solutions, dataset entirely unchanged
‘flagonly’: apply flags from solutions only, data not calibrated
‘flagonlystrict’: same as above except flag spws for which calibration is</p>
<blockquote>
<div><p>unavailable in one or more tables</p>
</div></blockquote>
<p>‘calonly’: calibrate data only, flags from solutions NOT applied</p>
</div></blockquote>
<p>calwt           Calibrate the weights as well as the data
flagbackup      Backup the flags before the apply
flagsum         Compute before and after flagging summary statistics
flagdetailedsum Compute detailed before and after flagging statistics summaries.</p>
<blockquote>
<div><p>Parameter available only when if flagsum is True.</p>
</div></blockquote>
<dl class="simple">
<dt>parallel        Execute using CASA HPC functionality, if available.</dt><dd><p>options: ‘automatic’, ‘true’, ‘false’, True, False
default: None (equivalent to False)</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Apply the calibration to the target data</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_applycal</span> <span class="p">(</span><span class="n">intent</span><span class="o">=</span><span class="s1">&#39;TARGET&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_bandpass">
<span id="pipeline-hif-cli-hif-bandpass-module"></span><h2>pipeline.hif.cli.hif_bandpass module<a class="headerlink" href="#module-pipeline.hif.cli.hif_bandpass" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_bandpass.hif_bandpass">
<span class="sig-name descname"><span class="pre">hif_bandpass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phaseup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phaseupsolint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phaseupbw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solnorm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minblperant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minsnr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_bandpass.html#hif_bandpass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_bandpass.hif_bandpass" title="Link to this definition"></a></dt>
<dd><p>hif_bandpass —- Compute bandpass calibration solutions</p>
<p>Compute amplitude and phase as a function of frequency for each spectral
window in each MeasurementSet.</p>
<p>Previous calibration can be applied on the fly.</p>
<p>hif_bandpass computes a bandpass solution for every specified science
spectral window. By default a ‘phaseup’ pre-calibration is performed
and applied on the fly to the data, before the bandpass is computed.</p>
<p>The hif_refant task may be used to precompute a prioritized list of
reference antennas.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>caltable      The list of output calibration tables. Defaults to the</dt><dd><p>standard pipeline naming convention.</p>
<p>Example: caltable=[‘M82.gcal’, ‘M82B.gcal’]</p>
</dd>
<dt>field         The list of field names or field ids for which bandpasses are</dt><dd><p>computed. Defaults to all fields.</p>
<p>Examples: field=’3C279’, field=’3C279, M82’</p>
</dd>
<dt>intent        A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched.  Defaults to all data
with bandpass intent.</p>
<p>Example: intent=’<cite>*PHASE*</cite>’</p>
</dd>
<dt>spw           The list of spectral windows and channels for which bandpasses</dt><dd><p>are computed. Defaults to all science spectral windows.</p>
<p>Example: spw=’11,13,15,17’</p>
</dd>
</dl>
<p>antenna       Set of data selection antenna IDs
phaseup       Do a phaseup on the data before computing the bandpass</p>
<blockquote>
<div><p>solution.</p>
</div></blockquote>
<dl>
<dt>phaseupsolint The phase correction solution interval in CASA syntax.</dt><dd><p>Used when phaseup is True.</p>
<p>Example: phaseupsolint=300</p>
</dd>
<dt>phaseupbw     Bandwidth to be used for phaseup. Defaults to 500MHz.</dt><dd><p>Used when phaseup is True.</p>
<dl class="simple">
<dt>Examples: phaseupbw=’’ to use entire bandpass</dt><dd><p>phaseupbw=’500MHz’ to use central 500MHz</p>
</dd>
</dl>
</dd>
</dl>
<p>solint        Time and channel solution intervals in CASA syntax.</p>
<blockquote>
<div><p>Examples: solint=’inf,10ch’, ‘inf’</p>
</div></blockquote>
<dl>
<dt>combine       Data axes to combine for solving. Axes are ‘’, ‘scan’, ‘spw’,</dt><dd><p>‘field’ or any comma-separated combination.</p>
<p>Example: combine=’scan,field’</p>
</dd>
<dt>refant        Reference antenna names. Defaults to the value(s) stored in</dt><dd><p>the pipeline context. If undefined in the pipeline context
defaults to the CASA reference antenna naming scheme.</p>
<p>Examples: refant=’DV01’, refant=’DV06,DV07’</p>
</dd>
</dl>
<p>solnorm       Normalise the bandpass solution
minblperant   Minimum number of baselines required per antenna for each</p>
<blockquote>
<div><p>solve. Antennas with fewer baselines are excluded from
solutions.</p>
</div></blockquote>
<p>minsnr        Reject solutions below this SNR</p>
<p>——— examples ———————————————————–</p>
<p>1. Compute a channel bandpass for all visibility files in the pipeline
context using the CASA reference antenna determination scheme:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_bandpass</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Same as the above but precompute a prioritized reference antenna list:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_refant</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hif_bandpass</span><span class="p">()</span>
</pre></div>
</div>
<p>——— issues ———————————————————–</p>
<p>The specified minsnr parameter is currently applied to the bandpass
solution computation but not the ‘phaseup’ computation. Some noisy
solutions in the phaseup may not be properly rejected.</p>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_checkproductsize">
<span id="pipeline-hif-cli-hif-checkproductsize-module"></span><h2>pipeline.hif.cli.hif_checkproductsize module<a class="headerlink" href="#module-pipeline.hif.cli.hif_checkproductsize" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_checkproductsize.hif_checkproductsize">
<span class="sig-name descname"><span class="pre">hif_checkproductsize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcubesize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcubelimit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxproductsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calcsb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_checkproductsize.html#hif_checkproductsize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_checkproductsize.hif_checkproductsize" title="Link to this definition"></a></dt>
<dd><p>hif_checkproductsize —- Check imaging product size</p>
<p>Check interferometry imaging product size and try to mitigate to maximum
allowed values. The task implements a mitigation cascade computing the largest
cube size and tries to reduce it below a given limit by adjusting the <code class="docutils literal notranslate"><span class="pre">nbins</span></code>,
<code class="docutils literal notranslate"><span class="pre">hm_imsize</span></code> and <code class="docutils literal notranslate"><span class="pre">hm_cell</span></code> parameters. If this step succeeds, it also checks the
overall imaging product size and if necessary reduces the number of fields to
be imaged.</p>
<p>Alternatively, if <code class="docutils literal notranslate"><span class="pre">maximsize</span></code> is set, the image product pixel count is
mitigated by trying to adjust <code class="docutils literal notranslate"><span class="pre">hm_cell</span></code> parameter. If the pixel count is still
greater than <code class="docutils literal notranslate"><span class="pre">maximsize</span></code> at <code class="docutils literal notranslate"><span class="pre">hm_cell</span></code> of 4ppb, then this value is kept and
the image field is truncated around the phase center by forcing <code class="docutils literal notranslate"><span class="pre">hm_imsize</span></code>
= <code class="docutils literal notranslate"><span class="pre">maximsize</span></code>.</p>
<p>Note that mitigation for image pixel count and for the product size currently
are mutually exclusive, with maximsize taking precedence if set.</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis            The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>maxcubesize    Maximum allowed cube size in gigabytes (mitigation goal)</dt><dd><p>-1: automatic from performance parameters</p>
</dd>
<dt>maxcubelimit   Maximum allowed cube limit in gigabytes (mitigation failure</dt><dd><p>limit)
-1: automatic from performance parameters</p>
</dd>
<dt>maxproductsize Maximum allowed product size in gigabytes (mitigation goal and</dt><dd><p>failure limit)
-1: automatic from performance parameters</p>
</dd>
<dt>maximsize      Maximum allowed image count size (mitigation goal and hard</dt><dd><p>maximum).
Parameter <code class="docutils literal notranslate"><span class="pre">maximsize</span></code> must be even and divisible by 2,3,5,7 only.
Note that <code class="docutils literal notranslate"><span class="pre">maximsize</span></code> is disabled by default and cannot be set at
the same time as <code class="docutils literal notranslate"><span class="pre">maxcubesize</span></code>, <code class="docutils literal notranslate"><span class="pre">maxcubelimit</span></code> and <code class="docutils literal notranslate"><span class="pre">maxproductsize</span></code>!
-1: disables mitigation for this parameter</p>
</dd>
</dl>
<p>calcsb         Force (re-)calculation of sensitivities and beams
parallel       Use MPI cluster where possible</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Basic call to check the product sizes using internal defaults</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_checkproductsize</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Typical ALMA call</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_checkproductsize</span><span class="p">(</span><span class="n">maxcubesize</span><span class="o">=</span><span class="mf">40.0</span><span class="p">,</span> <span class="n">maxcubelimit</span><span class="o">=</span><span class="mf">60.0</span><span class="p">,</span> <span class="n">maxproductsize</span><span class="o">=</span><span class="mf">350.0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_correctedampflag">
<span id="pipeline-hif-cli-hif-correctedampflag-module"></span><h2>pipeline.hif.cli.hif_correctedampflag module<a class="headerlink" href="#module-pipeline.hif.cli.hif_correctedampflag" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_correctedampflag.hif_correctedampflag">
<span class="sig-name descname"><span class="pre">hif_correctedampflag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antnegsig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antpossig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmantint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmbl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antblnegsig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antblpossig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relaxed_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">niter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_correctedampflag.html#hif_correctedampflag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_correctedampflag.hif_correctedampflag" title="Link to this definition"></a></dt>
<dd><p>hif_correctedampflag —- Flag corrected - model amplitudes based on calibrators.</p>
<p>Flag corrected - model amplitudes based on calibrators.</p>
<p>This task computes the flagging heuristics on a calibrator by calling hif_correctedampflag
which looks for outlier visibility points by statistically examining the scalar
difference of corrected amplitudes minus model amplitudes, and flags those outliers.
The philosophy is that only outlier data points that have remained outliers after
calibration will be flagged. The heuristic works equally well on resolved calibrators
and point sources because it is not performing a vector difference, and thus is not
sensitive to nulls in the flux density vs. uvdistance domain. Note that the phase of
the data is not assessed.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis            The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>intent         A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched. If undefined (default),
it will select all data with the BANDPASS intent.</p>
<p>Example: intent=’<cite>*PHASE*</cite>’</p>
</dd>
<dt>field          The list of field names or field ids for which bandpasses are</dt><dd><p>computed. If undefined (default), it will select all fields.</p>
<p>Examples: field=’3C279’, ‘3C279, M82’</p>
</dd>
<dt>spw            The list of spectral windows and channels for which bandpasses</dt><dd><p>are computed. If undefined (default), it will select all
science spectral windows.</p>
<p>Example: spw=’11,13,15,17’</p>
</dd>
</dl>
<p>antnegsig      Lower sigma threshold for identifying outliers as a result of bad antennas within individual timestamps
antpossig      Upper sigma threshold for identifying outliers as a result of bad antennas within individual timestamps
tmantint       Threshold for maximum fraction of timestamps that are allowed to contain outliers
tmint          Initial threshold for maximum fraction of “outlier timestamps” over “total timestamps” that a baseline may be a part of
tmbl           Initial threshold for maximum fraction of “bad baselines” over “all timestamps” that an antenna may be a part of
antblnegsig    Lower sigma threshold for identifying outliers as a result of “bad baselines” and/or “bad antennas” within baselines (across all timestamps)
antblpossig    Upper sigma threshold for identifying outliers as a result of “bad baselines” and/or “bad antennas” within baselines (across all timestamps)
relaxed_factor Relaxed value to set the threshold scaling factor to under certain conditions (see task description)
niter          Maximum number of times to iterate on evaluation of flagging</p>
<blockquote>
<div><p>heuristics. If an iteration results in no new flags, then
subsequent iterations are skipped.</p>
</div></blockquote>
<p>——— examples ———————————————————–</p>
<p>Run default flagging on bandpass calibrator with recommended settings:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_correctedampflag</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_editimlist">
<span id="pipeline-hif-cli-hif-editimlist-module"></span><h2>pipeline.hif.cli.hif_editimlist module<a class="headerlink" href="#module-pipeline.hif.cli.hif_editimlist" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_editimlist.hif_editimlist">
<span class="sig-name descname"><span class="pre">hif_editimlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imagename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_radius_arcsec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cell</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfcache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conjbeams</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cyclefactor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cycleniter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nmajor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datatype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datacolumn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deconvolver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">editmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imaging_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gridder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pbmask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nchan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">niter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nterms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pblimit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phasecenter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reffreq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restfreq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">robust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scales</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">specmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stokes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensitivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uvtaper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uvrange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vlass_plane_reject_ms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_editimlist.html#hif_editimlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_editimlist.hif_editimlist" title="Link to this definition"></a></dt>
<dd><p>hif_editimlist —- Add to a list of images to be produced with hif_makeimages()</p>
<p>Add to a list of images to be produced with hif_makeimages(), which uses hif_tclean() to invoke CASA tclean.
Many of the hif_editimlist() inputs map directly to tclean parameters.</p>
<p>The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<p>imagename              Prefix for output image names.
search_radius_arcsec   Size of the field finding beam search radius in arcsec.
cell                   Image X and Y cell size(s) with units or pixels per beam.</p>
<blockquote>
<div><p>Single value same for both. ‘&lt;number&gt;ppb’ for pixels per beam.
Compute cell size based on the UV coverage of all the fields
to be imaged and use a 5 pix per beam sampling.
The pix per beam specification uses the above default cell size
(‘5ppb’) and scales it accordingly.
example: [‘0.5arcsec’, ‘0.5arcsec’] ‘3ppb’</p>
</div></blockquote>
<p>cfcache                Convolution function cache directory name
conjbeams              Use conjugate frequency in tclean for wideband A-terms.
cyclefactor            Controls the depth of clean in minor cycles based on PSF.
cycleniter             Controls max number of minor cycle iterations in a single major cycle.
nmajor                 Controls the maximum number of major cycles to evaluate.
datatype               Data type(s) to image. The default ‘’ selects the best</p>
<blockquote>
<div><p>available data type (e.g. selfcal over regcal) with
an automatic fallback to the next available data type.
With the <code class="docutils literal notranslate"><span class="pre">datatype</span></code> parameter of ‘regcal’ or ‘selfcal’, one
can force the use of only given data type(s).
Note that this parameter is only for non-VLASS data when the datacolumn
is not explictly set by user or imaging heuristics.</p>
</div></blockquote>
<p>datacolumn             Data column to image; this will take precedence over the datatype parameter.
deconvolver            Minor cycle algorithm (multiscale or mtmfs)
editmode               The edit mode of the task (‘add’ or ‘replace’). Defaults to ‘add’.
field                  Set of data selection field names or ids.
imaging_mode           Identity of product type (e.g. VLASS quick look) desired.  This will determine the heuristics used.
imsize                 Image X and Y size(s) in pixels or PB level (single fields), ‘’ for default. Single value same for both. ‘&lt;number&gt;pb’ for PB level.
intent                 Set of data selection intents
gridder                Name of the gridder to use with tclean
mask                   Used to declare whether to use a predefined mask for tclean.
pbmask                 Used to declare primary beam gain level for cleaning with primary beam mask (usemask=’pb’), used only for VLASS-SE-CONT imaging mode.
nbin                   Channel binning factor.
nchan                  Number of channels, -1 = all
niter                  The max total number of minor cycle iterations allowed for tclean
nterms                 Number of Taylor coefficients in the spectral model
parameter_file         keyword=value text file as alternative method of input parameters
pblimit                PB gain level at which to cut off normalizations
phasecenter            The default phase center is set to the mean of the field</p>
<blockquote>
<div><p>directions of all fields that are to be image together.
example: 0, ‘J2000 19h30m00 -40d00m00’</p>
</div></blockquote>
<p>reffreq                Reference frequency of the output image coordinate system
restfreq               List of rest frequencies or a rest frequency in a string for output image.
robust                 Briggs robustness parameter for tclean
scales                 The scales for multi-scale imaging.
specmode               Spectral gridding type (mfs, cont, cube, ‘’ for default)
spw                    Set of data selection spectral window/channels, ‘’ for all
start                  First channel for frequency mode images.</p>
<blockquote>
<div><p>Starts at first input channel of the spw.
example: ‘22.3GHz’</p>
</div></blockquote>
<p>stokes                 Stokes Planes to make
sensitivity            Theoretical sensitivity (override internal calculation)
threshold              Stopping threshold (number in units of Jy, or string)
nsigma                 Multiplicative factor for rms-based threshold stopping
uvtaper                Used to set a uv-taper during clean.
uvrange                Set of data selection uv ranges, ‘’ for all.
width                  Channel width
vlass_plane_reject_ms  Only used for the ‘VLASS-SE-CUBE’ imaging mode. default: True</p>
<blockquote>
<div><p>If True, reject VLASS Coarse Cube planes with high flagging percentages (see the heuristics details below)
If False, do not perform flagging-based VLASS Coarse Cube plane rejection.
If the input value is a dictionary, the plane rejection heuristics will be performed with custom thresholds.
The optional keys are:
- exclude_spw, default: ‘’</p>
<blockquote>
<div><p>Spectral windows to be excluded from the VLASS Coarse Cube plane rejection consideration, i.e. always preserve.</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>flagpct_thresh, default: 0.9</dt><dd><p>Flagging percentage threshold per field for the plane rejection.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nfield_thresh: default: 12</dt><dd><p>A minimal number of fields above the flagging percentage threshold is required for the plane rejection.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>——— examples ———————————————————–</p>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_findcont">
<span id="pipeline-hif-cli-hif-findcont-module"></span><h2>pipeline.hif.cli.hif_findcont module<a class="headerlink" href="#module-pipeline.hif.cli.hif_findcont" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_findcont.hif_findcont">
<span class="sig-name descname"><span class="pre">hif_findcont</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_mosweight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_perchanweightdensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_weighting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datacolumn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_findcont.html#hif_findcont"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_findcont.hif_findcont" title="Link to this definition"></a></dt>
<dd><p>hif_findcont —- Find continuum frequency ranges</p>
<p>Find continuum frequency ranges for a list of specified targets.</p>
<p>If the cont.dat file is not already present in the working directory, then dirty image
cubes are created for each spectral window of each science target at the native channel
resolution unless the <code class="docutils literal notranslate"><span class="pre">nbins</span></code> parameter was used in the preceding hif_makeimlist stage.
Robust=1 Briggs weighting is used for optimal line sensitivity, even if a different
robust had been chosen in hifa_imageprecheck to match the PI requested angular resolution.
Using moment0 and moment8 images of each cube, SNR-based masks are created, and the mean
spectrum of the joint mask is computed and evaluated with extensive heuristics to find the
channel ranges that are likely to be free of line emission.  Warnings are generated if
the channel ranges contain a small fraction of the bandwidth, or sample only a limited
extent of the spectrum.</p>
<p>If the cont.dat file already exists in the working directory before this task is executed,
then it will first examine the contents. For any spw that already has frequency ranges
defined in this file, it will not perform the analysis described above in favor of the
a priori ranges. For spws not listed in a pre-existing file, it will analyze them as
normal and update the file. In either case, the cont.dat file is used by the subsequent
hif_uvcontsub and hif_makeimages stages.</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis                     The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
</dl>
<p>target_list             Dictionary specifying targets to be imaged; blank will read list from context
hm_mosweight            Mosaic weighting</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<p>hm_perchanweightdensity Calculate the weight density for each channel independently</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<p>hm_weighting            Weighting scheme (natural,uniform,briggs,briggsabs[experimental],briggsbwtaper[experimental])
datacolumn              Data column to image. Only to be used for manual overriding</p>
<blockquote>
<div><p>when the automatic choice by data type is not appropriate.</p>
</div></blockquote>
<p>parallel                Use MPI cluster where possible</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Perform continuum frequency range detection for all science targets and spws:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_findcont</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_gaincal">
<span id="pipeline-hif-cli-hif-gaincal-module"></span><h2>pipeline.hif.cli.hif_gaincal module<a class="headerlink" href="#module-pipeline.hif.cli.hif_gaincal" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_gaincal.hif_gaincal">
<span class="sig-name descname"><span class="pre">hif_gaincal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_gaintype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refantmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solnorm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minblperant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minsnr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smodel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">splinetime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npointaver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phasewrap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_gaincal.html#hif_gaincal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_gaincal.hif_gaincal" title="Link to this definition"></a></dt>
<dd><p>hif_gaincal —- Determine temporal gains from calibrator observations</p>
<p>The complex gains are derived from the data column (raw data) divided by the
model column (usually set with hif_setjy). The gains are obtained for a
specified solution interval, spw combination and field combination.</p>
<p>Good candidate reference antennas can be determined using the hif_refant
task.</p>
<p>Previous calibrations that have been stored in the pipeline context are
applied on the fly. Users can interact with these calibrations via the
h_export_calstate and h_import_calstate tasks.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>caltable      The list of output calibration tables. Defaults to the</dt><dd><p>standard pipeline naming convention.</p>
<p>Example: caltable=[‘M82.gcal’, ‘M82B.gcal’]</p>
</dd>
<dt>field         The list of field names or field ids for which gain solutions</dt><dd><p>are to be computed. Defaults to all fields with the standard
intent.</p>
<p>Example: field=’3C279’, field=’3C279, M82’</p>
</dd>
<dt>intent        A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched. Defaults to <cite>*PHASE*</cite>.</p>
<p>Examples: intent=’’, intent=’<cite>*AMP*,*PHASE*</cite>’</p>
</dd>
<dt>spw           The list of spectral windows and channels for which gain</dt><dd><p>solutions are computed. Defaults to all science spectral
windows.</p>
<p>Examples: spw=’21’, spw=’21, 23’</p>
</dd>
</dl>
<p>antenna       Set of data selection antenna ids
hm_gaintype   The type of gain calibration. The options are ‘gtype’ and</p>
<blockquote>
<div><p>‘gspline’ for CASA gain types = ‘G’ and ‘GSPLINE’ respectively.</p>
</div></blockquote>
<dl>
<dt>calmode       Type of solution. The options are ‘ap’ (amp and phase), ‘p’</dt><dd><p>(phase only) and ‘a’ (amp only).</p>
<p>Examples: calmode=’p’, calmode=’a’, calmode=’ap’</p>
</dd>
<dt>solint        Time solution intervals in CASA syntax. Works for</dt><dd><p>hm_gaintype=’gtype’ only.</p>
<p>Examples: solint=’inf’, solint=’int’, solint=’100sec’</p>
</dd>
<dt>combine       Data axes to combine for solving. Options are  ‘’, ‘scan’,</dt><dd><p>‘spw’, ‘field’ or any comma-separated combination. Works for
hm_gaintype=’gtype’ only.</p>
</dd>
<dt>refant        Reference antenna name(s) in priority order. Defaults to most</dt><dd><p>recent values set in the pipeline context. If no reference
antenna is defined in the pipeline context use the CASA
defaults.</p>
<p>Examples: refant=’DV01’, refant=’DV05,DV07’</p>
</dd>
<dt>refantmode    Controls how the refant is applied. Currently available</dt><dd><p>choices are ‘flex’, ‘strict’, and the default value of ‘’.
Setting to ‘’ allows the pipeline to select the appropriate
mode based on the state of the reference antenna list.</p>
<p>Examples: refantmode=’strict’, refantmode=’’</p>
</dd>
</dl>
<p>solnorm       Normalize average solution amplitudes to 1.0
minblperant   Minimum number of baselines required per antenna for each</p>
<blockquote>
<div><p>solve. Antennas with fewer baselines are excluded from
solutions. Works for hm_gaintype=’gtype’ only.</p>
</div></blockquote>
<dl>
<dt>minsnr        Solutions below this SNR are rejected. Works for</dt><dd><p>hm_gaintype=’channel’ only.</p>
</dd>
<dt>smodel        Point source Stokes parameters for source model (experimental).</dt><dd><p>Defaults to using standard MODEL_DATA column data.</p>
<p>Example: smodel=[1,0,0,0]  - (I=1, unpolarized)</p>
</dd>
<dt>splinetime    Spline timescale (sec). Used for hm_gaintype=’gspline’.</dt><dd><p>Typical splinetime should cover about 3 to 5 calibrator scans.</p>
</dd>
<dt>npointaver    Tune phase-unwrapping algorithm. Used for</dt><dd><p>hm_gaintype=’gspline’. Keep at default value.</p>
</dd>
<dt>phasewrap     Wrap the phase for changes larger than this amount (degrees).</dt><dd><p>Used for hm_gaintype=’gspline’. Keep at default value.</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<p>Compute standard per scan gain solutions that will be used to calibrate
the target:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_gaincal</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_lowgainflag">
<span id="pipeline-hif-cli-hif-lowgainflag-module"></span><h2>pipeline.hif.cli.hif_lowgainflag module<a class="headerlink" href="#module-pipeline.hif.cli.hif_lowgainflag" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_lowgainflag.hif_lowgainflag">
<span class="sig-name descname"><span class="pre">hif_lowgainflag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_nmedian</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fnm_lo_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fnm_hi_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmef1_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_lowgainflag.html#hif_lowgainflag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_lowgainflag.hif_lowgainflag" title="Link to this definition"></a></dt>
<dd><p>hif_lowgainflag —- Flag antennas with low or high gain</p>
<p>Deviant antennas are detected by outlier analysis of a view showing their
amplitude gains, pre-applying a temporary bandpass and phase solution.
This view is a list of 2D images with axes ‘Scan’ and ‘Antenna’; there
is one image for each spectral window and intent. A flagcmd to flag all data
for an antenna will be generated by any gain that is outside the range
[fnm_lo_limit * median, fnm_hi_limit * median].</p>
<p>Output:</p>
<blockquote>
<div><p>results – The results object for the pipeline task is returned.</p>
</div></blockquote>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis</dt><dd><p>The list of input MeasurementSets. Defaults to the list of
MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>intent</dt><dd><p>A string containing the list of intents to be checked for
antennas with deviant gains. The default is blank, which
causes the task to select the ‘BANDPASS’ intent.</p>
</dd>
<dt>spw</dt><dd><p>The list of spectral windows and channels to which the
calibration will be applied. Defaults to all science windows
in the pipeline context.</p>
<p>Examples: spw=’17’, spw=’11, 15’</p>
</dd>
<dt>refant</dt><dd><p>A string containing a prioritized list of reference antenna
name(s) to be used to produce the gain table. Defaults to the
value(s) stored in the pipeline context. If undefined in the
pipeline context defaults to the CASA reference antenna naming
scheme.</p>
<p>Examples: refant=’DV01’, refant=’DV06,DV07’</p>
</dd>
<dt>flag_nmedian</dt><dd><p>Whether to flag figures of merit greater than
<code class="docutils literal notranslate"><span class="pre">fnm_hi_limit</span></code> * median or lower than <code class="docutils literal notranslate"><span class="pre">fnm_lo_limit</span></code> * median.
(default: True)</p>
</dd>
<dt>fnm_lo_limit</dt><dd><p>Flag values lower than <code class="docutils literal notranslate"><span class="pre">fnm_lo_limit</span></code> * median (default: 0.5)</p>
</dd>
<dt>fnm_hi_limit</dt><dd><p>Flag values higher than <code class="docutils literal notranslate"><span class="pre">fnm_hi_limit</span></code> * median (default: 1.5)</p>
</dd>
<dt>niter</dt><dd><p>The maximum number of iterations to run of the sequence:
solve for amplitude gains, assess statistics, flag spw/antenna
combinations that are outliers (default: 2)</p>
</dd>
<dt>tmef1_limit</dt><dd><p>Threshold for “too many entirely flagged” -
the critical fraction of antennas whose solutions are entirely
flagged in the flagging view of a spw for this stage:
if the fraction is equal or greater than this value, then flag
the visibility data from all antennas in this spw
(default: 0.666)</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Flag antennas with low or high gain using recommended thresholds:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_lowgainflag</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_makecutoutimages">
<span id="pipeline-hif-cli-hif-makecutoutimages-module"></span><h2>pipeline.hif.cli.hif_makecutoutimages module<a class="headerlink" href="#module-pipeline.hif.cli.hif_makecutoutimages" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_makecutoutimages.hif_makecutoutimages">
<span class="sig-name descname"><span class="pre">hif_makecutoutimages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsetblc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsettrc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_makecutoutimages.html#hif_makecutoutimages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_makecutoutimages.hif_makecutoutimages" title="Link to this definition"></a></dt>
<dd><p>hif_makecutoutimages —- Cutout central 1 sq. degree from VLASS QL, SE, and Coarse Cube images</p>
<p>Cutout central 1 sq. degree from VLASS QL, SE, and Coarse Cube images</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           List of visibility data files.</dt><dd><p>These may be ASDMs, tar files of ASDMs, MSs,
or tar files of MSs.
If ASDM files are specified, they will be converted to
MS format.</p>
<p>example: vis=[‘X227.ms’, ‘asdms.tar.gz’]</p>
</dd>
<dt>offsetblc     -x and -y offsets to the bottom lower corner (blc)</dt><dd><p>in arcseconds</p>
</dd>
<dt>offsettrc     +x and +y offsets to the top right corner (trc)</dt><dd><p>in arcseconds</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Basic makecutoutimages task</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makecutoutimages</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_makeimages">
<span id="pipeline-hif-cli-hif-makeimages-module"></span><h2>pipeline.hif.cli.hif_makeimages module<a class="headerlink" href="#module-pipeline.hif.cli.hif_makeimages" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_makeimages.hif_makeimages">
<span class="sig-name descname"><span class="pre">hif_makeimages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_masking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_sidelobethreshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_noisethreshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_lownoisethreshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_negativethreshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_minbeamfrac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_growiterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_dogrowprune</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_minpercentchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_fastnoise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_nsigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_perchanweightdensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_npixels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_cyclefactor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_minpsffraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_maxpsffraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_weighting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_cleaning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tlimit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drcorrect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masklimit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cleancontranges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calcsb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_mosweight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_on_export</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vlass_plane_reject_im</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_makeimages.html#hif_makeimages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_makeimages.hif_makeimages" title="Link to this definition"></a></dt>
<dd><p>hif_makeimages —- Compute clean map</p>
<p>Compute clean results from a list of specified targets.</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis                     The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
</dl>
<p>target_list             Dictionary specifying targets to be imaged; blank will read list from context
hm_masking              Clean masking mode. Options are ‘centralregion’, ‘auto’,</p>
<blockquote>
<div><p>‘manual’ and ‘none’</p>
</div></blockquote>
<p>hm_sidelobethreshold    sidelobethreshold * the max sidelobe level
hm_noisethreshold       noisethreshold * rms in residual image
hm_lownoisethreshold    lownoisethreshold * rms in residual image
hm_negativethreshold    negativethreshold * rms in residual image
hm_minbeamfrac          Minimum beam fraction for pruning
hm_growiterations       Number of binary dilation iterations for growing the mask
hm_dogrowprune          Do pruning on the grow mask</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<p>hm_minpercentchange     Mask size change threshold
hm_fastnoise            Faster noise calculation for automask or nsigma stopping</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<p>hm_nsigma               Multiplicative factor for rms-based threshold stopping
hm_perchanweightdensity Calculate the weight density for each channel independently</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<p>hm_npixels              Number of pixels to determine uv-cell size for super-uniform weighting
hm_cyclefactor          Scaling on PSF sidelobe level to compute the minor-cycle stopping threshold
hm_minpsffraction       PSF fraction that marks the max depth of cleaning in the minor cycle
hm_maxpsffraction       PSF fraction that marks the minimum depth of cleaning in the minor cycle
hm_weighting            Weighting scheme (natural,uniform,briggs,briggsabs[experimental],briggsbwtaper[experimental])
hm_cleaning             Pipeline cleaning mode
tlimit                  Times the sensitivity limit for cleaning
drcorrect               Override the default heuristics-based DR correction (for ALMA data only)
masklimit               Times good mask pixels for cleaning
cleancontranges         Clean continuum frequency ranges in cubes
calcsb                  Force (re-)calculation of sensitivities and beams
hm_mosweight            Mosaic weighting</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<dl>
<dt>overwrite_on_export     Replace existing image products when h/hifa/hifv_exportdata is</dt><dd><p>called.
If False, images that would have the same FITS name on export,
are amended to include a version number.  For example, if
oussid.J1248-4559_ph.spw21.mfs.I.pbcor.fits would already be
exported by a previous call to hif_makeimags, then
‘oussid.J1248-4559_ph.spw21.mfs.I.pbcor.v2.fits’ would also be
exported to the products/ directory. The first exported
product retains the same name.  Additional products start
counting with ‘v2’, ‘v3’, etc.</p>
</dd>
<dt>vlass_plane_reject_im   Only used for the ‘VLASS-SE-CUBE’ imaging mode. default: True</dt><dd><p>If True, reject VLASS Coarse Cube planes with high flagging percentages or outlier beam sizes (see the heuristics details below)
If False, do not perform the post-imaging VLASS Coarse Cube plane rejection.
If the input value is a dictionary, the plane rejection heuristics will be performed with custom thresholds.
The optional keys could be:
- exclude_spw, default: ‘’</p>
<blockquote>
<div><p>Spectral windows to be excluded from the VLASS Coarse Cube post-imaging plane rejection consideration, i.e. always preserve.</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>flagpct_thresh, default: 0.8</dt><dd><p>The flagging percentage across the entire mosaic to be considered to be high flagging level for the plane rejection.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>beamdev_thresh: default: 0.2</dt><dd><p>Threshold for the fractional beam deviation from the expected value required for the plane rejection.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>parallel                Clean images using MPI cluster</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Compute clean results for all imaging targets defined in a previous hif_makeimlist or hif_editimlist call:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makeimages</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Compute clean results overriding automatic masking choice:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makeimages</span><span class="p">(</span><span class="n">hm_masking</span><span class="o">=</span><span class="s1">&#39;centralregion&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_makeimlist">
<span id="pipeline-hif-cli-hif-makeimlist-module"></span><h2>pipeline.hif.cli.hif_makeimlist module<a class="headerlink" href="#module-pipeline.hif.cli.hif_makeimlist" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_makeimlist.hif_makeimlist">
<span class="sig-name descname"><span class="pre">hif_makeimlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imagename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linesfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uvrange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">specmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outframe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_imsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_cell</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calmaxpix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phasecenter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nchan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">robust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uvtaper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clearlist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_eb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calcsb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datatype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datacolumn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_makeimlist.html#hif_makeimlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_makeimlist.hif_makeimlist" title="Link to this definition"></a></dt>
<dd><p>hif_makeimlist —- Compute list of clean images to be produced</p>
<p>Generate a list of images to be cleaned. By default, the list will include
one image per science target per spw. Calibrator targets can be selected
by setting appropriate values for <code class="docutils literal notranslate"><span class="pre">intent</span></code>.</p>
<p>By default, the output image cell size is set to the minimum cell size
consistent with the UV coverage.</p>
<p>By default, the image size in pixels is set to values determined by the
cell size and the primary beam size. If a calibrator is being
imaged (intents ‘PHASE’, ‘BANDPASS’, ‘FLUX’ or ‘AMPLITUDE’) then the
image dimensions are limited to ‘calmaxpix’ pixels.</p>
<p>By default, science target images are cubes and calibrator target images
are mfs. Science target images may be mosaics or single fields.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
“”: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
</dl>
<p>imagename     Prefix for output image names, “” for automatic.
intent        Select intents for which associated fields will be imaged.</p>
<blockquote>
<div><p>Possible choices are PHASE, BANDPASS, AMPLITUDE, CHECK and
TARGET or combinations thereof.</p>
<p>Examples: ‘PHASE,BANDPASS’, ‘TARGET’</p>
</div></blockquote>
<dl class="simple">
<dt>field         Select fields to image. Use field name(s) NOT id(s). Mosaics</dt><dd><p>are assumed to have common source / field names.  If intent is
specified only fields with data matching the intent will be
selected. The fields will be selected from MeasurementSets in
“vis”.
“” Fields matching intent, one image per target source.</p>
</dd>
<dt>spw           Select spectral windows to image.</dt><dd><p>“”: Images will be computed for all science spectral windows.</p>
</dd>
</dl>
<p>contfile      Name of file with frequency ranges to use for continuum images.
linesfile     Name of file with line frequency ranges to exclude for continuum images.
uvrange       Select a set of uv ranges to image.</p>
<blockquote>
<div><p>“”: All uv data is included</p>
<p>Examples: ‘0~1000klambda’, [‘0~100klambda’, 100~1000klambda]</p>
</div></blockquote>
<dl>
<dt>specmode      Frequency imaging mode, ‘mfs’, ‘cont’, ‘cube’, ‘repBW’. ‘’</dt><dd><p>defaults to ‘cube’ if <code class="docutils literal notranslate"><span class="pre">intent</span></code> parameter includes ‘TARGET’
otherwise ‘mfs’.</p>
<p>specmode=’mfs’ produce one image per source and spw
specmode=’cont’ produce one image per source and aggregate</p>
<blockquote>
<div><p>over all specified spws</p>
</div></blockquote>
<dl class="simple">
<dt>specmode=’cube’ produce an LSRK frequency cube, channels are</dt><dd><p>specified in frequency</p>
</dd>
<dt>specmode=’repBW’ produce an LSRK frequency cube at</dt><dd><p>representative channel width</p>
</dd>
</dl>
</dd>
<dt>outframe      velocity frame of output image (LSRK, ‘’ for automatic)</dt><dd><p>(not implemented)</p>
</dd>
<dt>hm_imsize     Image X and Y size in pixels or PB level for single fields.</dt><dd><p>The explicit sizes must be even and divisible by 2,3,5,7 only.
The default values are derived as follows:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Determine phase center and spread of field centers
around it.</p></li>
<li><p>Set the size of the image to cover the spread of field
centers plus a border of width 0.75 * beam radius, to
first null.</p></li>
<li><p>Divide X and Y extents by cell size to arrive at the
number of pixels required.</p></li>
</ol>
</div></blockquote>
<p>The PB level setting for single fields leads to an imsize
extending to the specified level plus 5% padding in all
directions.</p>
<p>Examples: ‘0.3pb’, [120, 120]</p>
</dd>
<dt>hm_cell       Image X and Y cell sizes. “” computes the cell size based on</dt><dd><p>the UV coverage of all the fields to be imaged and uses a
5 pix per beam sampling.
The pix per beam specification (‘&lt;number&gt;ppb’) uses the above
default cell size (‘5ppb’) and scales it accordingly.
The cells can also be specified as explicit measures.</p>
<p>Examples: ‘3ppb’, [‘0.5arcsec’, ‘0.5arcsec’]</p>
</dd>
<dt>calmaxpix     Maximum image X or Y size in pixels if a calibrator is being</dt><dd><p>imaged (‘PHASE’, ‘BANDPASS’, ‘AMPLITUDE’ or ‘FLUX’ intent).</p>
</dd>
<dt>phasecenter   Direction measure or field id of the image center.</dt><dd><p>The default phase center is set to the mean of the field
directions of all fields that are to be image together.</p>
<p>Examples: ‘J2000 19h30m00 -40d00m00’, 0</p>
</dd>
<dt>nchan         Total number of channels in the output image(s)</dt><dd><p>-1 selects enough channels to cover the data selected by
spw consistent with start and width.</p>
</dd>
<dt>start         Start of image frequency axis as frequency or velocity.</dt><dd><p>“” selects start frequency automatically.</p>
</dd>
<dt>width         Output channel width.</dt><dd><p>Difference in frequency between 2 selected channels for
frequency mode images.
‘pilotimage’ for 15 MHz / 8 channel heuristic</p>
</dd>
<dt>nbins         Channel binning factors for each spw.</dt><dd><p>Format: ‘spw1:nb1,spw2:nb2,…’ with optional wildcards: ‘<a href="#id1"><span class="problematic" id="id2">*</span></a>:nb’</p>
<p>Examples: ‘9:2,11:4,13:2,15:8’, ‘<a href="#id3"><span class="problematic" id="id4">*</span></a>:2’</p>
</dd>
<dt>robust        Briggs robustness parameter</dt><dd><p>Values range from -2.0 (uniform) to 2.0 (natural)</p>
</dd>
</dl>
<p>uvtaper       uv-taper on outer baselines
clearlist     Clear any existing target list
per_eb        Make an image target per EB
per_session   Make an image target per session
calcsb        Force (re-)calculation of sensitivities and beams
datatype      Data type(s) to image. The default ‘’ selects the best</p>
<blockquote>
<div><p>available data type (e.g. selfcal over regcal) with
an automatic fallback to the next available data type.
With the <code class="docutils literal notranslate"><span class="pre">datatype</span></code> parameter one can force the use of only
given data type(s) without a fallback. The data type(s) are
specified as comma separated string of keywords. Accepted
values are the standard data types such as
‘REGCAL_CONTLINE_ALL’, ‘REGCAL_CONTLINE_SCIENCE’,
‘SELFCAL_CONTLINE_SCIENCE’, ‘REGCAL_LINE_SCIENCE’,
‘SELFCAL_LINE_SCIENCE’. The shortcuts ‘regcal’ and ‘selfcal’
are also accepted. They are expanded into the full data types
using the <code class="docutils literal notranslate"><span class="pre">specmode</span></code> parameter and the available data types for
the given MSes. In addition the strings ‘best’ and ‘all’ are
accepted, where ‘best’ means the above mentioned automatic
mode and ‘all’ means all available data types for a given
specmode. The data type strings are case insensitive.</p>
<dl class="simple">
<dt>Examples: ‘selfcal’, ‘regcal, ‘selfcal,regcal’,</dt><dd><p>‘REGCAL_LINE_SCIENCE,selfcal_line_science’</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>datacolumn    Data column to image. Only to be used for manual overriding</dt><dd><p>when the automatic choice by data type is not appropriate.</p>
</dd>
</dl>
<p>parallel      Use MPI cluster where possible</p>
<p>——— examples ———————————————————–</p>
<p>1. Make a list of science target images to be cleaned, one image per science
spw.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makeimlist</span><span class="p">()</span>
</pre></div>
</div>
<p>2. Make a list of PHASE and BANDPASS calibrator targets to be imaged,
one image per science spw.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makeimlist</span><span class="p">(</span><span class="n">intent</span><span class="o">=</span><span class="s1">&#39;PHASE,BANDPASS&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>3. Make a list of PHASE calibrator images observed in spw 1, images limited to
50 pixels on a side.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makeimlist</span><span class="p">(</span><span class="n">intent</span><span class="o">=</span><span class="s1">&#39;PHASE&#39;</span><span class="p">,</span><span class="n">spw</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="n">calmaxpix</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_makermsimages">
<span id="pipeline-hif-cli-hif-makermsimages-module"></span><h2>pipeline.hif.cli.hif_makermsimages module<a class="headerlink" href="#module-pipeline.hif.cli.hif_makermsimages" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_makermsimages.hif_makermsimages">
<span class="sig-name descname"><span class="pre">hif_makermsimages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_makermsimages.html#hif_makermsimages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_makermsimages.hif_makermsimages" title="Link to this definition"></a></dt>
<dd><p>hif_makermsimages —- Create RMS images for VLASS data.</p>
<p>Create RMS images for VLASS data.</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           List of visibility data files. These may be ASDMs, tar files of ASDMs,</dt><dd><p>MSs, or tar files of MSs, If ASDM files are specified, they will be
converted  to MS format.</p>
<p>example: vis=[‘X227.ms’, ‘asdms.tar.gz’]</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Basic makermsimages task</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makermsimages</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_mstransform">
<span id="pipeline-hif-cli-hif-mstransform-module"></span><h2>pipeline.hif.cli.hif_mstransform module<a class="headerlink" href="#module-pipeline.hif.cli.hif_mstransform" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_mstransform.hif_mstransform">
<span class="sig-name descname"><span class="pre">hif_mstransform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputvis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chanbin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timebin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_mstransform.html#hif_mstransform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_mstransform.hif_mstransform" title="Link to this definition"></a></dt>
<dd><p>hif_mstransform —- Create new MeasurementSets for science target imaging</p>
<p>Create new MeasurementSets for imaging from the corrected column of the input
MeasurementSet via a single call to mstransform with all data selection parameters.
By default, all science target data is copied to the new MS. The
new MeasurementSet is not re-indexed to the selected data and the new MS will
have the same source, field, and spw names and ids as it does in the parent MS.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>outputvis     The list of output transformed MeasurementSets to be used for</dt><dd><p>imaging. The output list must be the same length as the input
list. The default output name defaults to
&lt;msrootname&gt;_targets.ms</p>
<dl class="simple">
<dt>Examples: ‘ngc5921.ms’,</dt><dd><p>[‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
</dl>
</dd>
<dt>field         Select fields name(s) or id(s) to transform. Only fields with</dt><dd><p>data matching the intent will be selected.</p>
<p>Examples: ‘3C279’, ‘Centaurus*’, ‘3C279,J1427-421’</p>
</dd>
<dt>intent        Select intents for which associated fields will be imaged.</dt><dd><p>By default only TARGET data is selected.</p>
<p>Examples: ‘PHASE,BANDPASS’</p>
</dd>
<dt>spw           Select spectral window/channels to image. By default all</dt><dd><p>science spws for which the specified intent is valid are
selected.</p>
</dd>
<dt>chanbin       Width (bin) of input channels to average to form an output</dt><dd><p>channel. If chanbin &gt; 1 then chanaverage is automatically
switched to True.</p>
</dd>
<dt>timebin       Bin width for time averaging. If timebin &gt; 0s then</dt><dd><p>timeaverage is automatically switched to True.</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Create a science target MS from the corrected column in the input MS.</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_mstransform</span><span class="p">()</span>
</pre></div>
</div>
<p>2. Make a phase and bandpass calibrator targets MS from the corrected
column in the input MS.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_mstransform</span><span class="p">(</span><span class="n">intent</span><span class="o">=</span><span class="s1">&#39;PHASE,BANDPASS&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_rawflagchans">
<span id="pipeline-hif-cli-hif-rawflagchans-module"></span><h2>pipeline.hif.cli.hif_rawflagchans module<a class="headerlink" href="#module-pipeline.hif.cli.hif_rawflagchans" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_rawflagchans.hif_rawflagchans">
<span class="sig-name descname"><span class="pre">hif_rawflagchans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_hilo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fhl_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fhl_minsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_bad_quadrant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fbq_hilo_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fbq_antenna_frac_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fbq_baseline_frac_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_rawflagchans.html#hif_rawflagchans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_rawflagchans.hif_rawflagchans" title="Link to this definition"></a></dt>
<dd><p>hif_rawflagchans —- Flag deviant baseline/channels in raw data</p>
<p>hif_rawflagchans flags deviant baseline/channels in the raw data.</p>
<p>The flagging views used are derived from the raw data for the specified
intent - default is BANDPASS.</p>
<p>Bad baseline/channels are flagged for all intents, not just the
one that is the basis of the flagging views.</p>
<p>For each spectral window the flagging view is a 2d image with axes
‘channel’ and ‘baseline’. The pixel for each channel, baseline is the
time average of the underlying unflagged raw data.</p>
<p>The baseline axis is labeled by numbers of form id1.id2 where id1 and id2
are the IDs of the baseline antennas. Both id1 and id2 run over all
antenna IDs in the observation. This means that each baseline is shown
twice but has the benefit that ‘bad’ antennas are easily identified by
eye.</p>
<p>Three flagging methods are available:</p>
<p>If parameter <code class="docutils literal notranslate"><span class="pre">flag_hilo</span></code> is set True then outliers from the median
of each flagging view will be flagged.</p>
<p>If parameter <code class="docutils literal notranslate"><span class="pre">flag_bad_quadrant</span></code> is set True then a simple 2 part
test is used to check for bad antenna quadrants and/or bad baseline
quadrants. Here a ‘quadrant’ is defined simply as one quarter of the
channel axis. The first part of the test is to note as ‘suspect’ those
points further from the view median than <code class="docutils literal notranslate"><span class="pre">fbq_hilo_limit</span></code> * MAD.
The second part is to flag entire antenna/quadrants if their
fraction of suspect points exceeds <code class="docutils literal notranslate"><span class="pre">fbq_antenna_frac_limit</span></code>.
Failing that, entire baseline/quadrants may be flagged if their
fraction of suspect points exceeds <code class="docutils literal notranslate"><span class="pre">fbq_baseline_frac_limit</span></code>.
Suspect points are not flagged unless as part of a bad antenna or
baseline quadrant.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<p>vis                     List of input MeasurementSets.</p>
<blockquote>
<div><p>default: [] - Use the MeasurementSets currently known to the pipeline
context.</p>
</div></blockquote>
<dl>
<dt>spw                     The list of spectral windows and channels to which the calibration</dt><dd><p>will be applied. Defaults to all science windows in the pipeline
context.</p>
<p>example: spw=’17’, spw=’11, 15’</p>
</dd>
<dt>intent                  A string containing the list of intents to be checked for antennas</dt><dd><p>with deviant gains. The default is blank, which causes the task to select
the ‘BANDPASS’ intent.</p>
<p>example: intent=’<cite>*BANDPASS*</cite>’</p>
</dd>
<dt>flag_hilo               True to flag channel/baseline data further from the view</dt><dd><p>median than fhl_limit * MAD.</p>
</dd>
<dt>fhl_limit               If flag_hilo is True then flag channel/baseline data</dt><dd><p>further from the view median than fhl_limit * MAD.</p>
</dd>
<dt>fhl_minsample           Do no flagging if the view median and MAD are derived</dt><dd><p>from fewer than fhl_minsample view pixels.</p>
</dd>
<dt>flag_bad_quadrant       True to search for and flag bad antenna quadrants</dt><dd><p>and baseline quadrants. Here a /’quadrant/’ is one
quarter of the channel axis.</p>
</dd>
<dt>fbq_hilo_limit          If flag_bad_quadrant is True then channel/baselines further</dt><dd><p>from the view median than fbq_hilo_limit * MAD will be noted as
‘suspect’. If there are enough of them to indicate that an antenna or
baseline quadrant is bad then all channel/baselines in that quadrant will
be flagged.</p>
</dd>
<dt>fbq_antenna_frac_limit  If flag_bad_quadrant is True and the fraction of</dt><dd><p>suspect channel/baselines in a particular antenna/quadrant exceeds
fbq_antenna_frac_limit then all data for that antenna/quadrant will
be flagged.</p>
</dd>
<dt>fbq_baseline_frac_limit If flag_bad_quadrant is True and the fraction of</dt><dd><p>suspect channel/baselines in a particular baseline/quadrant exceeds
fbq_baseline_frac_limit then all data for that baseline/quadrant will
be flagged.</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Flag bad quadrants and wild outliers, default method:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_rawflagchans</span><span class="p">()</span>
</pre></div>
</div>
<p>equivalent to:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_rawflagchans</span><span class="p">(</span><span class="n">flag_hilo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fhl_limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">flag_bad_quadrant</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fbq_hilo_limit</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">fbq_antenna_frac_limit</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">fbq_baseline_frac_limit</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_refant">
<span id="pipeline-hif-cli-hif-refant-module"></span><h2>pipeline.hif.cli.hif_refant module<a class="headerlink" href="#module-pipeline.hif.cli.hif_refant" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_refant.hif_refant">
<span class="sig-name descname"><span class="pre">hif_refant</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_refant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geometry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagging</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refantignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_refant.html#hif_refant"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_refant.hif_refant" title="Link to this definition"></a></dt>
<dd><p>hif_refant —- Select the best reference antennas</p>
<p>The hif_refant task selects a list of reference antennas and stores them
in the pipeline context in priority order.</p>
<p>The priority order is determined by a weighted combination of scores derived
by the antenna selection heuristics. In manual mode the reference antennas
can be set by hand.</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl class="simple">
<dt>vis           The list of input MeasurementSets. Defaults to the list of MeasurementSets</dt><dd><p>in the pipeline context.
example: [‘M31.ms’]</p>
</dd>
<dt>field         The comma delimited list of field names or field ids for which flagging</dt><dd><p>scores are computed if hm_refant=’automatic’ and  flagging = True
example: ‘’ (Default to fields with the specified intents), ‘3C279’, ‘3C279,M82’</p>
</dd>
<dt>spw           A string containing the comma delimited list of spectral window ids for</dt><dd><p>which flagging scores are computed if hm_refant=’automatic’ and  flagging = True.
example: ‘’ (all spws observed with the specified intents), ‘11,13,15,17’</p>
</dd>
<dt>intent        A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched. Defaults to all supported
intents.
example: ‘BANDPASS’, ‘AMPLITUDE,BANDPASS,PHASE,POLARIZATION’</p>
</dd>
<dt>hm_refant     The heuristics method or mode for selection the reference</dt><dd><p>antenna. The options are ‘manual’ and ‘automatic. In manual
mode a user supplied reference antenna refant is supplied.
In ‘automatic’ mode the antennas are selected automatically.</p>
</dd>
<dt>refant        The user supplied reference antenna for hm_refant=’manual’. If</dt><dd><p>no antenna list is supplied an empty list is returned.
example: ‘DV05’</p>
</dd>
<dt>geometry      Score antenna by proximity to the center of the array. This</dt><dd><p>option is quick as only the ANTENNA table must be read.
Parameter is available when <a href="#id5"><span class="problematic" id="id6">``</span></a>hm_refant``=’automatic’.</p>
</dd>
<dt>flagging      Score antennas by percentage of unflagged data.  This option</dt><dd><p>requires computing flagging statistics.
Parameter is available when <a href="#id7"><span class="problematic" id="id8">``</span></a>hm_refant``=’automatic’.</p>
</dd>
<dt>parallel      Execute using CASA HPC functionality, if available.</dt><dd><p>options: ‘automatic’, ‘true’, ‘false’, True, False
default: None (equivalent to False)</p>
</dd>
<dt>refantignore  string list to be ignored as reference antennas.</dt><dd><p>example:  refantignore=’ea02,ea03’</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Compute the references antennas to be used for bandpass and gain calibration.</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_refant</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_selfcal">
<span id="pipeline-hif-cli-hif-selfcal-module"></span><h2>pipeline.hif.cli.hif_selfcal module<a class="headerlink" href="#module-pipeline.hif.cli.hif_selfcal" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_selfcal.hif_selfcal">
<span class="sig-name descname"><span class="pre">hif_selfcal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refantignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restore_resources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_solints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amplitude_selfcal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gaincal_minsnr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minsnr_to_proceed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_beam_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_cal_mode_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rel_thresh_scaling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dividing_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_all_spws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf_EB_gaincal_combine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_selfcal.html#hif_selfcal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_selfcal.hif_selfcal" title="Link to this definition"></a></dt>
<dd><p>hif_selfcal  —- Determine and apply self-calibration with the science target data</p>
<p>Determine and apply self-calibration with the science target data</p>
<p>——— parameter descriptions ———————————————</p>
<dl class="simple">
<dt>vis                     The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
default = “”: use all MeasurementSets in the context</p>
</dd>
<dt>field                   Select fields to image. Use field name(s) NOT id(s). Mosaics</dt><dd><p>are assumed to have common source / field names.  If intent is
specified only fields with data matching the intent will be
selected. The fields will be selected from MeasurementSets in
“vis”.
default= “” Fields matching intent, one image per target source.</p>
</dd>
<dt>spw                     Select spectral windows to image.</dt><dd><p>“”: Images will be computed for all science spectral windows.</p>
</dd>
<dt>contfile                Name of file to specify line-free frequency ranges for selfcal continuum imaging.</dt><dd><p>default=”cont.dat”</p>
</dd>
<dt>apply                   Apply final selfcal solutions back to the input MeasurementSets.</dt><dd><p>default = True</p>
</dd>
<dt>recal                   Always re-do self-calibration even solutions/caltables are found in the Pipeline</dt><dd><p>context or json restore file.
default = False</p>
</dd>
<dt>refantignore            string list to be ignored as reference antennas.</dt><dd><p>example:  refantignore=’ea02,ea03’</p>
</dd>
<dt>restore_resources       Path to the restore resources from a standard run of hif_selfcal.</dt><dd><p>hif_selfcal will automatically do an exhaustive search to lookup/extract/verify
the selfcal restore resources, i.e., selfcal.json and all selfcal-caltable referred
in selfcal.json, starting from working/, to products/ and rawdata/.
If restore_resources is specified, this file path will be evaluated first
before the pre-defined exhaustive search list.
The value can be the file path of <a href="#id9"><span class="problematic" id="id10">*</span></a>auxproducts.tgz file or <a href="#id11"><span class="problematic" id="id12">*</span></a>selfcal.json file.</p>
</dd>
<dt>n_solints               number of solution intervals to attempt for self-calibration.</dt><dd><p>default: 4</p>
</dd>
<dt>amplitude_selfcal       Attempt amplitude self-calibration following phase-only self-calibration;</dt><dd><p>if median time between scans of a given target is &lt; 150s,
solution intervals of 300s and inf will be attempted, otherwise just
inf will be attempted.
default = False</p>
</dd>
<dt>gaincal_minsnr          Minimum S/N for a solution to not be flagged by gaincal.</dt><dd><p>default = 2.0</p>
</dd>
<dt>minsnr_to_proceed       Minimum estimated S/N on a per antenna basis to attempt self-calibration</dt><dd><p>of a source.
default = 3.0</p>
</dd>
<dt>delta_beam_thresh       Allowed fractional change in beam size for selfcalibration to accept</dt><dd><p>results of a solution interval.
default = 0.05</p>
</dd>
<dt>apply_cal_mode_default  Apply mode to use for applycal task</dt><dd><p>during self-calibration; same options as applycal.
default = ‘calflag’</p>
</dd>
<dt>rel_thresh_scaling      Scaling type to determine how clean thresholds</dt><dd><p>per solution interval should be determined going from the starting
clean threshold to 3.0 * RMS for the final solution interval.
default=’log10’, options: ‘linear’, ‘log10’, or ‘loge’ (natural log)</p>
</dd>
<dt>dividing_factor         Scaling factor</dt><dd><p>to determine clean threshold for first self-calibration solution interval.
Equivalent to (Peak S/N / dividing_factor) <a href="#id13"><span class="problematic" id="id14">*</span></a>RMS = First clean threshold;
however, if (Peak S/N / dividing_factor) <a href="#id15"><span class="problematic" id="id16">*</span></a>RMS is &lt; 5.0; a value of 5.0
is used for the first clean threshold.
default = 40 for &lt; 8 GHz; 15 for &gt; 8 GHz</p>
</dd>
<dt>check_all_spws          If True, the S/N of mfs images created on a per-spectral-window basis will</dt><dd><p>be compared at the initial stages final self-calibration.
default=False</p>
</dd>
<dt>inf_EB_gaincal_combine  change gain solution combination parameters for the inf_EB solution interval.</dt><dd><p>if True, the gaincal combine parameter will be set to ‘scan,spw’; if False,
the gaincal combine parameter will be set to ‘scan’.
default=False</p>
</dd>
<dt>parallel                Use MPI cluster where possible, default=’automatic’.</dt><dd><p>options: ‘automatic’, ‘true’, ‘false’, True, False</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Run self-calibration and apply solutions to all science targets and spws</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_selfcal</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Run self-calibration and apply solutions to a single science target</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_selfcal</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;3C279&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Run self-calibration with a more relaxed allowed fractional change in the beam size for a solution interval to be successful</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_selfcal</span><span class="p">(</span><span class="n">delta_beam_thresh</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_setjy">
<span id="pipeline-hif-cli-hif-setjy-module"></span><h2>pipeline.hif.cli.hif_setjy module<a class="headerlink" href="#module-pipeline.hif.cli.hif_setjy" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_setjy.hif_setjy">
<span class="sig-name descname"><span class="pre">hif_setjy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reffile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normfluxes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reffreq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fluxdensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalebychan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_setjy.html#hif_setjy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_setjy.hif_setjy" title="Link to this definition"></a></dt>
<dd><p>hif_setjy —- Fill the model column with calibrated visibilities</p>
<p>Fills the model column with the model visibilities.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets defined in the pipeline context.</p>
</dd>
<dt>field         The list of field names or field ids for which the models are</dt><dd><p>to be set. Defaults to all fields with intent ‘<cite>*AMPLITUDE*</cite>’.</p>
<p>example: field=’3C279’, field=’3C279, M82’</p>
</dd>
<dt>intent        A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched. Defaults to all data
with amplitude intent.</p>
<p>example: intent=’<cite>*AMPLITUDE*</cite>’</p>
</dd>
<dt>spw           The list of spectral windows and channels for which bandpasses are</dt><dd><p>computed. Defaults to all science spectral windows.</p>
<p>example: spw=’11,13,15,17’</p>
</dd>
<dt>model         Model image for setting model visibilities. Not fully</dt><dd><p>supported.</p>
<p>example: see details in help for CASA setjy task</p>
</dd>
<dt>reffile       Path to a file containing flux densities for calibrators unknown to</dt><dd><p>CASA. Values given in this file take precedence over the CASA-derived
values for all calibrators except solar system calibrators. By default the
path is set to the CSV file created by h_importdata, consisting of
catalogue fluxes extracted from the ASDM.</p>
<p>example: reffile=’’, reffile=’working/flux.csv’</p>
</dd>
</dl>
<p>normfluxes    Normalize lookup fluxes.
reffreq       The reference frequency for spix, given with units. Provided to</p>
<blockquote>
<div><p>avoid division by zero. If the flux density is being scaled by spectral
index, then reffreq must be set to whatever reference frequency is correct
for the given fluxdensity and spix. It cannot be determined from vis. On
the other hand, if spix is 0, then any positive frequency can be used and
will be ignored.</p>
<p>example: reffreq=’86.0GHz’, reffreq=’4.65e9Hz’</p>
</div></blockquote>
<dl>
<dt>fluxdensity   Specified flux density [I,Q,U,V] in Jy. Uses [1,0,0,0]</dt><dd><p>flux density for unrecognized sources, and standard flux densities for
ones recognized by ‘standard’, including 3C286, 3C48, 3C147, and several
planets, moons, and asteroids.</p>
<p>example: [3.06,0.0,0.0,0.0]</p>
</dd>
<dt>spix          Spectral index for fluxdensity S = fluxdensity * (freq/reffreq)**spix</dt><dd><p>Only used if fluxdensity is being used. If fluxdensity is positive, and
spix is nonzero, then reffreq must be set too. It is applied in the same
way to all polarizations, and does not account for Faraday rotation or
depolarization.</p>
</dd>
<dt>scalebychan   This determines whether the fluxdensity set in the model is</dt><dd><p>calculated on a per channel basis. If False then only one fluxdensity
value is calculated per spw.</p>
</dd>
<dt>standard      Flux density standard, used if fluxdensity[0] less than 0.0. The</dt><dd><p>options are: ‘Baars’,’Perley 90’,’Perley-Taylor 95’, ‘Perley-Taylor 99’,
‘Perley-Butler 2010’ and ‘Butler-JPL-Horizons 2010’.</p>
<dl class="simple">
<dt>default: ‘Butler-JPL-Horizons 2012’ for solar system object</dt><dd><p>‘Perley-Butler 2010’ otherwise</p>
</dd>
</dl>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Set the model flux densities for all the amplitude calibrators:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_setjy</span><span class="p">()</span>
</pre></div>
</div>
<p>——— issues ———————————————————–</p>
<p>Support for the setjy spix parameter needs to be added.</p>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_setmodels">
<span id="pipeline-hif-cli-hif-setmodels-module"></span><h2>pipeline.hif.cli.hif_setmodels module<a class="headerlink" href="#module-pipeline.hif.cli.hif_setmodels" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_setmodels.hif_setmodels">
<span class="sig-name descname"><span class="pre">hif_setmodels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refintent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transfer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transintent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reffile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normfluxes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalebychan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_setmodels.html#hif_setmodels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_setmodels.hif_setmodels" title="Link to this definition"></a></dt>
<dd><p>hif_setmodels —- Set calibrator source models</p>
<p>Set model fluxes values for calibrator reference and transfer sources using lookup
values. By default the reference sources are the flux calibrators and the transfer
sources are the bandpass, phase, and check source calibrators. Reference sources
which are also in the transfer source list are removed from the transfer source list.</p>
<p>Built-in lookup tables are used to compute models for solar system object calibrators.
Point source models are used for other calibrators with flux densities provided in the reference file.
Normalized fluxes are computed for transfer sources if the <code class="docutils literal notranslate"><span class="pre">normfluxes</span></code> parameter is
set to True.</p>
<p>The default reference file is ‘flux.csv’ in the current working directory.
This file is usually created in the importdata stage. The file is in
‘csv’ format and contains the following comma delimited columns.</p>
<p>vis,fieldid,spwid,I,Q,U,V,pix,comment</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the pipeline context.</p>
<p>example: [‘M32A.ms’, ‘M32B.ms’]</p>
</dd>
<dt>reference     A string containing a comma delimited list of  field names</dt><dd><p>defining the reference calibrators. Defaults to field names with
intent ‘AMPLITUDE’.</p>
<p>example: ‘M82,3C273’</p>
</dd>
<dt>refintent     A string containing a comma delimited list of intents</dt><dd><p>used to select the reference calibrators. Defaults to ‘AMPLITUDE’.</p>
<p>example: ‘BANDPASS’</p>
</dd>
<dt>transfer      A string containing a comma delimited list of  field names</dt><dd><p>defining the transfer calibrators. Defaults to field names with
intent ‘’.</p>
<p>example: ‘J1328+041,J1206+30’</p>
</dd>
<dt>transintent   A string containing a comma delimited list of intents</dt><dd><p>defining the transfer calibrators. Defaults to ‘BANDPASS,PHASE,CHECK’.
‘’ stands for no transfer sources.</p>
<p>example: ‘PHASE’</p>
</dd>
<dt>reffile       The reference file containing a lookup table of point source models</dt><dd><p>This file currently defaults to ‘flux.csv’ in the working directory. This
file must conform to the standard pipeline ‘flux.csv’ format
example: ‘myfluxes.csv’</p>
</dd>
</dl>
<p>normfluxes    Normalize the transfer source flux densities.
scalebychan   Scale the flux density on a per channel basis or else on a per spw basis</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Set model fluxes for the flux, bandpass, phase, and check sources.</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_setmodels</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_transformimagedata">
<span id="pipeline-hif-cli-hif-transformimagedata-module"></span><h2>pipeline.hif.cli.hif_transformimagedata module<a class="headerlink" href="#module-pipeline.hif.cli.hif_transformimagedata" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_transformimagedata.hif_transformimagedata">
<span class="sig-name descname"><span class="pre">hif_transformimagedata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputvis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datacolumn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chanbin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timebin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear_pointing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modify_weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wtmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_transformimagedata.html#hif_transformimagedata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_transformimagedata.hif_transformimagedata" title="Link to this definition"></a></dt>
<dd><p>hif_transformimagedata —- Extract fields for the desired VLASS image to a new MS and reset weights if desired</p>
<p>Extract fields for the desired VLASS image to a new MS and reset weights if desired</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis            List of visibility data files. These may be ASDMs, tar files of ASDMs,</dt><dd><p>MSs, or tar files of MSs, If ASDM files are specified, they will be
converted  to MS format.</p>
<p>example: vis=[‘X227.ms’, ‘asdms.tar.gz’]</p>
</dd>
</dl>
<p>outputvis      The output MeasurementSet.
field          Set of data selection field names or ids, ‘’ for all.
intent         Set of data selection intents, ‘’ for all.
spw            Set of data selection spectral window ids ‘’ for all.
datacolumn     Select spectral windows to split. The standard CASA options are</p>
<blockquote>
<div><p>supported</p>
<p>example: ‘data’, ‘model’</p>
</div></blockquote>
<p>chanbin        Bin width for channel averaging.
timebin        Bin width for time averaging.
replace        If a split was performed delete the parent MS and remove it from the context.</p>
<blockquote>
<div><p>example: True or False</p>
</div></blockquote>
<p>clear_pointing Clear the pointing table.
modify_weights Re-initialize the weights.
wtmode         optional weight initialization mode when modify_weights=True</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Basic transformimagedata task</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_transformimagedata</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli.hif_uvcontsub">
<span id="pipeline-hif-cli-hif-uvcontsub-module"></span><h2>pipeline.hif.cli.hif_uvcontsub module<a class="headerlink" href="#module-pipeline.hif.cli.hif_uvcontsub" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_uvcontsub.hif_uvcontsub">
<span class="sig-name descname"><span class="pre">hif_uvcontsub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitorder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_uvcontsub.html#hif_uvcontsub"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_uvcontsub.hif_uvcontsub" title="Link to this definition"></a></dt>
<dd><p>hif_uvcontsub —- Fit and subtract continuum from the data</p>
<p>hif_uvcontsub fits the continuum for the frequency ranges given in the cont.dat
file, subtracts that fit from the uv data and generates a new set of MSes
containing the continuum subtracted (i.e. line) data. The fit is attempted
for all science targets and spws. If a fit is impossible, the corresponding
data selection is not written to the output line MS.</p>
<p>results – The results object for the pipeline task is returned</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>field         The list of field names or field ids for which UV continuum</dt><dd><p>fits are computed. Defaults to all fields.
Examples: ‘3C279’, ‘3C279,M82’</p>
</dd>
<dt>intent        A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched.
‘’: Defaults to all data with TARGET intent.</p>
</dd>
<dt>spw           The list of spectral windows and channels for which uv</dt><dd><p>continuum fits are computed.
‘’, Defaults to all science spectral windows.
Example: ‘11,13,15,17’</p>
</dd>
<dt>fitorder      Polynomial order for the continuum fits per source and spw.</dt><dd><p>Defaults to {} which means fit order 1 for all sources and
spws. If an explicit dictionary is given then all unspecified
selections still default to 1.
Example: {‘3C279’: {‘15’: 1, ‘17’: 2}, ‘M82’: {‘13’: 2}}</p>
</dd>
</dl>
<p>parallel      Execute using CASA HPC functionality, if available.</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Fit and subtract continuum for all science targets and spws</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_uvcontsub</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Fit and subtract continuum only for a subsect of fields</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_uvcontsub</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">&#39;3C279,M82&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Fit and subtract continuum only for a subsect of spws</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_uvcontsub</span><span class="p">(</span><span class="n">spw</span><span class="o">=</span><span class="s1">&#39;11,13&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Override automatic fit order choice</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_uvcontsub</span><span class="p">(</span><span class="n">fitorder</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;3C279&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;15&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;17&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s1">&#39;M82&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;13&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}})</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-pipeline.hif.cli">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pipeline.hif.cli" title="Link to this heading"></a></h2>
<p>Interferometry Generic Tasks</p>
<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_analyzealpha">
<span class="sig-name descname"><span class="pre">hif_analyzealpha</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alphafile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alphaerrorfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_analyzealpha.html#hif_analyzealpha"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_analyzealpha" title="Link to this definition"></a></dt>
<dd><p>hif_analyzealpha —- Extract spectral index from intensity peak in VLA/VLASS images</p>
<p>Extract spectral index from intensity peak in VLA/VLASS images</p>
<p>The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl class="simple">
<dt>vis            List of visisbility  data files. These may be ASDMs, tar files of ASDMs,</dt><dd><p>MSs, or tar files of MSs, If ASDM files are specified, they will be
converted  to MS format.
example: vis=[‘X227.ms’, ‘asdms.tar.gz’]</p>
</dd>
</dl>
<p>image          Restored subimage
alphafile      Input spectral index map
alphaerrorfile Input spectral index error map</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Basic analyzealpha task</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_analyzealpha</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_antpos">
<span class="sig-name descname"><span class="pre">hif_antpos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_antpos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antposfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_antpos.html#hif_antpos"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_antpos" title="Link to this definition"></a></dt>
<dd><p>hif_antpos —- Derive an antenna position calibration table</p>
<p>Derive the antenna position calibration for list of MeasurementSets.</p>
<p>The hif_antpos task corrects the antenna positions recorded in the ASDMs using
updated antenna position calibration information determined after the
observation was taken.</p>
<p>Corrections can be input by hand, read from a file on disk, or in the future
by querying an ALMA database service.</p>
<p>The antenna positions file is in ‘csv’ format containing 6 comma-delimited
columns as shown below. The default name of this file is ‘antennapos.csv’.</p>
<p>Contents of example ‘antennapos.csv’ file:</p>
<p>ms,antenna,xoffset,yoffset,zoffset,comment
uid___A002_X30a93d_X43e.ms,DV11,0.000,0.010,0.000,”No comment”
uid___A002_X30a93d_X43e.dup.ms,DV11,0.000,-0.010,0.000,”No comment”</p>
<p>The corrections are used to generate a calibration table which is recorded
in the pipeline context and applied to the raw visibility data, on the fly to
generate other calibration tables, or permanently to generate calibrated
visibilities for imaging.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl class="simple">
<dt>vis           List of input visibility files.</dt><dd><p>example: [‘ngc5921.ms’]</p>
</dd>
<dt>caltable      Name of output gain calibration tables.</dt><dd><p>example: [‘ngc5921.gcal’]</p>
</dd>
<dt>hm_antpos     Heuristics method for retrieving the antenna position</dt><dd><p>corrections. The options are ‘online’ (not yet implemented), ‘manual’,
and ‘file’.</p>
</dd>
<dt>antenna       The list of antennas for which the positions are to be corrected.</dt><dd><p>Available when hm_antpos=’manual’.
example: antenna=’DV05,DV07’</p>
</dd>
<dt>offsets       The list of antenna offsets for each antenna in ‘antennas’. Each</dt><dd><p>offset is a set of 3 floating point numbers separated by commas, specified
in the ITRF frame. Available when hm_antpos=’manual’.
example: offsets=[0.01, 0.02, 0.03, 0.03, 0.02, 0.01]</p>
</dd>
<dt>antposfile    The file(s) containing the antenna offsets. Used if hm_antpos</dt><dd><p>is ‘file’.
example: ‘antennapos.csv’</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<p>1. Correct the position of antenna 5 for all the visibility files in a single
pipeline run:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_antpos</span><span class="p">(</span><span class="n">antenna</span><span class="o">=</span><span class="s1">&#39;DV05&#39;</span><span class="p">,</span> <span class="n">offsets</span><span class="o">=</span><span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">])</span>
</pre></div>
</div>
<p>2. Correct the position of antennas for all the visibility files in a single
pipeline run using antenna positions files on disk. These files are assumed
to conform to a default naming scheme if <code class="docutils literal notranslate"><span class="pre">antposfile</span></code> is unspecified by the
user:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_antpos</span><span class="p">(</span><span class="n">hm_antpos</span><span class="o">=</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">antposfile</span><span class="o">=</span><span class="s1">&#39;myantposfile.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>——— issues ———————————————————–</p>
<p>The hm_antpos ‘online’ option will be implemented when the observing system
provides an antenna position determination service.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_applycal">
<span class="sig-name descname"><span class="pre">hif_applycal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">applymode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calwt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagbackup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagsum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagdetailedsum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_applycal.html#hif_applycal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_applycal" title="Link to this definition"></a></dt>
<dd><p>hif_applycal —- Apply the calibration(s) to the data</p>
<p>Apply precomputed calibrations to the data.</p>
<p>hif_applycal applies the precomputed calibration tables stored in the pipeline
context to the set of visibility files using predetermined field and
spectral window maps and default values for the interpolation schemes.</p>
<p>Users can interact with the pipeline calibration state using the tasks
h_export_calstate and h_import_calstate.</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned</p>
<p>——— parameter descriptions ———————————————</p>
<dl class="simple">
<dt>vis             The list of input MeasurementSets. Defaults to the list of MeasurementSets</dt><dd><p>in the pipeline context.
example: [‘X227.ms’]</p>
</dd>
<dt>field           A string containing the list of field names or field ids to which</dt><dd><p>the calibration will be applied. Defaults to all fields in the pipeline
context.
example: ‘3C279’, ‘3C279, M82’</p>
</dd>
<dt>intent          A string containing the list of intents against which the</dt><dd><p>selected fields will be matched. Defaults to all supported intents
in the pipeline context.
example: <cite>‘*TARGET*’</cite></p>
</dd>
<dt>spw             The list of spectral windows and channels to which the calibration</dt><dd><p>will be applied. Defaults to all science windows in the pipeline
context.
example: ‘17’, ‘11, 15’</p>
</dd>
<dt>antenna         The selection of antennas to which the calibration will be applied.</dt><dd><p>Defaults to all antennas. Not currently supported.</p>
</dd>
</dl>
<p>parang          Apply parallactic angle correction
applymode       Calibration apply mode</p>
<blockquote>
<div><p>‘calflag’: calibrate data and apply flags from solutions
‘calflagstrict’: (default) same as above except flag spws for which calibration is</p>
<blockquote>
<div><p>unavailable in one or more tables (instead of allowing them to pass
uncalibrated and unflagged)</p>
</div></blockquote>
<p>‘trial’: report on flags from solutions, dataset entirely unchanged
‘flagonly’: apply flags from solutions only, data not calibrated
‘flagonlystrict’: same as above except flag spws for which calibration is</p>
<blockquote>
<div><p>unavailable in one or more tables</p>
</div></blockquote>
<p>‘calonly’: calibrate data only, flags from solutions NOT applied</p>
</div></blockquote>
<p>calwt           Calibrate the weights as well as the data
flagbackup      Backup the flags before the apply
flagsum         Compute before and after flagging summary statistics
flagdetailedsum Compute detailed before and after flagging statistics summaries.</p>
<blockquote>
<div><p>Parameter available only when if flagsum is True.</p>
</div></blockquote>
<dl class="simple">
<dt>parallel        Execute using CASA HPC functionality, if available.</dt><dd><p>options: ‘automatic’, ‘true’, ‘false’, True, False
default: None (equivalent to False)</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Apply the calibration to the target data</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_applycal</span> <span class="p">(</span><span class="n">intent</span><span class="o">=</span><span class="s1">&#39;TARGET&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_bandpass">
<span class="sig-name descname"><span class="pre">hif_bandpass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phaseup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phaseupsolint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phaseupbw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solnorm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minblperant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minsnr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_bandpass.html#hif_bandpass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_bandpass" title="Link to this definition"></a></dt>
<dd><p>hif_bandpass —- Compute bandpass calibration solutions</p>
<p>Compute amplitude and phase as a function of frequency for each spectral
window in each MeasurementSet.</p>
<p>Previous calibration can be applied on the fly.</p>
<p>hif_bandpass computes a bandpass solution for every specified science
spectral window. By default a ‘phaseup’ pre-calibration is performed
and applied on the fly to the data, before the bandpass is computed.</p>
<p>The hif_refant task may be used to precompute a prioritized list of
reference antennas.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>caltable      The list of output calibration tables. Defaults to the</dt><dd><p>standard pipeline naming convention.</p>
<p>Example: caltable=[‘M82.gcal’, ‘M82B.gcal’]</p>
</dd>
<dt>field         The list of field names or field ids for which bandpasses are</dt><dd><p>computed. Defaults to all fields.</p>
<p>Examples: field=’3C279’, field=’3C279, M82’</p>
</dd>
<dt>intent        A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched.  Defaults to all data
with bandpass intent.</p>
<p>Example: intent=’<cite>*PHASE*</cite>’</p>
</dd>
<dt>spw           The list of spectral windows and channels for which bandpasses</dt><dd><p>are computed. Defaults to all science spectral windows.</p>
<p>Example: spw=’11,13,15,17’</p>
</dd>
</dl>
<p>antenna       Set of data selection antenna IDs
phaseup       Do a phaseup on the data before computing the bandpass</p>
<blockquote>
<div><p>solution.</p>
</div></blockquote>
<dl>
<dt>phaseupsolint The phase correction solution interval in CASA syntax.</dt><dd><p>Used when phaseup is True.</p>
<p>Example: phaseupsolint=300</p>
</dd>
<dt>phaseupbw     Bandwidth to be used for phaseup. Defaults to 500MHz.</dt><dd><p>Used when phaseup is True.</p>
<dl class="simple">
<dt>Examples: phaseupbw=’’ to use entire bandpass</dt><dd><p>phaseupbw=’500MHz’ to use central 500MHz</p>
</dd>
</dl>
</dd>
</dl>
<p>solint        Time and channel solution intervals in CASA syntax.</p>
<blockquote>
<div><p>Examples: solint=’inf,10ch’, ‘inf’</p>
</div></blockquote>
<dl>
<dt>combine       Data axes to combine for solving. Axes are ‘’, ‘scan’, ‘spw’,</dt><dd><p>‘field’ or any comma-separated combination.</p>
<p>Example: combine=’scan,field’</p>
</dd>
<dt>refant        Reference antenna names. Defaults to the value(s) stored in</dt><dd><p>the pipeline context. If undefined in the pipeline context
defaults to the CASA reference antenna naming scheme.</p>
<p>Examples: refant=’DV01’, refant=’DV06,DV07’</p>
</dd>
</dl>
<p>solnorm       Normalise the bandpass solution
minblperant   Minimum number of baselines required per antenna for each</p>
<blockquote>
<div><p>solve. Antennas with fewer baselines are excluded from
solutions.</p>
</div></blockquote>
<p>minsnr        Reject solutions below this SNR</p>
<p>——— examples ———————————————————–</p>
<p>1. Compute a channel bandpass for all visibility files in the pipeline
context using the CASA reference antenna determination scheme:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_bandpass</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Same as the above but precompute a prioritized reference antenna list:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_refant</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hif_bandpass</span><span class="p">()</span>
</pre></div>
</div>
<p>——— issues ———————————————————–</p>
<p>The specified minsnr parameter is currently applied to the bandpass
solution computation but not the ‘phaseup’ computation. Some noisy
solutions in the phaseup may not be properly rejected.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_checkproductsize">
<span class="sig-name descname"><span class="pre">hif_checkproductsize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcubesize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxcubelimit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxproductsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maximsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calcsb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_checkproductsize.html#hif_checkproductsize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_checkproductsize" title="Link to this definition"></a></dt>
<dd><p>hif_checkproductsize —- Check imaging product size</p>
<p>Check interferometry imaging product size and try to mitigate to maximum
allowed values. The task implements a mitigation cascade computing the largest
cube size and tries to reduce it below a given limit by adjusting the <code class="docutils literal notranslate"><span class="pre">nbins</span></code>,
<code class="docutils literal notranslate"><span class="pre">hm_imsize</span></code> and <code class="docutils literal notranslate"><span class="pre">hm_cell</span></code> parameters. If this step succeeds, it also checks the
overall imaging product size and if necessary reduces the number of fields to
be imaged.</p>
<p>Alternatively, if <code class="docutils literal notranslate"><span class="pre">maximsize</span></code> is set, the image product pixel count is
mitigated by trying to adjust <code class="docutils literal notranslate"><span class="pre">hm_cell</span></code> parameter. If the pixel count is still
greater than <code class="docutils literal notranslate"><span class="pre">maximsize</span></code> at <code class="docutils literal notranslate"><span class="pre">hm_cell</span></code> of 4ppb, then this value is kept and
the image field is truncated around the phase center by forcing <code class="docutils literal notranslate"><span class="pre">hm_imsize</span></code>
= <code class="docutils literal notranslate"><span class="pre">maximsize</span></code>.</p>
<p>Note that mitigation for image pixel count and for the product size currently
are mutually exclusive, with maximsize taking precedence if set.</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis            The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>maxcubesize    Maximum allowed cube size in gigabytes (mitigation goal)</dt><dd><p>-1: automatic from performance parameters</p>
</dd>
<dt>maxcubelimit   Maximum allowed cube limit in gigabytes (mitigation failure</dt><dd><p>limit)
-1: automatic from performance parameters</p>
</dd>
<dt>maxproductsize Maximum allowed product size in gigabytes (mitigation goal and</dt><dd><p>failure limit)
-1: automatic from performance parameters</p>
</dd>
<dt>maximsize      Maximum allowed image count size (mitigation goal and hard</dt><dd><p>maximum).
Parameter <code class="docutils literal notranslate"><span class="pre">maximsize</span></code> must be even and divisible by 2,3,5,7 only.
Note that <code class="docutils literal notranslate"><span class="pre">maximsize</span></code> is disabled by default and cannot be set at
the same time as <code class="docutils literal notranslate"><span class="pre">maxcubesize</span></code>, <code class="docutils literal notranslate"><span class="pre">maxcubelimit</span></code> and <code class="docutils literal notranslate"><span class="pre">maxproductsize</span></code>!
-1: disables mitigation for this parameter</p>
</dd>
</dl>
<p>calcsb         Force (re-)calculation of sensitivities and beams
parallel       Use MPI cluster where possible</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Basic call to check the product sizes using internal defaults</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_checkproductsize</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Typical ALMA call</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_checkproductsize</span><span class="p">(</span><span class="n">maxcubesize</span><span class="o">=</span><span class="mf">40.0</span><span class="p">,</span> <span class="n">maxcubelimit</span><span class="o">=</span><span class="mf">60.0</span><span class="p">,</span> <span class="n">maxproductsize</span><span class="o">=</span><span class="mf">350.0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_correctedampflag">
<span class="sig-name descname"><span class="pre">hif_correctedampflag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antnegsig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antpossig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmantint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmbl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antblnegsig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antblpossig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relaxed_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">niter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_correctedampflag.html#hif_correctedampflag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_correctedampflag" title="Link to this definition"></a></dt>
<dd><p>hif_correctedampflag —- Flag corrected - model amplitudes based on calibrators.</p>
<p>Flag corrected - model amplitudes based on calibrators.</p>
<p>This task computes the flagging heuristics on a calibrator by calling hif_correctedampflag
which looks for outlier visibility points by statistically examining the scalar
difference of corrected amplitudes minus model amplitudes, and flags those outliers.
The philosophy is that only outlier data points that have remained outliers after
calibration will be flagged. The heuristic works equally well on resolved calibrators
and point sources because it is not performing a vector difference, and thus is not
sensitive to nulls in the flux density vs. uvdistance domain. Note that the phase of
the data is not assessed.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis            The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>intent         A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched. If undefined (default),
it will select all data with the BANDPASS intent.</p>
<p>Example: intent=’<cite>*PHASE*</cite>’</p>
</dd>
<dt>field          The list of field names or field ids for which bandpasses are</dt><dd><p>computed. If undefined (default), it will select all fields.</p>
<p>Examples: field=’3C279’, ‘3C279, M82’</p>
</dd>
<dt>spw            The list of spectral windows and channels for which bandpasses</dt><dd><p>are computed. If undefined (default), it will select all
science spectral windows.</p>
<p>Example: spw=’11,13,15,17’</p>
</dd>
</dl>
<p>antnegsig      Lower sigma threshold for identifying outliers as a result of bad antennas within individual timestamps
antpossig      Upper sigma threshold for identifying outliers as a result of bad antennas within individual timestamps
tmantint       Threshold for maximum fraction of timestamps that are allowed to contain outliers
tmint          Initial threshold for maximum fraction of “outlier timestamps” over “total timestamps” that a baseline may be a part of
tmbl           Initial threshold for maximum fraction of “bad baselines” over “all timestamps” that an antenna may be a part of
antblnegsig    Lower sigma threshold for identifying outliers as a result of “bad baselines” and/or “bad antennas” within baselines (across all timestamps)
antblpossig    Upper sigma threshold for identifying outliers as a result of “bad baselines” and/or “bad antennas” within baselines (across all timestamps)
relaxed_factor Relaxed value to set the threshold scaling factor to under certain conditions (see task description)
niter          Maximum number of times to iterate on evaluation of flagging</p>
<blockquote>
<div><p>heuristics. If an iteration results in no new flags, then
subsequent iterations are skipped.</p>
</div></blockquote>
<p>——— examples ———————————————————–</p>
<p>Run default flagging on bandpass calibrator with recommended settings:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_correctedampflag</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_editimlist">
<span class="sig-name descname"><span class="pre">hif_editimlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imagename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_radius_arcsec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cell</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfcache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conjbeams</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cyclefactor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cycleniter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nmajor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datatype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datacolumn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deconvolver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">editmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imaging_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gridder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pbmask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nchan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">niter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nterms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pblimit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phasecenter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reffreq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restfreq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">robust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scales</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">specmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stokes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensitivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uvtaper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uvrange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vlass_plane_reject_ms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_editimlist.html#hif_editimlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_editimlist" title="Link to this definition"></a></dt>
<dd><p>hif_editimlist —- Add to a list of images to be produced with hif_makeimages()</p>
<p>Add to a list of images to be produced with hif_makeimages(), which uses hif_tclean() to invoke CASA tclean.
Many of the hif_editimlist() inputs map directly to tclean parameters.</p>
<p>The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<p>imagename              Prefix for output image names.
search_radius_arcsec   Size of the field finding beam search radius in arcsec.
cell                   Image X and Y cell size(s) with units or pixels per beam.</p>
<blockquote>
<div><p>Single value same for both. ‘&lt;number&gt;ppb’ for pixels per beam.
Compute cell size based on the UV coverage of all the fields
to be imaged and use a 5 pix per beam sampling.
The pix per beam specification uses the above default cell size
(‘5ppb’) and scales it accordingly.
example: [‘0.5arcsec’, ‘0.5arcsec’] ‘3ppb’</p>
</div></blockquote>
<p>cfcache                Convolution function cache directory name
conjbeams              Use conjugate frequency in tclean for wideband A-terms.
cyclefactor            Controls the depth of clean in minor cycles based on PSF.
cycleniter             Controls max number of minor cycle iterations in a single major cycle.
nmajor                 Controls the maximum number of major cycles to evaluate.
datatype               Data type(s) to image. The default ‘’ selects the best</p>
<blockquote>
<div><p>available data type (e.g. selfcal over regcal) with
an automatic fallback to the next available data type.
With the <code class="docutils literal notranslate"><span class="pre">datatype</span></code> parameter of ‘regcal’ or ‘selfcal’, one
can force the use of only given data type(s).
Note that this parameter is only for non-VLASS data when the datacolumn
is not explictly set by user or imaging heuristics.</p>
</div></blockquote>
<p>datacolumn             Data column to image; this will take precedence over the datatype parameter.
deconvolver            Minor cycle algorithm (multiscale or mtmfs)
editmode               The edit mode of the task (‘add’ or ‘replace’). Defaults to ‘add’.
field                  Set of data selection field names or ids.
imaging_mode           Identity of product type (e.g. VLASS quick look) desired.  This will determine the heuristics used.
imsize                 Image X and Y size(s) in pixels or PB level (single fields), ‘’ for default. Single value same for both. ‘&lt;number&gt;pb’ for PB level.
intent                 Set of data selection intents
gridder                Name of the gridder to use with tclean
mask                   Used to declare whether to use a predefined mask for tclean.
pbmask                 Used to declare primary beam gain level for cleaning with primary beam mask (usemask=’pb’), used only for VLASS-SE-CONT imaging mode.
nbin                   Channel binning factor.
nchan                  Number of channels, -1 = all
niter                  The max total number of minor cycle iterations allowed for tclean
nterms                 Number of Taylor coefficients in the spectral model
parameter_file         keyword=value text file as alternative method of input parameters
pblimit                PB gain level at which to cut off normalizations
phasecenter            The default phase center is set to the mean of the field</p>
<blockquote>
<div><p>directions of all fields that are to be image together.
example: 0, ‘J2000 19h30m00 -40d00m00’</p>
</div></blockquote>
<p>reffreq                Reference frequency of the output image coordinate system
restfreq               List of rest frequencies or a rest frequency in a string for output image.
robust                 Briggs robustness parameter for tclean
scales                 The scales for multi-scale imaging.
specmode               Spectral gridding type (mfs, cont, cube, ‘’ for default)
spw                    Set of data selection spectral window/channels, ‘’ for all
start                  First channel for frequency mode images.</p>
<blockquote>
<div><p>Starts at first input channel of the spw.
example: ‘22.3GHz’</p>
</div></blockquote>
<p>stokes                 Stokes Planes to make
sensitivity            Theoretical sensitivity (override internal calculation)
threshold              Stopping threshold (number in units of Jy, or string)
nsigma                 Multiplicative factor for rms-based threshold stopping
uvtaper                Used to set a uv-taper during clean.
uvrange                Set of data selection uv ranges, ‘’ for all.
width                  Channel width
vlass_plane_reject_ms  Only used for the ‘VLASS-SE-CUBE’ imaging mode. default: True</p>
<blockquote>
<div><p>If True, reject VLASS Coarse Cube planes with high flagging percentages (see the heuristics details below)
If False, do not perform flagging-based VLASS Coarse Cube plane rejection.
If the input value is a dictionary, the plane rejection heuristics will be performed with custom thresholds.
The optional keys are:
- exclude_spw, default: ‘’</p>
<blockquote>
<div><p>Spectral windows to be excluded from the VLASS Coarse Cube plane rejection consideration, i.e. always preserve.</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>flagpct_thresh, default: 0.9</dt><dd><p>Flagging percentage threshold per field for the plane rejection.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nfield_thresh: default: 12</dt><dd><p>A minimal number of fields above the flagging percentage threshold is required for the plane rejection.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>——— examples ———————————————————–</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_findcont">
<span class="sig-name descname"><span class="pre">hif_findcont</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_mosweight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_perchanweightdensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_weighting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datacolumn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_findcont.html#hif_findcont"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_findcont" title="Link to this definition"></a></dt>
<dd><p>hif_findcont —- Find continuum frequency ranges</p>
<p>Find continuum frequency ranges for a list of specified targets.</p>
<p>If the cont.dat file is not already present in the working directory, then dirty image
cubes are created for each spectral window of each science target at the native channel
resolution unless the <code class="docutils literal notranslate"><span class="pre">nbins</span></code> parameter was used in the preceding hif_makeimlist stage.
Robust=1 Briggs weighting is used for optimal line sensitivity, even if a different
robust had been chosen in hifa_imageprecheck to match the PI requested angular resolution.
Using moment0 and moment8 images of each cube, SNR-based masks are created, and the mean
spectrum of the joint mask is computed and evaluated with extensive heuristics to find the
channel ranges that are likely to be free of line emission.  Warnings are generated if
the channel ranges contain a small fraction of the bandwidth, or sample only a limited
extent of the spectrum.</p>
<p>If the cont.dat file already exists in the working directory before this task is executed,
then it will first examine the contents. For any spw that already has frequency ranges
defined in this file, it will not perform the analysis described above in favor of the
a priori ranges. For spws not listed in a pre-existing file, it will analyze them as
normal and update the file. In either case, the cont.dat file is used by the subsequent
hif_uvcontsub and hif_makeimages stages.</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis                     The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
</dl>
<p>target_list             Dictionary specifying targets to be imaged; blank will read list from context
hm_mosweight            Mosaic weighting</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<p>hm_perchanweightdensity Calculate the weight density for each channel independently</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<p>hm_weighting            Weighting scheme (natural,uniform,briggs,briggsabs[experimental],briggsbwtaper[experimental])
datacolumn              Data column to image. Only to be used for manual overriding</p>
<blockquote>
<div><p>when the automatic choice by data type is not appropriate.</p>
</div></blockquote>
<p>parallel                Use MPI cluster where possible</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Perform continuum frequency range detection for all science targets and spws:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_findcont</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_gaincal">
<span class="sig-name descname"><span class="pre">hif_gaincal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">caltable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">antenna</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_gaintype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refantmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solnorm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minblperant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minsnr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smodel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">splinetime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npointaver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phasewrap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_gaincal.html#hif_gaincal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_gaincal" title="Link to this definition"></a></dt>
<dd><p>hif_gaincal —- Determine temporal gains from calibrator observations</p>
<p>The complex gains are derived from the data column (raw data) divided by the
model column (usually set with hif_setjy). The gains are obtained for a
specified solution interval, spw combination and field combination.</p>
<p>Good candidate reference antennas can be determined using the hif_refant
task.</p>
<p>Previous calibrations that have been stored in the pipeline context are
applied on the fly. Users can interact with these calibrations via the
h_export_calstate and h_import_calstate tasks.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>caltable      The list of output calibration tables. Defaults to the</dt><dd><p>standard pipeline naming convention.</p>
<p>Example: caltable=[‘M82.gcal’, ‘M82B.gcal’]</p>
</dd>
<dt>field         The list of field names or field ids for which gain solutions</dt><dd><p>are to be computed. Defaults to all fields with the standard
intent.</p>
<p>Example: field=’3C279’, field=’3C279, M82’</p>
</dd>
<dt>intent        A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched. Defaults to <cite>*PHASE*</cite>.</p>
<p>Examples: intent=’’, intent=’<cite>*AMP*,*PHASE*</cite>’</p>
</dd>
<dt>spw           The list of spectral windows and channels for which gain</dt><dd><p>solutions are computed. Defaults to all science spectral
windows.</p>
<p>Examples: spw=’21’, spw=’21, 23’</p>
</dd>
</dl>
<p>antenna       Set of data selection antenna ids
hm_gaintype   The type of gain calibration. The options are ‘gtype’ and</p>
<blockquote>
<div><p>‘gspline’ for CASA gain types = ‘G’ and ‘GSPLINE’ respectively.</p>
</div></blockquote>
<dl>
<dt>calmode       Type of solution. The options are ‘ap’ (amp and phase), ‘p’</dt><dd><p>(phase only) and ‘a’ (amp only).</p>
<p>Examples: calmode=’p’, calmode=’a’, calmode=’ap’</p>
</dd>
<dt>solint        Time solution intervals in CASA syntax. Works for</dt><dd><p>hm_gaintype=’gtype’ only.</p>
<p>Examples: solint=’inf’, solint=’int’, solint=’100sec’</p>
</dd>
<dt>combine       Data axes to combine for solving. Options are  ‘’, ‘scan’,</dt><dd><p>‘spw’, ‘field’ or any comma-separated combination. Works for
hm_gaintype=’gtype’ only.</p>
</dd>
<dt>refant        Reference antenna name(s) in priority order. Defaults to most</dt><dd><p>recent values set in the pipeline context. If no reference
antenna is defined in the pipeline context use the CASA
defaults.</p>
<p>Examples: refant=’DV01’, refant=’DV05,DV07’</p>
</dd>
<dt>refantmode    Controls how the refant is applied. Currently available</dt><dd><p>choices are ‘flex’, ‘strict’, and the default value of ‘’.
Setting to ‘’ allows the pipeline to select the appropriate
mode based on the state of the reference antenna list.</p>
<p>Examples: refantmode=’strict’, refantmode=’’</p>
</dd>
</dl>
<p>solnorm       Normalize average solution amplitudes to 1.0
minblperant   Minimum number of baselines required per antenna for each</p>
<blockquote>
<div><p>solve. Antennas with fewer baselines are excluded from
solutions. Works for hm_gaintype=’gtype’ only.</p>
</div></blockquote>
<dl>
<dt>minsnr        Solutions below this SNR are rejected. Works for</dt><dd><p>hm_gaintype=’channel’ only.</p>
</dd>
<dt>smodel        Point source Stokes parameters for source model (experimental).</dt><dd><p>Defaults to using standard MODEL_DATA column data.</p>
<p>Example: smodel=[1,0,0,0]  - (I=1, unpolarized)</p>
</dd>
<dt>splinetime    Spline timescale (sec). Used for hm_gaintype=’gspline’.</dt><dd><p>Typical splinetime should cover about 3 to 5 calibrator scans.</p>
</dd>
<dt>npointaver    Tune phase-unwrapping algorithm. Used for</dt><dd><p>hm_gaintype=’gspline’. Keep at default value.</p>
</dd>
<dt>phasewrap     Wrap the phase for changes larger than this amount (degrees).</dt><dd><p>Used for hm_gaintype=’gspline’. Keep at default value.</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<p>Compute standard per scan gain solutions that will be used to calibrate
the target:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_gaincal</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_lowgainflag">
<span class="sig-name descname"><span class="pre">hif_lowgainflag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_nmedian</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fnm_lo_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fnm_hi_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmef1_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_lowgainflag.html#hif_lowgainflag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_lowgainflag" title="Link to this definition"></a></dt>
<dd><p>hif_lowgainflag —- Flag antennas with low or high gain</p>
<p>Deviant antennas are detected by outlier analysis of a view showing their
amplitude gains, pre-applying a temporary bandpass and phase solution.
This view is a list of 2D images with axes ‘Scan’ and ‘Antenna’; there
is one image for each spectral window and intent. A flagcmd to flag all data
for an antenna will be generated by any gain that is outside the range
[fnm_lo_limit * median, fnm_hi_limit * median].</p>
<p>Output:</p>
<blockquote>
<div><p>results – The results object for the pipeline task is returned.</p>
</div></blockquote>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis</dt><dd><p>The list of input MeasurementSets. Defaults to the list of
MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>intent</dt><dd><p>A string containing the list of intents to be checked for
antennas with deviant gains. The default is blank, which
causes the task to select the ‘BANDPASS’ intent.</p>
</dd>
<dt>spw</dt><dd><p>The list of spectral windows and channels to which the
calibration will be applied. Defaults to all science windows
in the pipeline context.</p>
<p>Examples: spw=’17’, spw=’11, 15’</p>
</dd>
<dt>refant</dt><dd><p>A string containing a prioritized list of reference antenna
name(s) to be used to produce the gain table. Defaults to the
value(s) stored in the pipeline context. If undefined in the
pipeline context defaults to the CASA reference antenna naming
scheme.</p>
<p>Examples: refant=’DV01’, refant=’DV06,DV07’</p>
</dd>
<dt>flag_nmedian</dt><dd><p>Whether to flag figures of merit greater than
<code class="docutils literal notranslate"><span class="pre">fnm_hi_limit</span></code> * median or lower than <code class="docutils literal notranslate"><span class="pre">fnm_lo_limit</span></code> * median.
(default: True)</p>
</dd>
<dt>fnm_lo_limit</dt><dd><p>Flag values lower than <code class="docutils literal notranslate"><span class="pre">fnm_lo_limit</span></code> * median (default: 0.5)</p>
</dd>
<dt>fnm_hi_limit</dt><dd><p>Flag values higher than <code class="docutils literal notranslate"><span class="pre">fnm_hi_limit</span></code> * median (default: 1.5)</p>
</dd>
<dt>niter</dt><dd><p>The maximum number of iterations to run of the sequence:
solve for amplitude gains, assess statistics, flag spw/antenna
combinations that are outliers (default: 2)</p>
</dd>
<dt>tmef1_limit</dt><dd><p>Threshold for “too many entirely flagged” -
the critical fraction of antennas whose solutions are entirely
flagged in the flagging view of a spw for this stage:
if the fraction is equal or greater than this value, then flag
the visibility data from all antennas in this spw
(default: 0.666)</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Flag antennas with low or high gain using recommended thresholds:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_lowgainflag</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_makecutoutimages">
<span class="sig-name descname"><span class="pre">hif_makecutoutimages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsetblc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsettrc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_makecutoutimages.html#hif_makecutoutimages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_makecutoutimages" title="Link to this definition"></a></dt>
<dd><p>hif_makecutoutimages —- Cutout central 1 sq. degree from VLASS QL, SE, and Coarse Cube images</p>
<p>Cutout central 1 sq. degree from VLASS QL, SE, and Coarse Cube images</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           List of visibility data files.</dt><dd><p>These may be ASDMs, tar files of ASDMs, MSs,
or tar files of MSs.
If ASDM files are specified, they will be converted to
MS format.</p>
<p>example: vis=[‘X227.ms’, ‘asdms.tar.gz’]</p>
</dd>
<dt>offsetblc     -x and -y offsets to the bottom lower corner (blc)</dt><dd><p>in arcseconds</p>
</dd>
<dt>offsettrc     +x and +y offsets to the top right corner (trc)</dt><dd><p>in arcseconds</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Basic makecutoutimages task</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makecutoutimages</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_makeimages">
<span class="sig-name descname"><span class="pre">hif_makeimages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_masking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_sidelobethreshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_noisethreshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_lownoisethreshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_negativethreshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_minbeamfrac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_growiterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_dogrowprune</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_minpercentchange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_fastnoise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_nsigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_perchanweightdensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_npixels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_cyclefactor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_minpsffraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_maxpsffraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_weighting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_cleaning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tlimit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drcorrect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masklimit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cleancontranges</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calcsb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_mosweight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_on_export</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vlass_plane_reject_im</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_makeimages.html#hif_makeimages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_makeimages" title="Link to this definition"></a></dt>
<dd><p>hif_makeimages —- Compute clean map</p>
<p>Compute clean results from a list of specified targets.</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis                     The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
</dl>
<p>target_list             Dictionary specifying targets to be imaged; blank will read list from context
hm_masking              Clean masking mode. Options are ‘centralregion’, ‘auto’,</p>
<blockquote>
<div><p>‘manual’ and ‘none’</p>
</div></blockquote>
<p>hm_sidelobethreshold    sidelobethreshold * the max sidelobe level
hm_noisethreshold       noisethreshold * rms in residual image
hm_lownoisethreshold    lownoisethreshold * rms in residual image
hm_negativethreshold    negativethreshold * rms in residual image
hm_minbeamfrac          Minimum beam fraction for pruning
hm_growiterations       Number of binary dilation iterations for growing the mask
hm_dogrowprune          Do pruning on the grow mask</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<p>hm_minpercentchange     Mask size change threshold
hm_fastnoise            Faster noise calculation for automask or nsigma stopping</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<p>hm_nsigma               Multiplicative factor for rms-based threshold stopping
hm_perchanweightdensity Calculate the weight density for each channel independently</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<p>hm_npixels              Number of pixels to determine uv-cell size for super-uniform weighting
hm_cyclefactor          Scaling on PSF sidelobe level to compute the minor-cycle stopping threshold
hm_minpsffraction       PSF fraction that marks the max depth of cleaning in the minor cycle
hm_maxpsffraction       PSF fraction that marks the minimum depth of cleaning in the minor cycle
hm_weighting            Weighting scheme (natural,uniform,briggs,briggsabs[experimental],briggsbwtaper[experimental])
hm_cleaning             Pipeline cleaning mode
tlimit                  Times the sensitivity limit for cleaning
drcorrect               Override the default heuristics-based DR correction (for ALMA data only)
masklimit               Times good mask pixels for cleaning
cleancontranges         Clean continuum frequency ranges in cubes
calcsb                  Force (re-)calculation of sensitivities and beams
hm_mosweight            Mosaic weighting</p>
<blockquote>
<div><p>Defaults to ‘’ to enable the automatic heuristics calculation.
Can be set to True or False manually.</p>
</div></blockquote>
<dl>
<dt>overwrite_on_export     Replace existing image products when h/hifa/hifv_exportdata is</dt><dd><p>called.
If False, images that would have the same FITS name on export,
are amended to include a version number.  For example, if
oussid.J1248-4559_ph.spw21.mfs.I.pbcor.fits would already be
exported by a previous call to hif_makeimags, then
‘oussid.J1248-4559_ph.spw21.mfs.I.pbcor.v2.fits’ would also be
exported to the products/ directory. The first exported
product retains the same name.  Additional products start
counting with ‘v2’, ‘v3’, etc.</p>
</dd>
<dt>vlass_plane_reject_im   Only used for the ‘VLASS-SE-CUBE’ imaging mode. default: True</dt><dd><p>If True, reject VLASS Coarse Cube planes with high flagging percentages or outlier beam sizes (see the heuristics details below)
If False, do not perform the post-imaging VLASS Coarse Cube plane rejection.
If the input value is a dictionary, the plane rejection heuristics will be performed with custom thresholds.
The optional keys could be:
- exclude_spw, default: ‘’</p>
<blockquote>
<div><p>Spectral windows to be excluded from the VLASS Coarse Cube post-imaging plane rejection consideration, i.e. always preserve.</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>flagpct_thresh, default: 0.8</dt><dd><p>The flagging percentage across the entire mosaic to be considered to be high flagging level for the plane rejection.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>beamdev_thresh: default: 0.2</dt><dd><p>Threshold for the fractional beam deviation from the expected value required for the plane rejection.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>parallel                Clean images using MPI cluster</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Compute clean results for all imaging targets defined in a previous hif_makeimlist or hif_editimlist call:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makeimages</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Compute clean results overriding automatic masking choice:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makeimages</span><span class="p">(</span><span class="n">hm_masking</span><span class="o">=</span><span class="s1">&#39;centralregion&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_makeimlist">
<span class="sig-name descname"><span class="pre">hif_makeimlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imagename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linesfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uvrange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">specmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outframe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_imsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_cell</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calmaxpix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phasecenter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nchan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">robust</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uvtaper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clearlist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_eb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calcsb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datatype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datacolumn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_makeimlist.html#hif_makeimlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_makeimlist" title="Link to this definition"></a></dt>
<dd><p>hif_makeimlist —- Compute list of clean images to be produced</p>
<p>Generate a list of images to be cleaned. By default, the list will include
one image per science target per spw. Calibrator targets can be selected
by setting appropriate values for <code class="docutils literal notranslate"><span class="pre">intent</span></code>.</p>
<p>By default, the output image cell size is set to the minimum cell size
consistent with the UV coverage.</p>
<p>By default, the image size in pixels is set to values determined by the
cell size and the primary beam size. If a calibrator is being
imaged (intents ‘PHASE’, ‘BANDPASS’, ‘FLUX’ or ‘AMPLITUDE’) then the
image dimensions are limited to ‘calmaxpix’ pixels.</p>
<p>By default, science target images are cubes and calibrator target images
are mfs. Science target images may be mosaics or single fields.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
“”: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
</dl>
<p>imagename     Prefix for output image names, “” for automatic.
intent        Select intents for which associated fields will be imaged.</p>
<blockquote>
<div><p>Possible choices are PHASE, BANDPASS, AMPLITUDE, CHECK and
TARGET or combinations thereof.</p>
<p>Examples: ‘PHASE,BANDPASS’, ‘TARGET’</p>
</div></blockquote>
<dl class="simple">
<dt>field         Select fields to image. Use field name(s) NOT id(s). Mosaics</dt><dd><p>are assumed to have common source / field names.  If intent is
specified only fields with data matching the intent will be
selected. The fields will be selected from MeasurementSets in
“vis”.
“” Fields matching intent, one image per target source.</p>
</dd>
<dt>spw           Select spectral windows to image.</dt><dd><p>“”: Images will be computed for all science spectral windows.</p>
</dd>
</dl>
<p>contfile      Name of file with frequency ranges to use for continuum images.
linesfile     Name of file with line frequency ranges to exclude for continuum images.
uvrange       Select a set of uv ranges to image.</p>
<blockquote>
<div><p>“”: All uv data is included</p>
<p>Examples: ‘0~1000klambda’, [‘0~100klambda’, 100~1000klambda]</p>
</div></blockquote>
<dl>
<dt>specmode      Frequency imaging mode, ‘mfs’, ‘cont’, ‘cube’, ‘repBW’. ‘’</dt><dd><p>defaults to ‘cube’ if <code class="docutils literal notranslate"><span class="pre">intent</span></code> parameter includes ‘TARGET’
otherwise ‘mfs’.</p>
<p>specmode=’mfs’ produce one image per source and spw
specmode=’cont’ produce one image per source and aggregate</p>
<blockquote>
<div><p>over all specified spws</p>
</div></blockquote>
<dl class="simple">
<dt>specmode=’cube’ produce an LSRK frequency cube, channels are</dt><dd><p>specified in frequency</p>
</dd>
<dt>specmode=’repBW’ produce an LSRK frequency cube at</dt><dd><p>representative channel width</p>
</dd>
</dl>
</dd>
<dt>outframe      velocity frame of output image (LSRK, ‘’ for automatic)</dt><dd><p>(not implemented)</p>
</dd>
<dt>hm_imsize     Image X and Y size in pixels or PB level for single fields.</dt><dd><p>The explicit sizes must be even and divisible by 2,3,5,7 only.
The default values are derived as follows:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Determine phase center and spread of field centers
around it.</p></li>
<li><p>Set the size of the image to cover the spread of field
centers plus a border of width 0.75 * beam radius, to
first null.</p></li>
<li><p>Divide X and Y extents by cell size to arrive at the
number of pixels required.</p></li>
</ol>
</div></blockquote>
<p>The PB level setting for single fields leads to an imsize
extending to the specified level plus 5% padding in all
directions.</p>
<p>Examples: ‘0.3pb’, [120, 120]</p>
</dd>
<dt>hm_cell       Image X and Y cell sizes. “” computes the cell size based on</dt><dd><p>the UV coverage of all the fields to be imaged and uses a
5 pix per beam sampling.
The pix per beam specification (‘&lt;number&gt;ppb’) uses the above
default cell size (‘5ppb’) and scales it accordingly.
The cells can also be specified as explicit measures.</p>
<p>Examples: ‘3ppb’, [‘0.5arcsec’, ‘0.5arcsec’]</p>
</dd>
<dt>calmaxpix     Maximum image X or Y size in pixels if a calibrator is being</dt><dd><p>imaged (‘PHASE’, ‘BANDPASS’, ‘AMPLITUDE’ or ‘FLUX’ intent).</p>
</dd>
<dt>phasecenter   Direction measure or field id of the image center.</dt><dd><p>The default phase center is set to the mean of the field
directions of all fields that are to be image together.</p>
<p>Examples: ‘J2000 19h30m00 -40d00m00’, 0</p>
</dd>
<dt>nchan         Total number of channels in the output image(s)</dt><dd><p>-1 selects enough channels to cover the data selected by
spw consistent with start and width.</p>
</dd>
<dt>start         Start of image frequency axis as frequency or velocity.</dt><dd><p>“” selects start frequency automatically.</p>
</dd>
<dt>width         Output channel width.</dt><dd><p>Difference in frequency between 2 selected channels for
frequency mode images.
‘pilotimage’ for 15 MHz / 8 channel heuristic</p>
</dd>
<dt>nbins         Channel binning factors for each spw.</dt><dd><p>Format: ‘spw1:nb1,spw2:nb2,…’ with optional wildcards: ‘<a href="#id17"><span class="problematic" id="id18">*</span></a>:nb’</p>
<p>Examples: ‘9:2,11:4,13:2,15:8’, ‘<a href="#id19"><span class="problematic" id="id20">*</span></a>:2’</p>
</dd>
<dt>robust        Briggs robustness parameter</dt><dd><p>Values range from -2.0 (uniform) to 2.0 (natural)</p>
</dd>
</dl>
<p>uvtaper       uv-taper on outer baselines
clearlist     Clear any existing target list
per_eb        Make an image target per EB
per_session   Make an image target per session
calcsb        Force (re-)calculation of sensitivities and beams
datatype      Data type(s) to image. The default ‘’ selects the best</p>
<blockquote>
<div><p>available data type (e.g. selfcal over regcal) with
an automatic fallback to the next available data type.
With the <code class="docutils literal notranslate"><span class="pre">datatype</span></code> parameter one can force the use of only
given data type(s) without a fallback. The data type(s) are
specified as comma separated string of keywords. Accepted
values are the standard data types such as
‘REGCAL_CONTLINE_ALL’, ‘REGCAL_CONTLINE_SCIENCE’,
‘SELFCAL_CONTLINE_SCIENCE’, ‘REGCAL_LINE_SCIENCE’,
‘SELFCAL_LINE_SCIENCE’. The shortcuts ‘regcal’ and ‘selfcal’
are also accepted. They are expanded into the full data types
using the <code class="docutils literal notranslate"><span class="pre">specmode</span></code> parameter and the available data types for
the given MSes. In addition the strings ‘best’ and ‘all’ are
accepted, where ‘best’ means the above mentioned automatic
mode and ‘all’ means all available data types for a given
specmode. The data type strings are case insensitive.</p>
<dl class="simple">
<dt>Examples: ‘selfcal’, ‘regcal, ‘selfcal,regcal’,</dt><dd><p>‘REGCAL_LINE_SCIENCE,selfcal_line_science’</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>datacolumn    Data column to image. Only to be used for manual overriding</dt><dd><p>when the automatic choice by data type is not appropriate.</p>
</dd>
</dl>
<p>parallel      Use MPI cluster where possible</p>
<p>——— examples ———————————————————–</p>
<p>1. Make a list of science target images to be cleaned, one image per science
spw.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makeimlist</span><span class="p">()</span>
</pre></div>
</div>
<p>2. Make a list of PHASE and BANDPASS calibrator targets to be imaged,
one image per science spw.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makeimlist</span><span class="p">(</span><span class="n">intent</span><span class="o">=</span><span class="s1">&#39;PHASE,BANDPASS&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>3. Make a list of PHASE calibrator images observed in spw 1, images limited to
50 pixels on a side.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makeimlist</span><span class="p">(</span><span class="n">intent</span><span class="o">=</span><span class="s1">&#39;PHASE&#39;</span><span class="p">,</span><span class="n">spw</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="n">calmaxpix</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_makermsimages">
<span class="sig-name descname"><span class="pre">hif_makermsimages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_makermsimages.html#hif_makermsimages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_makermsimages" title="Link to this definition"></a></dt>
<dd><p>hif_makermsimages —- Create RMS images for VLASS data.</p>
<p>Create RMS images for VLASS data.</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           List of visibility data files. These may be ASDMs, tar files of ASDMs,</dt><dd><p>MSs, or tar files of MSs, If ASDM files are specified, they will be
converted  to MS format.</p>
<p>example: vis=[‘X227.ms’, ‘asdms.tar.gz’]</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Basic makermsimages task</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_makermsimages</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_mstransform">
<span class="sig-name descname"><span class="pre">hif_mstransform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputvis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chanbin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timebin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_mstransform.html#hif_mstransform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_mstransform" title="Link to this definition"></a></dt>
<dd><p>hif_mstransform —- Create new MeasurementSets for science target imaging</p>
<p>Create new MeasurementSets for imaging from the corrected column of the input
MeasurementSet via a single call to mstransform with all data selection parameters.
By default, all science target data is copied to the new MS. The
new MeasurementSet is not re-indexed to the selected data and the new MS will
have the same source, field, and spw names and ids as it does in the parent MS.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>outputvis     The list of output transformed MeasurementSets to be used for</dt><dd><p>imaging. The output list must be the same length as the input
list. The default output name defaults to
&lt;msrootname&gt;_targets.ms</p>
<dl class="simple">
<dt>Examples: ‘ngc5921.ms’,</dt><dd><p>[‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
</dl>
</dd>
<dt>field         Select fields name(s) or id(s) to transform. Only fields with</dt><dd><p>data matching the intent will be selected.</p>
<p>Examples: ‘3C279’, ‘Centaurus*’, ‘3C279,J1427-421’</p>
</dd>
<dt>intent        Select intents for which associated fields will be imaged.</dt><dd><p>By default only TARGET data is selected.</p>
<p>Examples: ‘PHASE,BANDPASS’</p>
</dd>
<dt>spw           Select spectral window/channels to image. By default all</dt><dd><p>science spws for which the specified intent is valid are
selected.</p>
</dd>
<dt>chanbin       Width (bin) of input channels to average to form an output</dt><dd><p>channel. If chanbin &gt; 1 then chanaverage is automatically
switched to True.</p>
</dd>
<dt>timebin       Bin width for time averaging. If timebin &gt; 0s then</dt><dd><p>timeaverage is automatically switched to True.</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Create a science target MS from the corrected column in the input MS.</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_mstransform</span><span class="p">()</span>
</pre></div>
</div>
<p>2. Make a phase and bandpass calibrator targets MS from the corrected
column in the input MS.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_mstransform</span><span class="p">(</span><span class="n">intent</span><span class="o">=</span><span class="s1">&#39;PHASE,BANDPASS&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_rawflagchans">
<span class="sig-name descname"><span class="pre">hif_rawflagchans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_hilo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fhl_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fhl_minsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_bad_quadrant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fbq_hilo_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fbq_antenna_frac_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fbq_baseline_frac_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_rawflagchans.html#hif_rawflagchans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_rawflagchans" title="Link to this definition"></a></dt>
<dd><p>hif_rawflagchans —- Flag deviant baseline/channels in raw data</p>
<p>hif_rawflagchans flags deviant baseline/channels in the raw data.</p>
<p>The flagging views used are derived from the raw data for the specified
intent - default is BANDPASS.</p>
<p>Bad baseline/channels are flagged for all intents, not just the
one that is the basis of the flagging views.</p>
<p>For each spectral window the flagging view is a 2d image with axes
‘channel’ and ‘baseline’. The pixel for each channel, baseline is the
time average of the underlying unflagged raw data.</p>
<p>The baseline axis is labeled by numbers of form id1.id2 where id1 and id2
are the IDs of the baseline antennas. Both id1 and id2 run over all
antenna IDs in the observation. This means that each baseline is shown
twice but has the benefit that ‘bad’ antennas are easily identified by
eye.</p>
<p>Three flagging methods are available:</p>
<p>If parameter <code class="docutils literal notranslate"><span class="pre">flag_hilo</span></code> is set True then outliers from the median
of each flagging view will be flagged.</p>
<p>If parameter <code class="docutils literal notranslate"><span class="pre">flag_bad_quadrant</span></code> is set True then a simple 2 part
test is used to check for bad antenna quadrants and/or bad baseline
quadrants. Here a ‘quadrant’ is defined simply as one quarter of the
channel axis. The first part of the test is to note as ‘suspect’ those
points further from the view median than <code class="docutils literal notranslate"><span class="pre">fbq_hilo_limit</span></code> * MAD.
The second part is to flag entire antenna/quadrants if their
fraction of suspect points exceeds <code class="docutils literal notranslate"><span class="pre">fbq_antenna_frac_limit</span></code>.
Failing that, entire baseline/quadrants may be flagged if their
fraction of suspect points exceeds <code class="docutils literal notranslate"><span class="pre">fbq_baseline_frac_limit</span></code>.
Suspect points are not flagged unless as part of a bad antenna or
baseline quadrant.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<p>vis                     List of input MeasurementSets.</p>
<blockquote>
<div><p>default: [] - Use the MeasurementSets currently known to the pipeline
context.</p>
</div></blockquote>
<dl>
<dt>spw                     The list of spectral windows and channels to which the calibration</dt><dd><p>will be applied. Defaults to all science windows in the pipeline
context.</p>
<p>example: spw=’17’, spw=’11, 15’</p>
</dd>
<dt>intent                  A string containing the list of intents to be checked for antennas</dt><dd><p>with deviant gains. The default is blank, which causes the task to select
the ‘BANDPASS’ intent.</p>
<p>example: intent=’<cite>*BANDPASS*</cite>’</p>
</dd>
<dt>flag_hilo               True to flag channel/baseline data further from the view</dt><dd><p>median than fhl_limit * MAD.</p>
</dd>
<dt>fhl_limit               If flag_hilo is True then flag channel/baseline data</dt><dd><p>further from the view median than fhl_limit * MAD.</p>
</dd>
<dt>fhl_minsample           Do no flagging if the view median and MAD are derived</dt><dd><p>from fewer than fhl_minsample view pixels.</p>
</dd>
<dt>flag_bad_quadrant       True to search for and flag bad antenna quadrants</dt><dd><p>and baseline quadrants. Here a /’quadrant/’ is one
quarter of the channel axis.</p>
</dd>
<dt>fbq_hilo_limit          If flag_bad_quadrant is True then channel/baselines further</dt><dd><p>from the view median than fbq_hilo_limit * MAD will be noted as
‘suspect’. If there are enough of them to indicate that an antenna or
baseline quadrant is bad then all channel/baselines in that quadrant will
be flagged.</p>
</dd>
<dt>fbq_antenna_frac_limit  If flag_bad_quadrant is True and the fraction of</dt><dd><p>suspect channel/baselines in a particular antenna/quadrant exceeds
fbq_antenna_frac_limit then all data for that antenna/quadrant will
be flagged.</p>
</dd>
<dt>fbq_baseline_frac_limit If flag_bad_quadrant is True and the fraction of</dt><dd><p>suspect channel/baselines in a particular baseline/quadrant exceeds
fbq_baseline_frac_limit then all data for that baseline/quadrant will
be flagged.</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Flag bad quadrants and wild outliers, default method:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_rawflagchans</span><span class="p">()</span>
</pre></div>
</div>
<p>equivalent to:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_rawflagchans</span><span class="p">(</span><span class="n">flag_hilo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fhl_limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">flag_bad_quadrant</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fbq_hilo_limit</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">fbq_antenna_frac_limit</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">fbq_baseline_frac_limit</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_refant">
<span class="sig-name descname"><span class="pre">hif_refant</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hm_refant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geometry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flagging</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refantignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_refant.html#hif_refant"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_refant" title="Link to this definition"></a></dt>
<dd><p>hif_refant —- Select the best reference antennas</p>
<p>The hif_refant task selects a list of reference antennas and stores them
in the pipeline context in priority order.</p>
<p>The priority order is determined by a weighted combination of scores derived
by the antenna selection heuristics. In manual mode the reference antennas
can be set by hand.</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl class="simple">
<dt>vis           The list of input MeasurementSets. Defaults to the list of MeasurementSets</dt><dd><p>in the pipeline context.
example: [‘M31.ms’]</p>
</dd>
<dt>field         The comma delimited list of field names or field ids for which flagging</dt><dd><p>scores are computed if hm_refant=’automatic’ and  flagging = True
example: ‘’ (Default to fields with the specified intents), ‘3C279’, ‘3C279,M82’</p>
</dd>
<dt>spw           A string containing the comma delimited list of spectral window ids for</dt><dd><p>which flagging scores are computed if hm_refant=’automatic’ and  flagging = True.
example: ‘’ (all spws observed with the specified intents), ‘11,13,15,17’</p>
</dd>
<dt>intent        A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched. Defaults to all supported
intents.
example: ‘BANDPASS’, ‘AMPLITUDE,BANDPASS,PHASE,POLARIZATION’</p>
</dd>
<dt>hm_refant     The heuristics method or mode for selection the reference</dt><dd><p>antenna. The options are ‘manual’ and ‘automatic. In manual
mode a user supplied reference antenna refant is supplied.
In ‘automatic’ mode the antennas are selected automatically.</p>
</dd>
<dt>refant        The user supplied reference antenna for hm_refant=’manual’. If</dt><dd><p>no antenna list is supplied an empty list is returned.
example: ‘DV05’</p>
</dd>
<dt>geometry      Score antenna by proximity to the center of the array. This</dt><dd><p>option is quick as only the ANTENNA table must be read.
Parameter is available when <a href="#id21"><span class="problematic" id="id22">``</span></a>hm_refant``=’automatic’.</p>
</dd>
<dt>flagging      Score antennas by percentage of unflagged data.  This option</dt><dd><p>requires computing flagging statistics.
Parameter is available when <a href="#id23"><span class="problematic" id="id24">``</span></a>hm_refant``=’automatic’.</p>
</dd>
<dt>parallel      Execute using CASA HPC functionality, if available.</dt><dd><p>options: ‘automatic’, ‘true’, ‘false’, True, False
default: None (equivalent to False)</p>
</dd>
<dt>refantignore  string list to be ignored as reference antennas.</dt><dd><p>example:  refantignore=’ea02,ea03’</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Compute the references antennas to be used for bandpass and gain calibration.</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_refant</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_selfcal">
<span class="sig-name descname"><span class="pre">hif_selfcal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refantignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restore_resources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_solints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amplitude_selfcal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gaincal_minsnr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minsnr_to_proceed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_beam_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_cal_mode_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rel_thresh_scaling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dividing_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_all_spws</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inf_EB_gaincal_combine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_selfcal.html#hif_selfcal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_selfcal" title="Link to this definition"></a></dt>
<dd><p>hif_selfcal  —- Determine and apply self-calibration with the science target data</p>
<p>Determine and apply self-calibration with the science target data</p>
<p>——— parameter descriptions ———————————————</p>
<dl class="simple">
<dt>vis                     The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
default = “”: use all MeasurementSets in the context</p>
</dd>
<dt>field                   Select fields to image. Use field name(s) NOT id(s). Mosaics</dt><dd><p>are assumed to have common source / field names.  If intent is
specified only fields with data matching the intent will be
selected. The fields will be selected from MeasurementSets in
“vis”.
default= “” Fields matching intent, one image per target source.</p>
</dd>
<dt>spw                     Select spectral windows to image.</dt><dd><p>“”: Images will be computed for all science spectral windows.</p>
</dd>
<dt>contfile                Name of file to specify line-free frequency ranges for selfcal continuum imaging.</dt><dd><p>default=”cont.dat”</p>
</dd>
<dt>apply                   Apply final selfcal solutions back to the input MeasurementSets.</dt><dd><p>default = True</p>
</dd>
<dt>recal                   Always re-do self-calibration even solutions/caltables are found in the Pipeline</dt><dd><p>context or json restore file.
default = False</p>
</dd>
<dt>refantignore            string list to be ignored as reference antennas.</dt><dd><p>example:  refantignore=’ea02,ea03’</p>
</dd>
<dt>restore_resources       Path to the restore resources from a standard run of hif_selfcal.</dt><dd><p>hif_selfcal will automatically do an exhaustive search to lookup/extract/verify
the selfcal restore resources, i.e., selfcal.json and all selfcal-caltable referred
in selfcal.json, starting from working/, to products/ and rawdata/.
If restore_resources is specified, this file path will be evaluated first
before the pre-defined exhaustive search list.
The value can be the file path of <a href="#id25"><span class="problematic" id="id26">*</span></a>auxproducts.tgz file or <a href="#id27"><span class="problematic" id="id28">*</span></a>selfcal.json file.</p>
</dd>
<dt>n_solints               number of solution intervals to attempt for self-calibration.</dt><dd><p>default: 4</p>
</dd>
<dt>amplitude_selfcal       Attempt amplitude self-calibration following phase-only self-calibration;</dt><dd><p>if median time between scans of a given target is &lt; 150s,
solution intervals of 300s and inf will be attempted, otherwise just
inf will be attempted.
default = False</p>
</dd>
<dt>gaincal_minsnr          Minimum S/N for a solution to not be flagged by gaincal.</dt><dd><p>default = 2.0</p>
</dd>
<dt>minsnr_to_proceed       Minimum estimated S/N on a per antenna basis to attempt self-calibration</dt><dd><p>of a source.
default = 3.0</p>
</dd>
<dt>delta_beam_thresh       Allowed fractional change in beam size for selfcalibration to accept</dt><dd><p>results of a solution interval.
default = 0.05</p>
</dd>
<dt>apply_cal_mode_default  Apply mode to use for applycal task</dt><dd><p>during self-calibration; same options as applycal.
default = ‘calflag’</p>
</dd>
<dt>rel_thresh_scaling      Scaling type to determine how clean thresholds</dt><dd><p>per solution interval should be determined going from the starting
clean threshold to 3.0 * RMS for the final solution interval.
default=’log10’, options: ‘linear’, ‘log10’, or ‘loge’ (natural log)</p>
</dd>
<dt>dividing_factor         Scaling factor</dt><dd><p>to determine clean threshold for first self-calibration solution interval.
Equivalent to (Peak S/N / dividing_factor) <a href="#id29"><span class="problematic" id="id30">*</span></a>RMS = First clean threshold;
however, if (Peak S/N / dividing_factor) <a href="#id31"><span class="problematic" id="id32">*</span></a>RMS is &lt; 5.0; a value of 5.0
is used for the first clean threshold.
default = 40 for &lt; 8 GHz; 15 for &gt; 8 GHz</p>
</dd>
<dt>check_all_spws          If True, the S/N of mfs images created on a per-spectral-window basis will</dt><dd><p>be compared at the initial stages final self-calibration.
default=False</p>
</dd>
<dt>inf_EB_gaincal_combine  change gain solution combination parameters for the inf_EB solution interval.</dt><dd><p>if True, the gaincal combine parameter will be set to ‘scan,spw’; if False,
the gaincal combine parameter will be set to ‘scan’.
default=False</p>
</dd>
<dt>parallel                Use MPI cluster where possible, default=’automatic’.</dt><dd><p>options: ‘automatic’, ‘true’, ‘false’, True, False</p>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Run self-calibration and apply solutions to all science targets and spws</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_selfcal</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Run self-calibration and apply solutions to a single science target</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_selfcal</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;3C279&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Run self-calibration with a more relaxed allowed fractional change in the beam size for a solution interval to be successful</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_selfcal</span><span class="p">(</span><span class="n">delta_beam_thresh</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_setjy">
<span class="sig-name descname"><span class="pre">hif_setjy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reffile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normfluxes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reffreq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fluxdensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalebychan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_setjy.html#hif_setjy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_setjy" title="Link to this definition"></a></dt>
<dd><p>hif_setjy —- Fill the model column with calibrated visibilities</p>
<p>Fills the model column with the model visibilities.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets defined in the pipeline context.</p>
</dd>
<dt>field         The list of field names or field ids for which the models are</dt><dd><p>to be set. Defaults to all fields with intent ‘<cite>*AMPLITUDE*</cite>’.</p>
<p>example: field=’3C279’, field=’3C279, M82’</p>
</dd>
<dt>intent        A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched. Defaults to all data
with amplitude intent.</p>
<p>example: intent=’<cite>*AMPLITUDE*</cite>’</p>
</dd>
<dt>spw           The list of spectral windows and channels for which bandpasses are</dt><dd><p>computed. Defaults to all science spectral windows.</p>
<p>example: spw=’11,13,15,17’</p>
</dd>
<dt>model         Model image for setting model visibilities. Not fully</dt><dd><p>supported.</p>
<p>example: see details in help for CASA setjy task</p>
</dd>
<dt>reffile       Path to a file containing flux densities for calibrators unknown to</dt><dd><p>CASA. Values given in this file take precedence over the CASA-derived
values for all calibrators except solar system calibrators. By default the
path is set to the CSV file created by h_importdata, consisting of
catalogue fluxes extracted from the ASDM.</p>
<p>example: reffile=’’, reffile=’working/flux.csv’</p>
</dd>
</dl>
<p>normfluxes    Normalize lookup fluxes.
reffreq       The reference frequency for spix, given with units. Provided to</p>
<blockquote>
<div><p>avoid division by zero. If the flux density is being scaled by spectral
index, then reffreq must be set to whatever reference frequency is correct
for the given fluxdensity and spix. It cannot be determined from vis. On
the other hand, if spix is 0, then any positive frequency can be used and
will be ignored.</p>
<p>example: reffreq=’86.0GHz’, reffreq=’4.65e9Hz’</p>
</div></blockquote>
<dl>
<dt>fluxdensity   Specified flux density [I,Q,U,V] in Jy. Uses [1,0,0,0]</dt><dd><p>flux density for unrecognized sources, and standard flux densities for
ones recognized by ‘standard’, including 3C286, 3C48, 3C147, and several
planets, moons, and asteroids.</p>
<p>example: [3.06,0.0,0.0,0.0]</p>
</dd>
<dt>spix          Spectral index for fluxdensity S = fluxdensity * (freq/reffreq)**spix</dt><dd><p>Only used if fluxdensity is being used. If fluxdensity is positive, and
spix is nonzero, then reffreq must be set too. It is applied in the same
way to all polarizations, and does not account for Faraday rotation or
depolarization.</p>
</dd>
<dt>scalebychan   This determines whether the fluxdensity set in the model is</dt><dd><p>calculated on a per channel basis. If False then only one fluxdensity
value is calculated per spw.</p>
</dd>
<dt>standard      Flux density standard, used if fluxdensity[0] less than 0.0. The</dt><dd><p>options are: ‘Baars’,’Perley 90’,’Perley-Taylor 95’, ‘Perley-Taylor 99’,
‘Perley-Butler 2010’ and ‘Butler-JPL-Horizons 2010’.</p>
<dl class="simple">
<dt>default: ‘Butler-JPL-Horizons 2012’ for solar system object</dt><dd><p>‘Perley-Butler 2010’ otherwise</p>
</dd>
</dl>
</dd>
</dl>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Set the model flux densities for all the amplitude calibrators:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_setjy</span><span class="p">()</span>
</pre></div>
</div>
<p>——— issues ———————————————————–</p>
<p>Support for the setjy spix parameter needs to be added.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_setmodels">
<span class="sig-name descname"><span class="pre">hif_setmodels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refintent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transfer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transintent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reffile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normfluxes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalebychan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_setmodels.html#hif_setmodels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_setmodels" title="Link to this definition"></a></dt>
<dd><p>hif_setmodels —- Set calibrator source models</p>
<p>Set model fluxes values for calibrator reference and transfer sources using lookup
values. By default the reference sources are the flux calibrators and the transfer
sources are the bandpass, phase, and check source calibrators. Reference sources
which are also in the transfer source list are removed from the transfer source list.</p>
<p>Built-in lookup tables are used to compute models for solar system object calibrators.
Point source models are used for other calibrators with flux densities provided in the reference file.
Normalized fluxes are computed for transfer sources if the <code class="docutils literal notranslate"><span class="pre">normfluxes</span></code> parameter is
set to True.</p>
<p>The default reference file is ‘flux.csv’ in the current working directory.
This file is usually created in the importdata stage. The file is in
‘csv’ format and contains the following comma delimited columns.</p>
<p>vis,fieldid,spwid,I,Q,U,V,pix,comment</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the pipeline context.</p>
<p>example: [‘M32A.ms’, ‘M32B.ms’]</p>
</dd>
<dt>reference     A string containing a comma delimited list of  field names</dt><dd><p>defining the reference calibrators. Defaults to field names with
intent ‘AMPLITUDE’.</p>
<p>example: ‘M82,3C273’</p>
</dd>
<dt>refintent     A string containing a comma delimited list of intents</dt><dd><p>used to select the reference calibrators. Defaults to ‘AMPLITUDE’.</p>
<p>example: ‘BANDPASS’</p>
</dd>
<dt>transfer      A string containing a comma delimited list of  field names</dt><dd><p>defining the transfer calibrators. Defaults to field names with
intent ‘’.</p>
<p>example: ‘J1328+041,J1206+30’</p>
</dd>
<dt>transintent   A string containing a comma delimited list of intents</dt><dd><p>defining the transfer calibrators. Defaults to ‘BANDPASS,PHASE,CHECK’.
‘’ stands for no transfer sources.</p>
<p>example: ‘PHASE’</p>
</dd>
<dt>reffile       The reference file containing a lookup table of point source models</dt><dd><p>This file currently defaults to ‘flux.csv’ in the working directory. This
file must conform to the standard pipeline ‘flux.csv’ format
example: ‘myfluxes.csv’</p>
</dd>
</dl>
<p>normfluxes    Normalize the transfer source flux densities.
scalebychan   Scale the flux density on a per channel basis or else on a per spw basis</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Set model fluxes for the flux, bandpass, phase, and check sources.</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_setmodels</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_transformimagedata">
<span class="sig-name descname"><span class="pre">hif_transformimagedata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputvis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datacolumn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chanbin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timebin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clear_pointing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modify_weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wtmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_transformimagedata.html#hif_transformimagedata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_transformimagedata" title="Link to this definition"></a></dt>
<dd><p>hif_transformimagedata —- Extract fields for the desired VLASS image to a new MS and reset weights if desired</p>
<p>Extract fields for the desired VLASS image to a new MS and reset weights if desired</p>
<p>Output:</p>
<p>results – The results object for the pipeline task is returned.</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis            List of visibility data files. These may be ASDMs, tar files of ASDMs,</dt><dd><p>MSs, or tar files of MSs, If ASDM files are specified, they will be
converted  to MS format.</p>
<p>example: vis=[‘X227.ms’, ‘asdms.tar.gz’]</p>
</dd>
</dl>
<p>outputvis      The output MeasurementSet.
field          Set of data selection field names or ids, ‘’ for all.
intent         Set of data selection intents, ‘’ for all.
spw            Set of data selection spectral window ids ‘’ for all.
datacolumn     Select spectral windows to split. The standard CASA options are</p>
<blockquote>
<div><p>supported</p>
<p>example: ‘data’, ‘model’</p>
</div></blockquote>
<p>chanbin        Bin width for channel averaging.
timebin        Bin width for time averaging.
replace        If a split was performed delete the parent MS and remove it from the context.</p>
<blockquote>
<div><p>example: True or False</p>
</div></blockquote>
<p>clear_pointing Clear the pointing table.
modify_weights Re-initialize the weights.
wtmode         optional weight initialization mode when modify_weights=True</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Basic transformimagedata task</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_transformimagedata</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pipeline.hif.cli.hif_uvcontsub">
<span class="sig-name descname"><span class="pre">hif_uvcontsub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fitorder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pipeline/hif/cli/hif_uvcontsub.html#hif_uvcontsub"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pipeline.hif.cli.hif_uvcontsub" title="Link to this definition"></a></dt>
<dd><p>hif_uvcontsub —- Fit and subtract continuum from the data</p>
<p>hif_uvcontsub fits the continuum for the frequency ranges given in the cont.dat
file, subtracts that fit from the uv data and generates a new set of MSes
containing the continuum subtracted (i.e. line) data. The fit is attempted
for all science targets and spws. If a fit is impossible, the corresponding
data selection is not written to the output line MS.</p>
<p>results – The results object for the pipeline task is returned</p>
<p>——— parameter descriptions ———————————————</p>
<dl>
<dt>vis           The list of input MeasurementSets. Defaults to the list of</dt><dd><p>MeasurementSets specified in the h_init or hif_importdata task.
‘’: use all MeasurementSets in the context</p>
<p>Examples: ‘ngc5921.ms’, [‘ngc5921a.ms’, ngc5921b.ms’, ‘ngc5921c.ms’]</p>
</dd>
<dt>field         The list of field names or field ids for which UV continuum</dt><dd><p>fits are computed. Defaults to all fields.
Examples: ‘3C279’, ‘3C279,M82’</p>
</dd>
<dt>intent        A string containing a comma delimited list of intents against</dt><dd><p>which the selected fields are matched.
‘’: Defaults to all data with TARGET intent.</p>
</dd>
<dt>spw           The list of spectral windows and channels for which uv</dt><dd><p>continuum fits are computed.
‘’, Defaults to all science spectral windows.
Example: ‘11,13,15,17’</p>
</dd>
<dt>fitorder      Polynomial order for the continuum fits per source and spw.</dt><dd><p>Defaults to {} which means fit order 1 for all sources and
spws. If an explicit dictionary is given then all unspecified
selections still default to 1.
Example: {‘3C279’: {‘15’: 1, ‘17’: 2}, ‘M82’: {‘13’: 2}}</p>
</dd>
</dl>
<p>parallel      Execute using CASA HPC functionality, if available.</p>
<p>——— examples ———————————————————–</p>
<ol class="arabic simple">
<li><p>Fit and subtract continuum for all science targets and spws</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_uvcontsub</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Fit and subtract continuum only for a subsect of fields</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_uvcontsub</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s1">&#39;3C279,M82&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Fit and subtract continuum only for a subsect of spws</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_uvcontsub</span><span class="p">(</span><span class="n">spw</span><span class="o">=</span><span class="s1">&#39;11,13&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Override automatic fit order choice</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_uvcontsub</span><span class="p">(</span><span class="n">fitorder</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;3C279&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;15&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;17&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="s1">&#39;M82&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;13&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}})</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2024, Pipeline Dev. Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>