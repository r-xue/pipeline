

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>hifa_bpsolint &mdash; Pipeline unknown documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom_theme.css?v=678032d9" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=3f1b9271"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Pipeline
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Pipeline Tasks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pipeline_tasks/pipeline_tasks.html">Pipeline Heuristics Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Task (sphinx-autosummary)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.h.cli.html">pipeline.h.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.hif.cli.html">pipeline.hif.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.hifa.cli.html">pipeline.hifa.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.hifv.cli.html">pipeline.hifv.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.hsd.cli.html">pipeline.hsd.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.hsdn.cli.html">pipeline.hsdn.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.domain.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.infrastructure.launcher.html">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.domain.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.infrastructure.launcher.html">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Heuristics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../heuristics/field_parameter.html">Field parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../heuristics/FlaggingTasks.html">Pipeline Flagging Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Releases etc.</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases.html">Past Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modular.html">Run the Pipeline in a Conda environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dependencies.html">Dependencies of <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../basics.html"><code class="docutils literal notranslate"><span class="pre">pipeline.domain</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basics.html#module-pipeline.infrastructure.launcher"><code class="docutils literal notranslate"><span class="pre">pipeline.infrastructure.launcher</span></code> module</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Task Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../task_classes.html"><code class="docutils literal notranslate"><span class="pre">pipeline.hifa.tasks</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../task_classes.html#module-pipeline.hif.tasks"><code class="docutils literal notranslate"><span class="pre">pipeline.hif.tasks</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../task_classes.html#module-pipeline.hif"><code class="docutils literal notranslate"><span class="pre">pipeline.hif</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../task_classes.html#pipeline-inheritance-diagrams">Pipeline Inheritance Diagrams</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/ways_to_run_the_pipeline.html">Ways to run the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/comparing_pipeline_executions.html">Comparing pipeline executions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/building_the_pipeline.html">Building the pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/ALMA-Imaging-Workflow.html">ALMA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/VLA-Imaging-Workflow.html">VLA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/VLASS-SE-CONT-Imaging-Workflow.html">VLASS-SE-CONT imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/VLASS-SE-CUBE-Imaging-Workflow.html">VLASS-SE-CUBE imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/selfcal_workflow.html">VLASS Selfcal &amp; Restore workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/pipeline_tests.html">Pipeline testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/DataType_Testing.html">DataType Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/QA_scores.html">Pipeline Quality Assurance (QA) Score Class Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/DeveloperDocumentation.html">Pipeline developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/python3_conversion_notes.html">Python 3 conversion notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/recipes.html">Pipeline Recipes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples Notes (from Jupyter Notebooks)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/test1.html">test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Notes (from .rst)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/test2.html">Example 1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Pipeline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">hifa_bpsolint</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/_taskdocs/hifa/hifa_bpsolint_task.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hifa-bpsolint">
<h1>hifa_bpsolint<a class="headerlink" href="#hifa-bpsolint" title="Link to this heading"></a></h1>
<section id="task-description">
<h2>Task description<a class="headerlink" href="#task-description" title="Link to this heading"></a></h2>
<p>The optimal bandpass phaseup time and frequency solution intervals required
to achieve the required signal-to-noise ratio is estimated based on nominal
ALMA array characteristics the metadata associated with the observation.</p>
<p>The phaseup gain time and bandpass frequency intervals are determined as
follows:</p>
<ul class="simple">
<li><p>For each data set the list of source(s) to use for bandpass solution
signal-to-noise estimation is compiled based on the values of the
<code class="docutils literal notranslate"><span class="pre">field</span></code>, <code class="docutils literal notranslate"><span class="pre">intent</span></code>, and <code class="docutils literal notranslate"><span class="pre">spw</span></code> parameters.</p></li>
<li><p>Source fluxes are determined for each spw and source combination.</p></li>
<li><p>Fluxes in Jy are derived from the pipeline context.</p></li>
<li><p>Pipeline context fluxes are derived from the online flux calibrator
catalog, the ASDM, or the user via the flux.csv file.</p></li>
<li><p>If no fluxes are available the task terminates.</p></li>
<li><p>Atmospheric calibration and observations scans are determined for each
spw and source combination.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">intent</span></code> is set to ‘PHASE’ are there are no atmospheric scans
associated with the ‘PHASE’ calibrator, ‘TARGET’ atmospheric scans will be
used instead.</p></li>
<li><p>If atmospheric scans cannot be associated with any of the spw and source
combinations the task terminates.</p></li>
<li><p>Science spws are mapped to atmospheric spws for each science spw and
source combination.</p></li>
<li><p>If mappings cannot be determined for any of the spws the task terminates.</p></li>
<li><p>The median Tsys value for each atmospheric spw and source combination is
determined from the SYSCAL table. Medians are computed first by channel,
then by antenna, in order to reduce sensitivity to deviant values.</p></li>
<li><p>The science spw parameters, exposure time(s), and integration time(s) are
determined.</p></li>
<li><p>The phase-up time interval, in time units and number of integrations
required to meet the <code class="docutils literal notranslate"><span class="pre">phaseupsnr</span></code> are computed, along with the
sensitivity in mJy and the signal-to-noise per integration. Nominal Tsys
and sensitivity values per receiver band provided by the ALMA project are
used for this estimate.</p></li>
<li><p>Warnings are issued if estimated phase-up gain time solution would contain
fewer than <code class="docutils literal notranslate"><span class="pre">minphaseupints</span></code> solutions.</p></li>
<li><p>The frequency interval, in MHz and number of channels required to meet the
<code class="docutils literal notranslate"><span class="pre">bpsnr</span></code> are computed, along with the per channel sensitivity in mJy and
the per channel signal-to-noise. Nominal Tsys and sensitivity values per
receiver band provided by the ALMA project are used for this estimate.</p></li>
<li><p>Warnings are issued if estimated bandpass solution would contain fewer
than <code class="docutils literal notranslate"><span class="pre">minbpnchan</span></code> solutions.</p></li>
<li><p>If strong atmospheric features are detected in the Tsys spectrum for a
given spw, the frequency interval of bandpass solution is recalculated to
meet the lower threshold, <code class="docutils literal notranslate"><span class="pre">minbpsnr</span></code> - i.e. a lower snr is tolerated in
order to preserve enough frequency intervals to capture the atmospheric
line.</p></li>
</ul>
<p>Output:</p>
<blockquote>
<div><p>results – The results object for the pipeline task is returned.</p>
</div></blockquote>
</section>
<section id="parameter-list">
<h2>Parameter List<a class="headerlink" href="#parameter-list" title="Link to this heading"></a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>parameter name</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>vis</p></td>
<td><div class="line-block">
<div class="line">The list of input MeasurementSets. Defaults to the list of</div>
<div class="line">MeasurementSets specified in the pipeline context.</div>
<div class="line">example: vis=[‘M82A.ms’, ‘M82B.ms’]</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>field</p></td>
<td><div class="line-block">
<div class="line">The list of field names of sources to be used for</div>
<div class="line">signal-to-noise estimation. Defaults to all fields with the</div>
<div class="line">standard intent.</div>
<div class="line">example: field=’3C279’</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>intent</p></td>
<td><div class="line-block">
<div class="line">A string containing a comma delimited list of intents against</div>
<div class="line">which the selected fields are matched. Defaults to</div>
<div class="line">‘BANDPASS’.</div>
<div class="line">example: intent=’PHASE’</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>spw</p></td>
<td><div class="line-block">
<div class="line">The list of spectral windows and channels for which gain</div>
<div class="line">solutions are computed. Defaults to all the science spectral</div>
<div class="line">windows for which there are both ‘intent’ and TARGET intents.</div>
<div class="line">example: spw=’13,15’</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>phaseupsnr</p></td>
<td><div class="line-block">
<div class="line">The required phase-up gain time interval solution</div>
<div class="line">signal-to-noise.</div>
<div class="line">example: phaseupsnr=10.0</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>minphaseupints</p></td>
<td><div class="line-block">
<div class="line">The minimum number of time intervals in the phase-up gain</div>
<div class="line">solution.</div>
<div class="line">example: minphaseupints=4</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>evenbpints</p></td>
<td><div class="line-block">
<div class="line">Use a bandpass frequency solint that is an integer divisor of</div>
<div class="line">the spw bandwidth, to prevent the occurrence of one narrower</div>
<div class="line">fractional frequency interval.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>bpsnr</p></td>
<td><div class="line-block">
<div class="line">The required bandpass frequency interval solution</div>
<div class="line">signal-to-noise.</div>
<div class="line">example: bpsnr=30.0</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>minbpsnr</p></td>
<td><div class="line-block">
<div class="line">The minimum required bandpass frequency interval solution</div>
<div class="line">signal-to-noise when strong atmospheric lines exist in Tsys</div>
<div class="line">spectra.</div>
<div class="line">example: minbpsnr=10.0</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>minbpnchan</p></td>
<td><div class="line-block">
<div class="line">The minimum number of frequency intervals in the bandpass</div>
<div class="line">solution.</div>
<div class="line">example: minbpnchan=16</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>hm_nantennas</p></td>
<td><div class="line-block">
<div class="line">The heuristics for determines the number of antennas to use</div>
<div class="line">in the signal-to-noise estimate. The options are ‘all’ and</div>
<div class="line">‘unflagged’. The ‘unflagged’ options is not currently</div>
<div class="line">supported.</div>
<div class="line">example: hm_nantennas=’unflagged’</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>maxfracflagged</p></td>
<td><div class="line-block">
<div class="line">The maximum fraction of an antenna that can be flagged before</div>
<div class="line">it is excluded from the signal-to-noise estimate.</div>
<div class="line">example: maxfracflagged=0.80</div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<p>1. Estimate the phaseup gain time interval and the bandpass frequency
interval required to match the desired signal-to-noise for bandpass
solutions:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hifa_bpsolint</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2024, Pipeline Dev. Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>