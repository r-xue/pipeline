

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>hif_rawflagchans &mdash; Pipeline unknown documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom_theme.css?v=678032d9" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=3f1b9271"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Pipeline
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Pipeline Tasks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pipeline_tasks/pipeline_tasks.html">Pipeline Heuristics Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Task (sphinx-autosummary)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.h.cli.html">pipeline.h.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.hif.cli.html">pipeline.hif.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.hifa.cli.html">pipeline.hifa.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.hifv.cli.html">pipeline.hifv.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.hsd.cli.html">pipeline.hsd.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.hsdn.cli.html">pipeline.hsdn.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.domain.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.infrastructure.launcher.html">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.domain.html">pipeline.domain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/pipeline.infrastructure.launcher.html">pipeline.infrastructure.launcher</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Heuristics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../heuristics/field_parameter.html">Field parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../heuristics/FlaggingTasks.html">Pipeline Flagging Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Releases etc.</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases.html">Past Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modular.html">Run the Pipeline in a Conda environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dependencies.html">Dependencies of <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Pipeline Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../basics.html"><code class="docutils literal notranslate"><span class="pre">pipeline.domain</span></code> module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basics.html#module-pipeline.infrastructure.launcher"><code class="docutils literal notranslate"><span class="pre">pipeline.infrastructure.launcher</span></code> module</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Task Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../task_classes.html"><code class="docutils literal notranslate"><span class="pre">pipeline.hifa.tasks</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../task_classes.html#module-pipeline.hif.tasks"><code class="docutils literal notranslate"><span class="pre">pipeline.hif.tasks</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../task_classes.html#module-pipeline.hif"><code class="docutils literal notranslate"><span class="pre">pipeline.hif</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../task_classes.html#pipeline-inheritance-diagrams">Pipeline Inheritance Diagrams</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/ways_to_run_the_pipeline.html">Ways to run the Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/comparing_pipeline_executions.html">Comparing pipeline executions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/building_the_pipeline.html">Building the pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/ALMA-Imaging-Workflow.html">ALMA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/VLA-Imaging-Workflow.html">VLA interferometry imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/VLASS-SE-CONT-Imaging-Workflow.html">VLASS-SE-CONT imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/VLASS-SE-CUBE-Imaging-Workflow.html">VLASS-SE-CUBE imaging workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/selfcal_workflow.html">VLASS Selfcal &amp; Restore workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/pipeline_tests.html">Pipeline testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/DataType_Testing.html">DataType Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/QA_scores.html">Pipeline Quality Assurance (QA) Score Class Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/DeveloperDocumentation.html">Pipeline developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/python3_conversion_notes.html">Python 3 conversion notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develdocmd/recipes.html">Pipeline Recipes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples Notes (from Jupyter Notebooks)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/test1.html">test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Notes (from .rst)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/test2.html">Example 1</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Pipeline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">hif_rawflagchans</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/_taskdocs/hif/hif_rawflagchans_task.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hif-rawflagchans">
<h1>hif_rawflagchans<a class="headerlink" href="#hif-rawflagchans" title="Link to this heading"></a></h1>
<section id="task-description">
<h2>Task description<a class="headerlink" href="#task-description" title="Link to this heading"></a></h2>
<p>hif_rawflagchans flags deviant baseline/channels in the raw data.</p>
<p>The flagging views used are derived from the raw data for the specified
intent - default is BANDPASS.</p>
<p>Bad baseline/channels are flagged for all intents, not just the
one that is the basis of the flagging views.</p>
<p>For each spectral window the flagging view is a 2d image with axes
‘channel’ and ‘baseline’. The pixel for each channel, baseline is the
time average of the underlying unflagged raw data.</p>
<p>The baseline axis is labeled by numbers of form id1.id2 where id1 and id2
are the IDs of the baseline antennas. Both id1 and id2 run over all
antenna IDs in the observation. This means that each baseline is shown
twice but has the benefit that ‘bad’ antennas are easily identified by
eye.</p>
<p>Three flagging methods are available:</p>
<p>If parameter <code class="docutils literal notranslate"><span class="pre">flag_hilo</span></code> is set True then outliers from the median
of each flagging view will be flagged.</p>
<p>If parameter <code class="docutils literal notranslate"><span class="pre">flag_bad_quadrant</span></code> is set True then a simple 2 part
test is used to check for bad antenna quadrants and/or bad baseline
quadrants. Here a ‘quadrant’ is defined simply as one quarter of the
channel axis. The first part of the test is to note as ‘suspect’ those
points further from the view median than <code class="docutils literal notranslate"><span class="pre">fbq_hilo_limit</span></code> * MAD.
The second part is to flag entire antenna/quadrants if their
fraction of suspect points exceeds <code class="docutils literal notranslate"><span class="pre">fbq_antenna_frac_limit</span></code>.
Failing that, entire baseline/quadrants may be flagged if their
fraction of suspect points exceeds <code class="docutils literal notranslate"><span class="pre">fbq_baseline_frac_limit</span></code>.
Suspect points are not flagged unless as part of a bad antenna or
baseline quadrant.</p>
<p>Output</p>
<p>results – The results object for the pipeline task is returned.</p>
</section>
<section id="parameter-list">
<h2>Parameter List<a class="headerlink" href="#parameter-list" title="Link to this heading"></a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>parameter name</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>vis</p></td>
<td><div class="line-block">
<div class="line">List of input MeasurementSets. default: [] - Use the MeasurementSets currently known to the pipeline</div>
<div class="line">context.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>spw</p></td>
<td><div class="line-block">
<div class="line">The list of spectral windows and channels to which the calibration will be applied. Defaults to all science windows in the pipeline</div>
<div class="line">context.</div>
<div class="line">example: spw=’17’, spw=’11, 15’</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>intent</p></td>
<td><div class="line-block">
<div class="line">A string containing the list of intents to be checked for antennas with deviant gains. The default is blank, which causes the task to select</div>
<div class="line">the ‘BANDPASS’ intent.</div>
<div class="line">example: intent=’<cite>*BANDPASS*</cite>’</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>flag_hilo</p></td>
<td><div class="line-block">
<div class="line">True to flag channel/baseline data further from the view median than fhl_limit * MAD.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>fhl_limit</p></td>
<td><div class="line-block">
<div class="line">If flag_hilo is True then flag channel/baseline data further from the view median than fhl_limit * MAD.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>fhl_minsample</p></td>
<td><div class="line-block">
<div class="line">Do no flagging if the view median and MAD are derived from fewer than fhl_minsample view pixels.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>flag_bad_quadrant</p></td>
<td><div class="line-block">
<div class="line">True to search for and flag bad antenna quadrants and baseline quadrants. Here a /’quadrant/’ is one</div>
<div class="line">quarter of the channel axis.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>fbq_hilo_limit</p></td>
<td><div class="line-block">
<div class="line">If flag_bad_quadrant is True then channel/baselines further from the view median than fbq_hilo_limit * MAD will be noted as</div>
<div class="line">‘suspect’. If there are enough of them to indicate that an antenna or</div>
<div class="line">baseline quadrant is bad then all channel/baselines in that quadrant will</div>
<div class="line">be flagged.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>fbq_antenna_frac_limit</p></td>
<td><div class="line-block">
<div class="line">If flag_bad_quadrant is True and the fraction of suspect channel/baselines in a particular antenna/quadrant exceeds</div>
<div class="line">fbq_antenna_frac_limit then all data for that antenna/quadrant will</div>
<div class="line">be flagged.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>fbq_baseline_frac_limit</p></td>
<td><div class="line-block">
<div class="line">If flag_bad_quadrant is True and the fraction of suspect channel/baselines in a particular baseline/quadrant exceeds</div>
<div class="line">fbq_baseline_frac_limit then all data for that baseline/quadrant will</div>
<div class="line">be flagged.</div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Flag bad quadrants and wild outliers, default method:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_rawflagchans</span><span class="p">()</span>
</pre></div>
</div>
<p>equivalent to:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hif_rawflagchans</span><span class="p">(</span><span class="n">flag_hilo</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fhl_limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">flag_bad_quadrant</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fbq_hilo_limit</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">fbq_antenna_frac_limit</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">fbq_baseline_frac_limit</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2024, Pipeline Dev. Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>